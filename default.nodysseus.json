{
    "description": "function composition",
    "script": "return lib.no.default_fn(lib, self)",
    "nodes": {
        "content_el_selector": {
            "type": "el_selector",
            "selector": "#content"
        },
        "content_el": {
            "type": "get",
            "index": 0
        },
        "test": {"script": "return (state, input) => console.log('hi');"},
        "base_editor": {
            "description": "sibling aggregation",
            "type": "dom",
            "dom_type": "div",
            "nodes": {
                "node_editor": {
                    "type": "dom",
                    "dom_type": "div"
                },
                "text_editor": {
                    "type": "dom",
                    "dom_type": "div"
                }
            },
            "edges": [
                {"from": "in", "to": "node_editor"},
                {"from": "node_editor", "to": "text_editor"}
            ]
        },
        "hyperapp_input": {
            "type": "merge"
        },
        "hyperapp": {
            "script": "return (state, input) => { if(!state.has('dispatch') && input.view && input.dom){ state.set('dispatch', lib.ha.app({ init: {}, view: haState => input.view, node: input.dom })); } return state.get('dispatch'); }"
        }
    },
    "node_types": {
        "el_selector": {
            "script": "return () => document.querySelector(self.selector);"
        },
        "get": {
            "script": "return () => input.target[input.index ?? self.index]"
        },
        "constant": {
            "script": "return () => self.value"
        },
        "merge": {
            "script": "return (state, input) => state.set('input', Object.assign({}, state.get('input') ?? {}, input)).get('input')"
        },
        "log": {
            "script": "return (_, input) => console.log(input)"
        },
        "dom": {
            "script": "const aggregated = lib.no.aggregate_fn(lib, self); console.log(aggregated({}, {})); return (state, input) => lib.ha.h(self.dom_type, {}, aggregated(state, input))"
        }
    },
    "edges": [
        {
            "from": "in",
            "to": "content_el_selector"
        },
        {
            "from": "in",
            "to": "test"
        },
        {
            "from": "content_el_selector",
            "to": "hyperapp_input",
            "as": "dom"
        },
        {
            "from": "in",
            "to": "base_editor"
        },
        {
            "from": "base_editor",
            "to": "hyperapp_input",
            "as": "view"
        },
        {
            "from": "hyperapp_input",
            "to": "hyperapp"
        }
    ]
}