{
    "out": "out",
    "nodes": [
        {
            "id": "in"
        },
        {"id": "array"},
        {"id": "utility"},
        {"id": "flow"},
        {"id": "html"},
        {"id": "object"},
        {"id": "custom"},
        {"id": "state"},
        {"id": "JSON"},
        {
            "id": "log",
            "args": ["value"],
            "nodes": [
                {
                    "id": "in"
                },
                {
                    "id": "value",
                    "ref": "arg",
                    "value": "value"
                },
                {
                    "id": "out",
                    "args": [],
                    "script": "console.log(_node.name ?? _node.id); console.log(value); return value"
                }
            ],
            "edges": [
                {
                    "from": "in",
                    "to": "out",
                    "as": "input"
                },
                {
                    "from": "value",
                    "to": "out",
                    "as": "value"
                }
            ]
        },
        {"id": "fetch", "name": "fetch", "extern": "utility.fetch"},
        {"id": "call", "name": "call", "extern": "utility.call"},
        {"id": "stringify", "name": "stringify", "extern": "JSON.stringify"},
        {"id": "parse", "name": "parse", "extern": "JSON.parse"},
    {
        "id": "wrap_array",
        "args": ["value"],
        "script": "return [value]"
    },{
        "id": "graph_to_sim_fn",
        "out": "action",
        "nodes": [
            {
                "id": "state",
                "ref": "arg",
                "value": 0
            },
            {
                "id": "payload",
                "ref": "arg",
                "value": 1
            },
            {
                "id": "action",
                "script": "return _lib.scripts.graphToSimulationNodes(state, payload)"
            }
        ],
        "edges": [
            {"from": "state", "to": "action", "as": "state"},
            {"from": "payload", "to": "action", "as": "payload"}
        ]
    },
    {
        "id": "sim_to_hyperapp_action",
        "out": "action",
        "nodes": [
            {
                "id": "state",
                "ref": "arg",
                "value": 0
            },
            {
                "id": "old_nodes",
                "ref": "arg",
                "value": "0.nodes"
            },
            {
                "id": "old_links",
                "ref": "arg",
                "value": "0.links"
            },
            {
                "id": "new_nodes",
                "ref": "arg",
                "value": "1.nodes"
            },
            {
                "id": "new_links",
                "ref": "arg",
                "value": "1.links"
            },
            {
                "id": "selected",
                "ref": "arg",
                "value": "0.selected"
            },
            {
                "id": "display_graph",
                "ref": "arg",
                "value": "0.display_graph"
            },
            {
                "id": "payload",
                "ref": "arg",
                "value": 1
            },
            {
                "id": "calculate_levels",
                "script": "return _lib.scripts.calculateLevels(nodes, links, display_graph, selected)"
            },
            {
                "id": "with_levels",
                "script": "return {...state, levels}"
            },
            {
                "id": "graph_topology_change",
                "script": "return true"
            },
            {
                "id": "if_levels",
                "ref": "if"
            },
            {"id": "panzoom_selected_effector", "ref": "arg", "value": "0.panzoom_selected_effect"},
            {
                "id": "action",
                "script": "return [{...state, nodes: new_nodes, links: new_links, randid: Math.random().toString(36).substring(2, 9)}, panzoom_selected_effect && false && [panzoom_selected_effect, {...state, selected: state.selected[0], nodes: new_nodes, links: new_links}]]"
            }
        ],
        "edges": [
            {"from": "old_nodes", "to": "graph_topology_change", "as": "old_nodes"},
            {"from": "new_nodes", "to": "graph_topology_change", "as": "new_nodes"},
            {"from": "new_links", "to": "graph_topology_change", "as": "new_links"},
            {"from": "old_links", "to": "graph_topology_change", "as": "old_links"},
            {"from": "new_nodes", "to": "calculate_levels", "as": "nodes"},
            {"from": "new_links", "to": "calculate_levels", "as": "links"},
            {"from": "selected", "to": "calculate_levels", "as": "selected"},
            {"from": "display_graph", "to": "calculate_levels", "as": "display_graph"},
            {"from": "calculate_levels", "to": "with_levels", "as": "levels"},
            {"from": "state", "to": "with_levels", "as": "state"},
            {"from": "graph_topology_change", "to": "if_levels", "as": "pred"},
            {"from": "with_levels", "to": "if_levels", "as": "true"},
            {"from": "state", "to": "if_levels", "as": "false"},
            {"from": "new_nodes", "to": "action", "as": "new_nodes"},
            {"from": "new_links", "to": "action", "as": "new_links"},
            {"from": "if_levels", "to": "action", "as": "state"},
            {"from": "panzoom_selected_effector", "to": "action", "as": "panzoom_selected_effect"}
        ]
    },
        {
            "id": "hyperapp_app",
            "nodes": [
                {
                    "id": "in"
                },
                {
                    "id": "init",
                    "ref": "arg",
                    "value": "init"
                },
                {
                    "id": "view",
                    "ref": "arg",
                    "value": "view"
                },
                {
                    "id": "html_id",
                    "ref": "arg",
                    "value": "html_id"
                },
                {
                    "id": "static",
                    "ref": "arg",
                    "value": "static"
                },
                {
                    "id": "display_graph",
                    "ref": "arg",
                    "value": "display_graph"
                },
                {
                    "id": "update_hyperapp",
                    "ref": "arg",
                    "value": "update_hyperapp"
                },
                {
                    "id": "update_sim",
                    "ref": "arg",
                    "value": "update_sim"
                },
                {
                    "id": "sim_to_hyperapp_action",
                    "ref": "arg",
                    "value": "sim_to_hyperapp_action"
                },
                {
                    "id": "render_graph_effect",
                    "ref": "arg",
                    "value": "render_graph_effect"
                },
                {
                    "id": "onkey_fn",
                    "ref": "arg",
                    "value": "onkey_fn"
                },
                {
                    "id": "out",
                    "args": [
                        "init",
                        "view"
                    ],
                    "script": "return {dispatch: _lib.ha.app({dispatch: _lib.no.middleware, init: () => [init, static && [update_sim, {...init, action: sim_to_hyperapp_action}], [update_hyperapp]], view: s => {if(s instanceof Map){ throw new Error('stop') } return view(s).el}, node: document.getElementById(html_id), subscriptions: s => [!static && [_lib.scripts.d3subscription, {action: sim_to_hyperapp_action, update: update_sim}],  !s.popover_graph && [_lib.scripts.keydownSubscription, {action: onkey_fn}], _lib.scripts.listen('resize', (s, _) => [{...s, dimensions: {x: document.getElementById(html_id).clientWidth, y: document.getElementById(html_id).clientHeight}}, [update_sim, s]]), !!document.getElementById( `${html_id}-editor-panzoom`) && [_lib.pz.panzoom, {id: `${html_id}-editor-panzoom`, action: (s, p) => [{...s, show_all: p.event !== 'effect_transform', svg_offset: p.transform}]}]]})}"
                }
            ],
            "edges": [
                {
                    "from": "view",
                    "to": "out",
                    "as": "view"
                },
                {
                    "from": "html_id",
                    "to": "out",
                    "as": "html_id"
                },
                {
                    "from": "display_graph",
                    "to": "out",
                    "as": "display_graph"
                },
                {
                    "from": "static",
                    "to": "out",
                    "as": "static"
                },
                {
                    "from": "update_sim",
                    "to": "out",
                    "as": "update_sim"
                },
                {
                    "from": "update_hyperapp",
                    "to": "out",
                    "as": "update_hyperapp"
                },
                {
                    "from": "sim_to_hyperapp_action",
                    "to": "out",
                    "as": "sim_to_hyperapp_action"
                },
                {
                    "from": "onkey_fn",
                    "to": "out",
                    "as": "onkey_fn"
                },
                {
                    "from": "render_graph_effect",
                    "to": "out",
                    "as": "render_graph_effect"
                },
                {
                    "from": "init",
                    "to": "out",
                    "as": "init"
                }
            ]
        },
        {
            "id": "children_els",
            "nodes": [
                {
                    "id": "in"
                },
                {
                    "id": "out",
                    "args": [
                        "children"
                    ],
                    "script": "return [children.map(c => c.el)]"
                }
            ],
            "edges": [
                {
                    "from": "in",
                    "to": "out"
                }
            ]
        },
        {
            "id": "append",
            "type": "(array: A[], item: A) => A[]",
            "nodes": [
                {
                    "id": "in"
                },
                {"id": "array", "ref": "arg", "value": "array"},
                {"id": "item", "ref": "arg", "value": "item"},
                {
                    "id": "out",
                    "script": "return array.concat(Array.isArray(item) ? item : [item])"
                }
            ],
            "edges": [
                {
                    "from": "in",
                    "to": "out",
                    "as": "_",
                    "type": "ref"
                },
                {"from": "array", "to": "out", "as": "array"},
                {"from": "item", "to": "out", "as": "item"}
            ]
        },
        {
            "id": "concat",
            "type": "(array: A[], items: A[]) => A[]",
            "nodes": [
                {
                    "id": "in"
                },
                {"id": "array", "ref": "arg", "value": "array"},
                {"id": "items", "ref": "arg", "value": "items"},
                {
                    "id": "out",
                    "args": [
                        "item",
                        "array"
                    ],
                    "script": "return (array ?? []).concat(items ?? [])"
                }
            ],
            "edges": [
                {
                    "from": "in",
                    "to": "out",
                    "as": "args"
                },
                {"from": "array", "to": "out", "as": "array"},
                {"from": "items", "to": "out", "as": "items"}
            ]
        },
        {
            "id": "filter",
            "name": "filter",
            "in": "74n1jfm",
            "out": "lahq5z4",
            "nodes": [
                {
                "id": "lahq5z4",
                "args": [],
                "name": "filter/out",
                "script": "const filter_fn = _lib.no.executeGraphNode({graph: _graph})(fn); return arr.filter(filter_fn)"
                },
                {
                "id": "pfoypo5",
                "args": [],
                "ref": "arg",
                "value": "key"
                },
                {
                "id": "zinx621",
                "args": [],
                "ref": "arg",
                "value": "value"
                },
                {
                "id": "x2sz5kb",
                "args": [],
                "ref": "arg",
                "value": "arr"
                },
                {
                "id": "fn",
                "ref": "arg",
                "value": "fn"
                },
                {
                "id": "74n1jfm",
                "args": [],
                "name": "filter/in"
                }
            ],
            "edges": [
                {
                "from": "pfoypo5",
                "to": "lahq5z4",
                "as": "key"
                },
                {
                "from": "zinx621",
                "to": "lahq5z4",
                "as": "value"
                },
                {
                "from": "x2sz5kb",
                "to": "lahq5z4",
                "as": "arr"
                },
                {
                "from": "74n1jfm",
                "to": "lahq5z4",
                "as": "input"
                },
                {
                "from": "fn",
                "to": "lahq5z4",
                "as": "fn"
                }
            ]
        },
        {
            "id": "filter_eq",
            "name": "filter_eq",
            "in": "74n1jfm",
            "out": "lahq5z4",
            "nodes": [
                {
                "id": "lahq5z4",
                "args": [],
                "name": "filter/out",
                "script": "return arr.filter(v => v[key] === value)"
                },
                {
                "id": "pfoypo5",
                "args": [],
                "ref": "arg",
                "value": "key"
                },
                {
                "id": "zinx621",
                "args": [],
                "ref": "arg",
                "value": "value"
                },
                {
                "id": "x2sz5kb",
                "args": [],
                "ref": "arg",
                "value": "arr"
                },
                {
                "id": "74n1jfm",
                "args": [],
                "name": "filter/in"
                }
            ],
            "edges": [
                {
                "from": "pfoypo5",
                "to": "lahq5z4",
                "as": "key"
                },
                {
                "from": "zinx621",
                "to": "lahq5z4",
                "as": "value"
                },
                {
                "from": "x2sz5kb",
                "to": "lahq5z4",
                "as": "arr"
                },
                {
                "from": "74n1jfm",
                "to": "lahq5z4",
                "as": "input"
                }
            ]
        },
        {
            "id": "default",
            "nodes": [
                {"id": "in"},
                {"id": "value", "ref": "arg", "value":"value"},
                {"id": "otherwise", "ref": "arg", "value":"otherwise"},
                {"id": "data"},
                {
                    "id": "out",
                    "script": "return value ?? data['otherwise']"
                }
            ],
            "edges": [
                {"from": "in", "to": "out", "as": "args"},
                {"from": "value", "to": "out", "as": "value"},
                {"from": "otherwise", "to": "data", "as": "otherwise"},
                {"from": "data", "to": "out", "as": "data"}
            ]
        },
        {
            "id": "switch",
            "args": ["data", "input"],
            "nodes": [
                {
                    "id": "in"
                },
                {
                    "id": "out",
                    "args": [
                        "data",
                        "input"
                    ],
                    "script": "return data[input] ?? otherwise;"
                },
                {
                    "id": "input",
                    "ref": "arg",
                    "value": "input"
                },
                {
                    "id": "otherwise",
                    "ref": "arg",
                    "value": "otherwise"
                }
            ],
            "edges": [
                {
                    "from": "in",
                    "to": "out",
                    "as": "data"
                },
                {
                    "from": "input",
                    "to": "out",
                    "as": "input"
                },
                {
                    "from": "otherwise",
                    "to": "out",
                    "as": "otherwise"
                }
            ]
        },
        {
            "id": "if",
            "nodes": [
                {
                    "id": "in"
                },
                {
                    "id": "pred",
                    "ref": "arg",
                    "value": "pred"
                },
                {
                    "id": "true",
                    "ref": "arg",
                    "value": "true"
                },
                {
                    "id": "false",
                    "ref": "arg",
                    "value": "false"
                },
                {"id": "data"},
                {
                    "id": "out",
                    "script": "return !!pred ? data.true_val : data.false_val"
                }
            ],
            "edges": [
                {
                    "from": "in",
                    "to": "out",
                    "as": "data"
                },
                {
                    "from": "true",
                    "to": "data",
                    "as": "true_val"
                },
                {
                    "from": "false",
                    "to": "data",
                    "as": "false_val"
                },
                {"from": "data", "to": "out", "as": "data"},
                {
                    "from": "pred",
                    "to": "out",
                    "as": "pred"
                }
            ]
        },
        {
            "id": "selected_node",
            "script": "return display_graph.nodes.find(n => n.id === selected)"
        },
        {
            "id": "svg_text",
            "out": "out",
            "nodes": [
                {
                    "id": "in"
                },
                {
                    "id": "dom_type",
                    "value": "text"
                },
                {"id": "text", "ref": "arg", "value": "text"},
                {"id": "props", "ref": "arg", "value": "props"},
                {
                    "id": "text_el",
                    "ref": "html_text"
                },
                {
                    "id": "children",
                    "script": "return [text]"
                },
                {"id": "div", "value": "div"},
                {
                    "id": "out",
                    "ref": "html_element"
                }
            ],
            "edges": [
                {
                    "from": "dom_type",
                    "to": "out",
                    "as": "dom_type"
                },
                {
                    "from": "text",
                    "to": "text_el",
                    "as": "text"
                },
                {
                    "from": "text_el",
                    "to": "children",
                    "as": "text"
                },
                {"from": "props", "to": "out", "as": "props"},
                {
                    "from": "children",
                    "to": "out",
                    "as": "children"
                }
            ]
        },
        {
            "id": "runnable",
            "out": "out",
            "nodes": [
                {"id": "fn", "ref": "arg", "value": "fn"},
                {"id": "out", "script": "const parent_id = _node.id.substring(0, _node.id.lastIndexOf('/')); const input = _graph.edges.filter(e => e.to === parent_id).find(i => i.as === 'fn'); return input ? {fn: input.from, graph: _graph} : false"}
            ],
            "edges": [
                {"from": "fn", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "execute_graph",
            "nodes": [
                {
                    "id": "in"
                },
                {
                    "id": "fn",
                    "ref": "arg",
                    "value": "fn"
                },
                {
                    "id": "fn_graph",
                    "ref": "arg",
                    "value": "fn_graph"
                },
                {"id": "args", "ref": "arg", "value": "_args"},
                {"id": "filter_args", "script": "const ret = {...args}; delete ret.fn; delete ret.graph;"},
                {
                    "id": "out",
                    "script": "const res_graph = fn_graph ?? _graph; return (...inner_args) => {return _lib.no.executeGraphNode({graph: {...res_graph, nodes: [...res_graph.nodes], edges: [...res_graph.edges]}})(fn)(Object.keys(args).length > 0 ? Object.assign(args, inner_args.length === 1 ? inner_args[0] : inner_args) : inner_args.length === 1 ? inner_args[0] : inner_args);}"
                }
            ],
            "edges": [
                {
                    "from": "in",
                    "to": "out",
                    "as": "args"
                },
                {"from": "fn", "to": "out", "as": "fn"},
                {"from": "fn_graph", "to": "out", "as": "fn_graph"}
            ]
        },
        {"id": "apply", "script": "return _lib.no.executeGraphNode({graph: fn.graph ?? _graph})(fn.fn ?? fn)(args);"},
        {"id": "apply_graph", "script": "return _lib.no.executeGraphNode({graph})(fn)(args);"},
        {
            "id": "partial", 
            "nodes": [
                {"id": "in"},
                {"id": "input_value", "ref": "arg", "value": "_args"},
                {"id": "fn", "ref": "arg", "value": "fn"},
                {"id": "args", "ref": "arg", "value": "args"},
                {"id": "out", "script": "return _lib.no.executeGraphNode({graph: _graph})(fn)(Object.assign({}, _args, args))"}
            ],
            "edges": [
                {"from": "in", "to": "out", "as": "args", "type": "ref"},
                {"from": "fn", "to": "out", "as": "fn"},
                {"from": "args", "to": "out", "as": "args"},
                {"from": "input_value", "to": "out", "as": "_args"}
            ]
        },
        {"id": "partial_graph", "script": "return _lib.no.executeGraphNode({graph})(fn)(Object.assign({}, _args, args))"},
        {
            "id": "resolve",
            "args": ["data"],
            "nodes": [
                {
                    "id": "in"
                },
                {
                    "id": "keys",
                    "args": ["data"],
                    "script": "return [...data.keys()]"
                },
                {
                    "id": "collate"
                },
                {
                    "id": "out",
                    "args": ["data"],
                    "script": "return data"
                }
            ],
            "edges": [
                {
                    "from": "in",
                    "to": "keys"
                },
                {
                    "from": "keys",
                    "to": "collate",
                    "as": "input"
                },
                {
                    "from": "in",
                    "to": "collate"
                },
                {
                    "from": "collate",
                    "to": "out",
                    "as": "data"
                }
            ]
        },
        {
            "id": "new_array",
            "name": "new_array",
            "extern": "utility.new_array"
        },
        {
            "id": "wrap_effect_fn",
            "args": [
                "fn"
            ],
            "nodes": [
                {
                    "id": "in"
                },
                {
                    "id": "fn",
                    "ref": "arg",
                    "value": "fn"
                },
                {
                    "id": "payload",
                    "ref": "arg",
                    "value": "payload"
                },
                {
                    "id": "out",
                    "args": [
                        "fn"
                    ],
                    "script": "return (_, payload) => fn(payload)"
                }
            ],
            "edges": [
                {
                    "from": "in",
                    "to": "out",
                    "as": "arg0"
                },
                {
                    "from": "payload",
                    "to": "out",
                    "as": "payload"
                },
                {
                    "from": "fn",
                    "to": "out",
                    "as": "fn"
                }
            ]
        },
        {
            "id": "merge_objects",
            "extern": "utility.merge_objects"
        },
        {
            "id": "get",
            "args": ["target", "path"],
            "nodes": [
                {
                    "id": "in"
                },
                {
                    "id": "def",
                    "ref": "arg",
                    "value": "def"
                },
                {
                    "id": "target",
                    "ref": "arg",
                    "value": "target"
                },
                {
                    "id": "path",
                    "ref": "arg",
                    "value": "path"
                },
                {
                    "id": "out",
                    "extern": "just.get"
                }
            ],
            "edges": [
                {
                    "from": "in",
                    "to": "out",
                    "as": "input"
                },
                {
                    "from": "def",
                    "to": "out",
                    "as": "def"
                },
                {
                    "from": "path",
                    "to": "out",
                    "as": "path"
                },
                {
                    "from": "target",
                    "to": "out",
                    "as": "target"
                }
            ]
        },
        {
            "id": "arg",
            "extern": "utility.arg"
        },
        {
            "id": "set-mutable",
            "args": [
                "target",
                "path",
                "value"
            ],
            "script": "return _lib.just.set(target, path, value)"
        },
        {
            "id": "set",
            "type": "(target: any, value: any, path: string) => any",
            "script": "const keys = path.split('.'); const check = (o, v, k) => k.length === 1 ? {...o, [k[0]]: v, _needsresolve: true} : o.hasOwnProperty(k[0]) ? {...o, [k[0]]: check(o[k[0]], v, k.slice(1)), _needsresolve: true} : o; return check(target, value, keys)"
        },
        {
            "id": "delete",
            "out": "out",
            "nodes": [
                {"id": "in"},
                {"id": "target", "ref": "arg", "value": "target"},
                {"id": "path", "ref": "arg", "value": "path"},
                {"id": "out", "script": "const new_val = Object.assign({}, target); delete target[path]; return new_val"}
            ],
            "edges": [
                {"from": "in", "to": "out", "as": "args"},
                {"from": "target", "to": "out", "as": "target"},
                {"from": "path", "to": "out", "as": "path"}
            ]
        },
        {
            "id": "fuse vertices",
            "name": "fuse vertices",
            "in": "g8mx5sn1u",
            "out": "vnw7d8iaw",
            "args": ["graph"],
            "nodes": [
                {
                    "id": "vnw7d8iaw",
                    "name": "fuse vertices",
                    "ref": "switch",
                    "args": ["fuse", "graph"]
                },
                {
                    "id": "6uzm3ifn3",
                    "args": ["graph"],
                    "script": "return graph.edges.length > 0 ? \"fuse\" : \"graph\""
                },
                {
                    "id": "p229wzcj5",
                    "ref": "fuse vertices"
                },
                {
                    "id": "idjoql4db"
                },
                {
                    "id": "wfld638dn",
                    "args": ["remaining_edges"],
                    "script": "return [remaining_edges.map(e => ({...e, to: e.to === chosen_edge.to || e.to === chosen_edge.from ? new_id : e.to, from: e.from === chosen_edge.from || e.from === chosen_edge.to ? new_id : e.from}))]"
                },
                {
                    "id": "ungdjbio6",
                    "args": ["graph", "chosen_edge"],
                    "script": "const remaining = graph.nodes\n.filter(n => n.id !== chosen_edge.to && n.id !== chosen_edge.from);\n\nconst from = [...(graph.nodes\n.find(n => n.id === chosen_edge.to).nodes ?? [chosen_edge.to])]\n\nconst to = [...(graph.nodes.find(n => n.id === chosen_edge.from).nodes ?? [chosen_edge.from])];\n\nreturn [remaining\n.concat([{\nid: new_id, \nnodes: [...(new Set(from.concat(to))).keys()],\n}])\n\n];"
                },
                {
                    "id": "mh8lknkfv",
                    "args": ["graph"],
                    "script": "return [graph.edges.slice(1)]"
                },
                {
                    "id": "h8bhlzbph",
                    "args": ["chosen_edge"],
                    "script": "return chosen_edge.to + \"_\" + chosen_edge.from;",
                    "name": "new_id"
                },
                {
                    "id": "1m739wxv9",
                    "args": ["graph"],
                    "script": "return graph.edges[0]",
                    "name": "edge"
                },
                {
                    "id": "nznzj5bfn",
                    "name": "get graph",
                    "ref": "get"
                },
                {
                    "id": "g8mx5sn1u",
                    "name": "fuse vertices/in"
                },
                {
                    "id": "tta1nggm4",
                    "value": "graph"
                }
            ],
            "edges": [
                {
                    "from": "6uzm3ifn3",
                    "to": "vnw7d8iaw",
                    "as": "input"
                },
                {
                    "from": "p229wzcj5",
                    "to": "vnw7d8iaw",
                    "as": "fuse"
                },
                {
                    "from": "idjoql4db",
                    "to": "p229wzcj5",
                    "as": "graph"
                },
                {
                    "from": "wfld638dn",
                    "to": "idjoql4db",
                    "as": "edges"
                },
                {
                    "from": "ungdjbio6",
                    "to": "idjoql4db",
                    "as": "nodes"
                },
                {
                    "from": "mh8lknkfv",
                    "to": "wfld638dn",
                    "as": "remaining_edges"
                },
                {
                    "from": "h8bhlzbph",
                    "to": "wfld638dn",
                    "as": "new_id"
                },
                {
                    "from": "1m739wxv9",
                    "to": "wfld638dn",
                    "as": "chosen_edge"
                },
                {
                    "from": "h8bhlzbph",
                    "to": "ungdjbio6",
                    "as": "new_id"
                },
                {
                    "from": "1m739wxv9",
                    "to": "ungdjbio6",
                    "as": "chosen_edge"
                },
                {
                    "from": "nznzj5bfn",
                    "to": "vnw7d8iaw",
                    "as": "graph"
                },
                {
                    "from": "nznzj5bfn",
                    "to": "6uzm3ifn3",
                    "as": "graph"
                },
                {
                    "from": "nznzj5bfn",
                    "to": "ungdjbio6",
                    "as": "graph"
                },
                {
                    "from": "nznzj5bfn",
                    "to": "mh8lknkfv",
                    "as": "graph"
                },
                {
                    "from": "1m739wxv9",
                    "to": "h8bhlzbph",
                    "as": "chosen_edge"
                },
                {
                    "from": "nznzj5bfn",
                    "to": "1m739wxv9",
                    "as": "graph"
                },
                {
                    "from": "g8mx5sn1u",
                    "to": "nznzj5bfn",
                    "as": "target"
                },
                {
                    "from": "tta1nggm4",
                    "to": "nznzj5bfn",
                    "as": "path"
                }
            ]
        },
        {
            "id": "remove pendant",
            "name": "remove pendant",
            "in": "jhykipayt",
            "out": "ay4hfrqw1",
            "nodes": [
                {
                    "id": "ay4hfrqw1",
                    "args": [],
                    "name": "remove pendant",
                    "ref": "switch"
                },
                {
                    "id": "r5lka2sj5",
                    "args": [],
                    "script": "return pendants.length > 0 ? [\"remove\"] : [\"graph\"]"
                },
                {
                    "id": "7elx5ekij",
                    "args": [],
                    "ref": "remove pendant"
                },
                {
                    "id": "cz08pewa3",
                    "args": []
                },
                {
                    "id": "7n24u6kpt",
                    "args": [
                        "nodes"
                    ],
                    "script": "return [nodes.filter(n => !pendant_edges.includes(n.id))]",
                    "name": "filter out pendants"
                },
                {
                    "id": "cuiccwvbv",
                    "args": [],
                    "script": "return [edges.filter(e => !pendant_edges.includes(e.to) && !pendant_edges.includes(e.from))]",
                    "name": "filter penant"
                },
                {
                    "id": "lgzenfpvl",
                    "args": [],
                    "script": "let accfrom = edges.flatMap(e => [e.from]).reduce((acc, v) => { acc[v] = (acc[v] ?? 0) + 1; return acc}, {});\nlet accto = edges.flatMap(e => [e.to]).reduce((acc, v) => { acc[v] = (acc[v] ?? 0) + 1; return acc}, {});\n\nreturn nodes.map(n => n.id).filter(n => (!isNaN(accfrom[n]) && accfrom[n] <= 1) && !accto[n] );",
                    "name": "pendant edges"
                },
                {
                    "id": "7g81ijcqb",
                    "name": "nodes",
                    "in": "in",
                    "out": "7g81ijcqb",
                    "nodes": [
                        {
                            "id": "7g81ijcqb",
                            "args": [],
                            "ref": "get",
                            "name": "nodes"
                        },
                        {
                            "id": "2yshp7jvu",
                            "args": [],
                            "value": "nodes"
                        },
                        {
                            "id": "in"
                        }
                    ],
                    "edges": [
                        {
                            "from": "2yshp7jvu",
                            "to": "7g81ijcqb",
                            "as": "path"
                        },
                        {
                            "from": "in",
                            "to": "7g81ijcqb"
                        }
                    ]
                },
                {
                    "id": "zkg9zpu3e",
                    "name": "edges",
                    "in": "in",
                    "out": "zkg9zpu3e",
                    "nodes": [
                        {
                            "id": "zkg9zpu3e",
                            "args": [],
                            "ref": "get",
                            "name": "edges"
                        },
                        {
                            "id": "g18jj6zvq",
                            "args": [],
                            "value": "edges"
                        },
                        {
                            "id": "in"
                        }
                    ],
                    "edges": [
                        {
                            "from": "g18jj6zvq",
                            "to": "zkg9zpu3e",
                            "as": "path"
                        },
                        {
                            "from": "in",
                            "to": "zkg9zpu3e"
                        }
                    ]
                },
                {
                    "id": "bp1cy89hk",
                    "args": [],
                    "ref": "get",
                    "name": "graph"
                },
                {
                    "id": "jhykipayt",
                    "args": [],
                    "name": "remove pendant/in"
                },
                {
                    "id": "iqkdwjpuz",
                    "args": [],
                    "value": "graph"
                }
            ],
            "edges": [
                {
                    "from": "r5lka2sj5",
                    "to": "ay4hfrqw1",
                    "as": "input"
                },
                {
                    "from": "7elx5ekij",
                    "to": "ay4hfrqw1",
                    "as": "remove"
                },
                {
                    "from": "cz08pewa3",
                    "to": "7elx5ekij",
                    "as": "graph"
                },
                {
                    "from": "7n24u6kpt",
                    "to": "cz08pewa3",
                    "as": "nodes"
                },
                {
                    "from": "cuiccwvbv",
                    "to": "cz08pewa3",
                    "as": "edges"
                },
                {
                    "from": "lgzenfpvl",
                    "to": "r5lka2sj5",
                    "as": "pendants"
                },
                {
                    "from": "lgzenfpvl",
                    "to": "cz08pewa3",
                    "as": "pendants"
                },
                {
                    "from": "7g81ijcqb",
                    "to": "7n24u6kpt",
                    "as": "nodes"
                },
                {
                    "from": "lgzenfpvl",
                    "to": "7n24u6kpt",
                    "as": "pendant_edges"
                },
                {
                    "from": "zkg9zpu3e",
                    "to": "7n24u6kpt",
                    "as": "edges"
                },
                {
                    "from": "lgzenfpvl",
                    "to": "cuiccwvbv",
                    "as": "pendant_edges"
                },
                {
                    "from": "zkg9zpu3e",
                    "to": "cuiccwvbv",
                    "as": "edges"
                },
                {
                    "from": "zkg9zpu3e",
                    "to": "lgzenfpvl",
                    "as": "edges"
                },
                {
                    "from": "7g81ijcqb",
                    "to": "lgzenfpvl",
                    "as": "nodes"
                },
                {
                    "from": "bp1cy89hk",
                    "to": "ay4hfrqw1",
                    "as": "graph"
                },
                {
                    "from": "bp1cy89hk",
                    "to": "cz08pewa3"
                },
                {
                    "from": "bp1cy89hk",
                    "to": "7g81ijcqb",
                    "as": "target"
                },
                {
                    "from": "bp1cy89hk",
                    "to": "zkg9zpu3e",
                    "as": "target"
                },
                {
                    "from": "jhykipayt",
                    "to": "bp1cy89hk",
                    "as": "target"
                },
                {
                    "from": "iqkdwjpuz",
                    "to": "bp1cy89hk",
                    "as": "path"
                }
            ]
        },
        {
            "id": "hyperapp_action",
            "script": "return {fn, graph: _graph}"
        },
        {
            "id": "hyperapp_state_action",
            "script": "return {fn, graph: _graph, stateonly: true}"
        },
        {
            "id": "hyperapp_action_effect",
            "description": "Creates an effect that dispatches the passed-in fn",
            "script": "const action = typeof fn === 'string' ? {fn, graph: _graph} : (typeof fn === 'function' || (typeof fn === 'object' && fn.hasOwnProperty('fn'))) ? fn : undefined; return (dispatch, payload) => dispatch(action, payload)"
        },
        {
            "id": "hyperapp_action_effect_debounced",
            "description": "Creates an effect that dispatches the passed-in fn",
            "script": "const action = typeof fn === 'string' ? {fn, graph: _graph} : (typeof fn === 'function' || (typeof fn === 'object' && fn.hasOwnProperty('fn'))) ? fn : undefined; return (dispatch, payload) => requestAnimationFrame(() => dispatch(action, payload))"
        },
        {
            "id": "run_display_graph_effect",
            "nodes": [
                {"id": "state", "ref": "arg", "value": "state"},
                {"id": "display_graph", "ref": "arg", "value": "state.display_graph"},
                {"id": "payload", "ref": "arg", "value": "payload"},
                {"id": "run_effect", "ref": "run_display_graph_effect"},
                {"id": "result", "script": "return _lib.no.executeGraphNode({graph: {...fn_graph, nodes: [...fn_graph.nodes], edges: [...fn_graph.edges]}})('main/out')({state: state, payload: {event: payload, run: run_effect}});"},
                {"id": "out", "script": "return (dispatch, payload) => {const wrapped_dispatch = (a, p) => Promise.resolve([a, p]).then(([a, p]) => dispatch(a, p)).catch(e => dispatch(s => [{...s, error: e}])); wrapped_dispatch(state => {Promise.resolve(state).then(s => _lib.no.executeGraphNode({graph: _graph})(fn)({state: s, payload})).then(res => _lib.no.executeGraphNode({graph: res[0]?.graph ?? res.graph})(res[0]?.fn ?? r.fn)({state, payload: {event: payload, payload: res[1]}, dispatch: wrapped_dispatch})); return state.error ? {...state, error: false} : state;})}"}
            ],
            "edges": [
                {"from": "state", "to": "result", "as": "state"},
                {"from": "payload", "to": "result", "as": "payload"},
                {"from": "run_effect", "to": "result", "as": "run_effect"},
                {"from": "display_graph", "to": "result", "as": "fn_graph"},
                {"from": "result", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "update_graph_display",
            "in": "in",
            "out": "out",
            "nodes": [
                {
                    "id": "in"
                },
                {
                    "id": "state",
                    "ref": "arg",
                    "value": "state"
                },
                {
                    "id": "payload",
                    "ref": "arg",
                    "value": "payload"
                },
                {
                    "id": "update_sim_effect",
                    "ref": "arg",
                    "value": "state.update_sim_effect"
                },
                {
                    "id": "show_result",
                    "ref": "arg",
                    "value": "state.show_result"
                },
                {
                    "id": "state_result",
                    "ref": "arg",
                    "value": "state.result"
                },
                {
                    "id": "error_nodes",
                    "ref": "arg",
                    "value": "state.error_nodes"
                },
                {
                    "id": "update_arg",
                    "ref": "arg",
                    "value": "state.update"
                },
                {
                    "id": "nodes",
                    "ref": "arg",
                    "value": "state.nodes"
                },
                {
                    "id": "links",
                    "ref": "arg",
                    "value": "state.links"
                },
                {
                    "id": "selected",
                    "ref": "arg",
                    "value": "state.selected"
                },
                {
                    "id": "readonly",
                    "ref": "arg",
                    "value": "state.readonly"
                },
                {
                    "id": "html_id",
                    "ref": "arg",
                    "value": "state.html_id"
                },
                {"id": "show_args_effector", "ref": "show_args_effect"},
                {"id": "show_args_effect", "ref": "new_array"},
                {"id": "should_show_args", "ref": "switch"},
                {"id": "dispatch_custom_event_effect", "ref": "dispatch_custom_event_effect"},
                {
                    "id": "in_effects",
                    "ref": "arg",
                    "value": "effects"
                },
                {"id": "new_effects", "ref": "new_array"},
                {"id": "effects", "ref": "concat"},
                {
                    "id": "display_graph",
                    "ref": "arg",
                    "value": "state.display_graph"
                },
                {
                    "id": "calculate_levels",
                    "script": "return _lib.scripts.calculateLevels(nodes, links, display_graph, selected)"
                },
                {
                    "id": "reduce_graph",
                    "ref": "fuse vertices"
                },
                {
                    "id": "levels",
                    "ref": "switch",
                    "args": ["levels"]
                },
                {
                    "id": "levels_inputs",
                    "args": [
                        "selected"
                    ],
                    "script": "return ['levels']"
                },
                {
                    "id": "set_levels",
                    "args": [
                        "state",
                        "levels"
                    ],
                    "script": "return {...state, levels: levels ?? state.levels}"
                },
                {
                    "id": "graph_sim",
                    "script": "return undefined;"
                },
                {
                    "id": "new_state_cases",
                    "script": "return [graph_sim && 'graph_sim', 'state']"
                },
                {
                    "id": "new_state",
                    "script": "return Object.assign({}, state, {nodes: graph_sim?.nodes ?? state.nodes, links: graph_sim?.links ?? state.links, levels: graph_sim?.levels ?? state.levels});"
                },
                {
                    "id": "update",
                    "script": "return update || !!display_graph || !!selected"
                },
                {
                    "id": "run",
                    "ref": "run_display_graph_effect",
                    "script_": "return Promise.resolve({state: prev_result, payload: _lib.no.resolve(payload), graph: display_graph}).then(promise_payload => _lib.no.executeGraphValue({graph: {...display_graph, nodes: display_graph.nodes.map(n => ({...n})), edges: display_graph.edges.map(e => ({...e}))}})(promise_payload)).then(result => {if(result.display && !result.display.el.props.key){ result.display.el.props.key = `${html_id}-result_display` } return {result, error: undefined, error_nodes}; }).catch(e => ({error: e instanceof AggregateError ? e.errors.map(e => (e instanceof _lib.no.NodysseusError ? e.node_id + ': ' : '') + e.toString()).join(\" \") : e.toString(), error_nodes: new Map(e instanceof AggregateError ? e.errors.map(e => e instanceof _lib.no.NodysseusError ? [e.node_id, e] : false).filter(n => n) : e instanceof _lib.no.NodysseusError ? [[e.node_id, e]] : [])}))"
                },
                {
                    "id": "out",
                    "script": "return {state, effects: [(!!update || !!update_graph_sim) && [update_sim_effect, state], !readonly && [run, payload], !readonly && [dispatch_custom_event_effect, {html_id, event: 'updategraph', detail: {graph: state.display_graph}}], ...(effects?.filter(e => e?.[0]) ?? [])]}",
                    "script_": "return {state, effects: [(!!update || !!update_graph_sim) && [update_sim_effect, state], !readonly && [(d, payload) => (typeof payload?.then === 'function' ? payload.then(p => p.run) : payload.run).then(res => res).then(res => d(s => (s.error_nodes.clear(), {...s, result: res.result?.state ?? s.result, error: res.error, error_nodes: res.error_nodes ?? s.error_nodes, result_display: res.result?.display, error: res.error}))), result], !readonly && [dispatch_custom_event_effect, {html_id, event: 'updategraph', detail: {graph: state.display_graph}}], ...(effects.filter(e => e?.[0]) ?? [])]}"
                }
            ],
            "edges": [
                {
                    "from": "update_arg",
                    "to": "update",
                    "as": "update"
                },
                {
                    "from": "state",
                    "to": "set_levels",
                    "as": "state"
                },
                {
                    "from": "in",
                    "to": "levels_inputs"
                },
                {
                    "from": "in",
                    "to": "graph"
                },
                {
                    "from": "display_graph",
                    "to": "reduce_graph",
                    "as": "graph" 
                },
                {
                    "from": "payload",
                    "to": "run",
                    "as": "payload" 
                },
                {
                    "from": "display_graph",
                    "to": "run",
                    "as": "display_graph" 
                },
                {
                    "from": "html_id",
                    "to": "run",
                    "as": "html_id" 
                },
                {"from": "nodes", "to": "calculate_levels", "as": "nodes"},
                {"from": "links", "to": "calculate_levels", "as": "links"},
                {"from": "selected", "to": "calculate_levels", "as": "selected"},
                {"from": "display_graph", "to": "calculate_levels", "as": "display_graph"},
                {
                    "from": "calculate_levels",
                    "to": "levels",
                    "as": "levels"
                },
                {
                    "from": "levels",
                    "to": "set_levels",
                    "as": "levels"
                },
                {
                    "from": "set_levels",
                    "to": "new_state",
                    "as": "state"
                },
                {
                    "from": "levels_inputs",
                    "to": "levels",
                    "as": "input"
                },
                {
                    "from": "graph_sim",
                    "to": "new_state",
                    "as": "graph_sim"
                },
                {
                    "from": "error_nodes",
                    "to": "run",
                    "as": "error_nodes"
                },
                {
                    "from": "state_result",
                    "to": "run",
                    "as": "prev_result"
                },
                {
                    "from": "run",
                    "to": "result",
                    "as": "run"
                },
                {
                    "from": "show_result",
                    "to": "out",
                    "as": "show_result"
                },
                {
                    "from": "run",
                    "to": "out",
                    "as": "run"
                },
                {
                    "from": "readonly",
                    "to": "out",
                    "as": "readonly"
                },
                {
                    "from": "selected",
                    "to": "update",
                    "as": "selected" 
                },
                {
                    "from": "display_graph",
                    "to": "update",
                    "as": "display_graph" 
                },
                {
                    "from": "update",
                    "to": "out",
                    "as": "update"
                },
                {"from": "readonly", "to": "should_show_args", "as": "input"},
                {
                    "from": "show_args_effector",
                    "to": "show_args_effect",
                    "as": "a0"
                },
                {
                    "from": "show_args_effect",
                    "to": "should_show_args",
                    "as": "false"
                },
                {
                    "from": "should_show_args",
                    "to": "new_effects",
                    "as": "a0"
                },
                {
                    "from": "new_effects",
                    "to": "effects",
                    "as": "array"
                },
                {
                    "from": "in_effects",
                    "to": "effects",
                    "as": "items"
                },
                {
                    "from": "payload",
                    "to": "out",
                    "as": "payload" 
                },
                {
                    "from": "html_id",
                    "to": "out",
                    "as": "html_id" 
                },
                {
                    "from": "display_graph",
                    "to": "out",
                    "as": "display_graph" 
                },
                {
                    "from": "effects",
                    "to": "out",
                    "as": "effects",
                    "type": "resolve"
                },
                {
                    "from": "dispatch_custom_event_effect",
                    "to": "out",
                    "as": "dispatch_custom_event_effect"
                },
                {
                    "from": "update_sim_effect",
                    "to": "out",
                    "as": "update_sim_effect"
                },
                {
                    "from": "new_state",
                    "to": "out",
                    "as": "state"
                }
            ]
        },
        {
            "id": "map",
            "name": "map",
            "in": "m3b5wg3",
            "out": "tgurdpo",
            "nodes": [
                {
                    "id": "tgurdpo",
                    "ref": "call",
                    "name": "out"
                },
                {
                    "id": "m3b5wg3",
                    "name": "in"
                },
                {
                    "id": "rielyq8",
                    "value": "map",
                    "name": "rielyq8"
                },
                {
                    "ref": "arg",
                    "id": "1rre4bx",
                    "value": "array",
                    "name": "1rre4bx"
                },
                {
                    "id": "w0zzawl",
                    "ref": "new_array",
                    "name": "w0zzawl"
                },
                {"id": "args", "ref": "arg", "value": "_args"},
                {
                    "id": "pdljod1",
                    "name": "pdljod1",
                    "script": "return (element, index, array) => _lib.no.runGraph(_graph, fn, Object.assign({}, {element, index, array}, args));"
                },
                {
                    "id": "2lvs5dj",
                    "script": "return _graph",
                    "name": "2lvs5dj"
                },
                {
                    "ref": "arg",
                    "id": "6g75abk",
                    "value": "fn",
                    "name": "6g75abk"
                }
            ],
            "edges": [
                {
                    "from": "m3b5wg3",
                    "to": "tgurdpo",
                    "as": "args",
                    "type": "ref"
                },
                {
                    "from": "rielyq8",
                    "to": "tgurdpo",
                    "as": "fn"
                },
                {
                    "from": "1rre4bx",
                    "to": "tgurdpo",
                    "as": "self"
                },
                {
                    "from": "w0zzawl",
                    "to": "tgurdpo",
                    "as": "args",
                    "type": "resolve"
                },
                {
                    "from": "pdljod1",
                    "to": "w0zzawl",
                    "as": "a0"
                },
                {
                    "from": "2lvs5dj",
                    "to": "pdljod1",
                    "as": "graph"
                },
                {
                    "from": "args",
                    "to": "pdljod1",
                    "as": "args"
                },
                {
                    "from": "6g75abk",
                    "to": "pdljod1",
                    "as": "fn"
                }
            ]
        },
        {
            "id": "toggle",
            "name": "toggle",
            "in": "itrzmbe",
            "out": "nn4twx9",
            "nodes": [
                {
                    "id": "nn4twx9",
                    "ref": "html_element",
                    "inputs": [
                        {
                            "from": "lvzwtzi",
                            "to": "nn4twx9",
                            "as": "children"
                        },
                        {
                            "from": "t6q6rvf",
                            "to": "nn4twx9",
                            "as": "props"
                        },
                        {
                            "from": "tchu5kq",
                            "to": "nn4twx9",
                            "as": "dom_type"
                        }
                    ],
                    "name": "out"
                },
                {
                    "id": "lvzwtzi",
                    "ref": "new_array"
                },
                {
                    "id": "t6q6rvf"
                },
                {
                    "id": "tchu5kq",
                    "value": "button"
                },
                {
                    "id": "583nwco",
                    "name": "in"
                },
                {
                    "id": "itrzmbe",
                    "name": "in"
                },
                {
                    "id": "vmehp75/h4hkmke",
                    "ref": "html_text",
                    "name": "button_text"
                },
                {
                    "id": "punpbfw",
                    "ref": "execute_graph",
                    "name": "onclick_fn"
                },
                {
                    "id": "2aqvso8",
                    "ref": "arg",
                    "value": "value"
                },
                {
                    "id": "teuf938",
                    "ref": "arg",
                    "value": "value"
                },
                {
                    "id": "1067z1h",
                    "ref": "new_array"
                },
                {
                    "id": "b8q8y2q",
                    "ref": "new_array"
                },
                {
                    "id": "pprukwn",
                    "ref": "set"
                },
                {
                    "id": "zu0hb6e",
                    "ref": "arg",
                    "value": "0.update_hyperapp"
                },
                {
                    "id": "eo8hxkq",
                    "script": "return !toggle;"
                },
                {
                    "id": "s6847dx",
                    "ref": "arg",
                    "value": "0"
                },
                {
                    "id": "5g3gdi1",
                    "script": "return 'result.' + value;"
                },
                {
                    "id": "flcuh31",
                    "ref": "get"
                },
                {
                    "id": "0eoq13n",
                    "ref": "arg",
                    "value": "value"
                },
                {
                    "id": "ysqu0jj",
                    "ref": "arg",
                    "value": "0.result"
                },
                {
                    "id": "8ji5lb6",
                    "ref": "arg",
                    "value": "value"
                }
            ],
            "edges": [
                {
                    "from": "lvzwtzi",
                    "to": "nn4twx9",
                    "as": "children"
                },
                {
                    "from": "t6q6rvf",
                    "to": "nn4twx9",
                    "as": "props"
                },
                {
                    "from": "tchu5kq",
                    "to": "nn4twx9",
                    "as": "dom_type"
                },
                {
                    "from": "583nwco",
                    "to": "nn4twx9",
                    "as": "arg3"
                },
                {
                    "from": "itrzmbe",
                    "to": "nn4twx9",
                    "as": "arg4"
                },
                {
                    "to": "lvzwtzi",
                    "from": "vmehp75/h4hkmke",
                    "as": "arg1"
                },
                {
                    "from": "punpbfw",
                    "to": "t6q6rvf",
                    "as": "onclick"
                },
                {
                    "from": "2aqvso8",
                    "to": "vmehp75/h4hkmke",
                    "as": "text"
                },
                {
                    "from": "teuf938",
                    "to": "punpbfw",
                    "as": "value"
                },
                {
                    "from": "1067z1h",
                    "to": "punpbfw",
                    "as": "fn",
                    "type": "ref"
                },
                {
                    "from": "b8q8y2q",
                    "to": "1067z1h",
                    "as": "arg1"
                },
                {
                    "from": "pprukwn",
                    "to": "1067z1h",
                    "as": "arg0"
                },
                {
                    "from": "zu0hb6e",
                    "to": "b8q8y2q",
                    "as": "update_hyperapp"
                },
                {
                    "from": "eo8hxkq",
                    "to": "pprukwn",
                    "as": "value"
                },
                {
                    "from": "s6847dx",
                    "to": "pprukwn",
                    "as": "target"
                },
                {
                    "from": "5g3gdi1",
                    "to": "pprukwn",
                    "as": "path"
                },
                {
                    "from": "flcuh31",
                    "to": "eo8hxkq",
                    "as": "toggle"
                },
                {
                    "from": "0eoq13n",
                    "to": "5g3gdi1",
                    "as": "value"
                },
                {
                    "from": "ysqu0jj",
                    "to": "flcuh31",
                    "as": "target"
                },
                {
                    "from": "8ji5lb6",
                    "to": "flcuh31",
                    "as": "path"
                }
            ]
        },
        {
            "id": "sequence",
            "name": "sequence",
            "in": "9mhpj8k/23ynj8o",
            "out": "2435ihf",
            "nodes": [
                {
                    "name": "out",
                    "id": "2435ihf",
                    "ref": "new_array"
                },
                {
                    "name": "seq_runnable",
                    "id": "hz8lp96/hz8lp96",
                    "ref": "runnable"
                },
                {
                    "name": "in",
                    "id": "9mhpj8k/23ynj8o"
                },
                {
                    "id": "hz8lp96/2g7hpye",
                    "script": "return Promise.all(promises);"
                },
                {
                    "id": "hz8lp96/u36ltxo",
                    "ref": "map"
                },
                {
                    "id": "hz8lp96/lq3olmi",
                    "script": "console.log(payload);\nreturn Object.entries(payload).filter(a => a[0] !== 'state' && a[0] !== 'payload' && a[0] !== 'dispatch' && (a[1]?.fn || a[1]?.[0]?.fn)).map(a => a[1]);"
                },
                {
                    "id": "hz8lp96/j6iu3d3",
                    "script": "return Promise.resolve(state).then(s => _lib.no.executeGraphNode({graph: runnable[0]?.graph ?? runnable.graph})(runnable[0]?.fn ?? runnable.fn)({state: s, payload: {event, payload: runnable[1]}, dispatch}));"
                },
                {
                    "id": "hz8lp96/cja7ejh",
                    "ref": "arg",
                    "value": "payload.payload"
                },
                {
                    "id": "hz8lp96/wucbgux",
                    "ref": "arg",
                    "value": "dispatch"
                },
                {
                    "id": "hz8lp96/3d6efet",
                    "ref": "arg",
                    "value": "element"
                },
                {
                    "id": "hz8lp96/obnvz4m",
                    "ref": "arg",
                    "value": "state"
                },
                {
                    "id": "hz8lp96/j6kp3o9",
                    "ref": "arg",
                    "value": "payload.event"
                }
            ],
            "edges": [
                {
                    "from": "hz8lp96/hz8lp96",
                    "to": "2435ihf",
                    "as": "arg0"
                },
                {
                    "to": "2435ihf",
                    "from": "9mhpj8k/23ynj8o",
                    "as": "arg1"
                },
                {
                    "from": "hz8lp96/2g7hpye",
                    "to": "hz8lp96/hz8lp96",
                    "as": "fn"
                },
                {
                    "from": "hz8lp96/u36ltxo",
                    "to": "hz8lp96/2g7hpye",
                    "as": "promises"
                },
                {
                    "from": "hz8lp96/lq3olmi",
                    "to": "hz8lp96/u36ltxo",
                    "as": "array"
                },
                {
                    "from": "hz8lp96/j6iu3d3",
                    "to": "hz8lp96/u36ltxo",
                    "as": "fn",
                    "type": "ref"
                },
                {
                    "from": "hz8lp96/cja7ejh",
                    "to": "hz8lp96/lq3olmi",
                    "as": "payload"
                },
                {
                    "from": "hz8lp96/wucbgux",
                    "to": "hz8lp96/j6iu3d3",
                    "as": "dispatch"
                },
                {
                    "from": "hz8lp96/3d6efet",
                    "to": "hz8lp96/j6iu3d3",
                    "as": "runnable"
                },
                {
                    "from": "hz8lp96/obnvz4m",
                    "to": "hz8lp96/j6iu3d3",
                    "as": "state"
                },
                {
                    "from": "hz8lp96/j6kp3o9",
                    "to": "hz8lp96/j6iu3d3",
                    "as": "event"
                }
            ]
        },
        {
            "id": "modify_state_runnable",
            "name": "modify_state_runnable",
            "in": "sueor1k",
            "out": "tpcqvm2",
            "nodes": [
                {
                    "name": "modify_state_runnable",
                    "id": "tpcqvm2",
                    "inputs": [
                        {
                            "from": "bkm8hz8",
                            "to": "tpcqvm2",
                            "as": "arg0"
                        },
                        {
                            "from": "sueor1k",
                            "to": "tpcqvm2",
                            "as": "arg1"
                        }
                    ],
                    "ref": "new_array"
                },
                {
                    "id": "bkm8hz8",
                    "ref": "runnable"
                },
                {
                    "id": "sueor1k",
                    "name": "in"
                },
                {
                    "id": "f5ybb5f",
                    "ref": "call"
                },
                {
                    "id": "qov8vrr",
                    "ref": "arg",
                    "value": "dispatch"
                },
                {
                    "id": "eil1eq5",
                    "ref": "new_array"
                },
                {
                    "id": "r07vaaz",
                    "ref": "runnable"
                },
                {
                    "id": "cb92j91",
                    "value": "payload",
                    "ref": "arg"
                },
                {
                    "id": "saonc89"
                },
                {
                    "id": "0nyu2om",
                    "name": "modify_state_value",
                    "ref": "modify_state_value"
                },
                {
                    "id": "mo6m3pd",
                    "value": "payload.payload.fn",
                    "ref": "arg"
                },
                {
                    "id": "c18pwko",
                    "ref": "arg",
                    "value": "payload.payload.value"
                }
            ],
            "edges": [
                {
                    "from": "bkm8hz8",
                    "to": "tpcqvm2",
                    "as": "arg0"
                },
                {
                    "from": "sueor1k",
                    "to": "tpcqvm2",
                    "as": "arg1"
                },
                {
                    "from": "f5ybb5f",
                    "to": "bkm8hz8",
                    "as": "fn"
                },
                {
                    "from": "qov8vrr",
                    "to": "f5ybb5f",
                    "as": "self"
                },
                {
                    "from": "eil1eq5",
                    "to": "f5ybb5f",
                    "as": "args"
                },
                {
                    "from": "r07vaaz",
                    "to": "eil1eq5",
                    "as": "arg0"
                },
                {
                    "from": "cb92j91",
                    "to": "eil1eq5",
                    "as": "payload"
                },
                {
                    "from": "saonc89",
                    "to": "r07vaaz",
                    "as": "fn"
                },
                {
                    "from": "0nyu2om",
                    "to": "saonc89",
                    "as": "state"
                },
                {
                    "from": "mo6m3pd",
                    "to": "0nyu2om",
                    "as": "fn"
                },
                {
                    "from": "c18pwko",
                    "to": "0nyu2om",
                    "as": "value"
                }
            ],
            "inputs": [
                {
                    "from": "ngkl1rp/ayf70m0/rrxfq4l",
                    "to": "tpcqvm2",
                    "as": "fn"
                },
                {
                    "from": "ngkl1rp/lw849n7",
                    "to": "tpcqvm2",
                    "as": "value"
                }
            ]
        },
        {
            "id": "modify_state_value",
            "name": "modify_state_value",
            "in": "9g39i2c",
            "out": "0nyu2om",
            "nodes": [
                {
                    "name": "out",
                    "id": "0nyu2om",
                    "ref": "set"
                },
                {
                    "name": "in",
                    "id": "9g39i2c"
                },
                {
                    "id": "ehu0yf5",
                    "value": "value",
                    "ref": "arg"
                },
                {
                    "id": "npwm1c5",
                    "ref": "apply"
                },
                {
                    "id": "5dkffft"
                },
                {
                    "id": "1t54i2i",
                    "ref": "arg",
                    "value": "fn"
                },
                {
                    "id": "rcfwyh8",
                    "ref": "arg",
                    "value": "state"
                },
                {
                    "id": "2u2jmvs",
                    "ref": "get"
                },
                {
                    "id": "iibsq38",
                    "value": "payload",
                    "ref": "arg"
                },
                {
                    "id": "xur00me",
                    "value": "value",
                    "ref": "arg"
                },
                {
                    "id": "a01lbb8",
                    "ref": "arg",
                    "value": "state"
                }
            ],
            "edges": [
                {
                    "to": "0nyu2om",
                    "from": "9g39i2c",
                    "as": "fn"
                },
                {
                    "from": "ehu0yf5",
                    "to": "0nyu2om",
                    "as": "path"
                },
                {
                    "from": "npwm1c5",
                    "to": "0nyu2om",
                    "as": "value"
                },
                {
                    "from": "5dkffft",
                    "to": "npwm1c5",
                    "as": "args"
                },
                {
                    "from": "1t54i2i",
                    "to": "npwm1c5",
                    "as": "fn"
                },
                {
                    "from": "rcfwyh8",
                    "to": "0nyu2om",
                    "as": "target"
                },
                {
                    "from": "rcfwyh8",
                    "to": "5dkffft",
                    "as": "state"
                },
                {
                    "from": "2u2jmvs",
                    "to": "5dkffft",
                    "as": "state_value"
                },
                {
                    "from": "iibsq38",
                    "to": "5dkffft",
                    "as": "payload"
                },
                {
                    "from": "xur00me",
                    "to": "2u2jmvs",
                    "as": "path"
                },
                {
                    "from": "a01lbb8",
                    "to": "2u2jmvs",
                    "as": "target"
                }
            ]
        },
        {
            "id": "css_styles",
            "name": "css_styles",
            "in": "xw3pmx7",
            "out": "5yxmxua",
            "nodes": [
                {
                    "id": "5yxmxua",
                    "ref": "html_element",
                    "inputs": [
                        {
                            "from": "gjeyyc8/vgv61zj",
                            "to": "gjeyyc8/5yxmxua",
                            "as": "children"
                        },
                        {
                            "from": "gjeyyc8/jstjx7g",
                            "to": "gjeyyc8/5yxmxua",
                            "as": "props"
                        },
                        {
                            "from": "gjeyyc8/h40e3j9",
                            "to": "gjeyyc8/5yxmxua",
                            "as": "dom_type"
                        }
                    ],
                    "name": "out"
                },
                {
                    "id": "vgv61zj",
                    "ref": "html_element"
                },
                {
                    "id": "jstjx7g"
                },
                {
                    "id": "h40e3j9",
                    "value": "style"
                },
                {
                    "id": "xw3pmx7",
                    "name": "in"
                },
                {
                    "id": "jlgp7uy",
                    "ref": "call"
                },
                {
                    "id": "o1j78dd",
                    "value": "result-view"
                },
                {
                    "id": "ij4z84e",
                    "ref": "map"
                },
                {
                    "id": "q3pwj9j",
                    "value": "join"
                },
                {
                    "id": "d6h3gdw",
                    "ref": "new_array"
                },
                {
                    "id": "j8c79uf",
                    "name": "object_entries",
                    "ref": "object_entries"
                },
                {
                    "id": "aelf1a7",
                    "script": "return key + '{' + value + '}'"
                },
                {
                    "id": "z63iaay",
                    "script": "return \"\\n\";"
                },
                {
                    "id": "vwsgweb",
                    "ref": "default"
                },
                {
                    "id": "5eqf77t",
                    "value": "element.0",
                    "ref": "arg"
                },
                {
                    "id": "1hpnid4",
                    "ref": "call"
                },
                {
                    "id": "mkwx4yx"
                },
                {
                    "id": "fzr4mkv",
                    "ref": "arg",
                    "value": "css_object"
                },
                {
                    "id": "bbbp82v",
                    "ref": "map"
                },
                {
                    "id": "cp66ig5",
                    "value": "join"
                },
                {
                    "id": "uwq9u81",
                    "ref": "new_array"
                },
                {
                    "id": "i1ifamx",
                    "ref": "object_entries"
                },
                {
                    "id": "0d4yh8u",
                    "script": "return key + ': ' + value + \";\";"
                },
                {
                    "id": "gth1wc2",
                    "script": "return \"\\n\";"
                },
                {
                    "id": "y25dg2n",
                    "value": "element.1",
                    "ref": "arg"
                },
                {
                    "id": "h13a9fd",
                    "ref": "arg",
                    "value": "element.0"
                },
                {
                    "id": "h7me3v8",
                    "ref": "arg",
                    "value": "element.1"
                }
            ],
            "edges": [
                {
                    "from": "vgv61zj",
                    "to": "5yxmxua",
                    "as": "children"
                },
                {
                    "from": "jstjx7g",
                    "to": "5yxmxua",
                    "as": "props"
                },
                {
                    "from": "h40e3j9",
                    "to": "5yxmxua",
                    "as": "dom_type"
                },
                {
                    "from": "xw3pmx7",
                    "to": "5yxmxua",
                    "as": "arg3"
                },
                {
                    "from": "jlgp7uy",
                    "to": "vgv61zj",
                    "as": "text"
                },
                {
                    "from": "o1j78dd",
                    "to": "jstjx7g",
                    "as": "key"
                },
                {
                    "from": "ij4z84e",
                    "to": "jlgp7uy",
                    "as": "self"
                },
                {
                    "from": "q3pwj9j",
                    "to": "jlgp7uy",
                    "as": "fn"
                },
                {
                    "from": "d6h3gdw",
                    "to": "jlgp7uy",
                    "as": "args"
                },
                {
                    "from": "j8c79uf",
                    "to": "ij4z84e",
                    "as": "array"
                },
                {
                    "from": "aelf1a7",
                    "to": "ij4z84e",
                    "as": "fn",
                    "type": "ref"
                },
                {
                    "from": "z63iaay",
                    "to": "d6h3gdw",
                    "as": "arg0"
                },
                {
                    "from": "vwsgweb",
                    "to": "j8c79uf",
                    "as": "object"
                },
                {
                    "from": "5eqf77t",
                    "to": "aelf1a7",
                    "as": "key"
                },
                {
                    "from": "1hpnid4",
                    "to": "aelf1a7",
                    "as": "value"
                },
                {
                    "from": "mkwx4yx",
                    "to": "vwsgweb",
                    "as": "otherwise"
                },
                {
                    "from": "fzr4mkv",
                    "to": "vwsgweb",
                    "as": "value"
                },
                {
                    "from": "bbbp82v",
                    "to": "1hpnid4",
                    "as": "self"
                },
                {
                    "from": "cp66ig5",
                    "to": "1hpnid4",
                    "as": "fn"
                },
                {
                    "from": "uwq9u81",
                    "to": "1hpnid4",
                    "as": "args"
                },
                {
                    "from": "i1ifamx",
                    "to": "bbbp82v",
                    "as": "array"
                },
                {
                    "from": "0d4yh8u",
                    "to": "bbbp82v",
                    "as": "fn",
                    "type": "ref"
                },
                {
                    "from": "gth1wc2",
                    "to": "uwq9u81",
                    "as": "arg0"
                },
                {
                    "from": "y25dg2n",
                    "to": "i1ifamx",
                    "as": "object"
                },
                {
                    "from": "h13a9fd",
                    "to": "0d4yh8u",
                    "as": "key"
                },
                {
                    "from": "h7me3v8",
                    "to": "0d4yh8u",
                    "as": "value"
                }
            ]
        },
        {
            "id": "set_display",
            "name": "set_display",
            "in": "fkp4pck/wb73q0h",
            "out": "a59hci8",
            "nodes": [
                {
                    "name": "out",
                    "id": "a59hci8",
                    "ref": "sequence"
                },
                {
                    "id": "da71z9c/2435ihf/jd1mc84",
                    "name": "modify_state_runnable",
                    "ref": "modify_state_runnable"
                },
                {
                    "id": "fkp4pck/wb73q0h",
                    "name": "in"
                },
                {
                    "id": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/y4qbl8k",
                    "value": "result_display"
                },
                {
                    "id": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/lol0vdh",
                    "ref": "runnable"
                },
                {
                    "id": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/eyrczw3/p35xuny",
                    "name": "da71z9c/out"
                },
                {
                    "id": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/w8vpdfx",
                    "ref": "html_element"
                },
                {
                    "id": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/eyrczw3/m7fcn6k",
                    "ref": "arg",
                    "value": "children"
                },
                {
                    "id": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/eyrczw3/8ancque",
                    "ref": "arg",
                    "value": "dom_type"
                },
                {
                    "id": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/eyrczw3/gf6y51n",
                    "ref": "arg",
                    "value": "props"
                },
                {
                    "id": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/vofecaa",
                    "ref": "arg",
                    "value": "payload.props"
                },
                {
                    "id": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/j8qudts",
                    "ref": "arg",
                    "value": "payload.children"
                },
                {
                    "id": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/iead5y3",
                    "ref": "arg",
                    "value": "payload.dom_type"
                }
            ],
            "edges": [
                {
                    "from": "da71z9c/2435ihf/jd1mc84",
                    "to": "a59hci8",
                    "as": "arg0"
                },
                {
                    "to": "a59hci8",
                    "from": "fkp4pck/wb73q0h",
                    "as": "dispatch"
                },
                {
                    "from": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/y4qbl8k",
                    "to": "da71z9c/2435ihf/jd1mc84",
                    "as": "value"
                },
                {
                    "from": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/lol0vdh",
                    "to": "da71z9c/2435ihf/jd1mc84",
                    "as": "fn"
                },
                {
                    "from": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/eyrczw3/p35xuny",
                    "to": "da71z9c/2435ihf/jd1mc84",
                    "as": "payload"
                },
                {
                    "from": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/w8vpdfx",
                    "to": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/lol0vdh",
                    "as": "fn"
                },
                {
                    "from": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/eyrczw3/m7fcn6k",
                    "to": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/eyrczw3/p35xuny",
                    "as": "children"
                },
                {
                    "from": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/eyrczw3/8ancque",
                    "to": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/eyrczw3/p35xuny",
                    "as": "dom_type"
                },
                {
                    "from": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/eyrczw3/gf6y51n",
                    "to": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/eyrczw3/p35xuny",
                    "as": "props"
                },
                {
                    "from": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/vofecaa",
                    "to": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/w8vpdfx",
                    "as": "props"
                },
                {
                    "from": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/j8qudts",
                    "to": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/w8vpdfx",
                    "as": "children"
                },
                {
                    "from": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/iead5y3",
                    "to": "da71z9c/2435ihf/jd1mc84/a59hci8/da71z9c/2435ihf/w8vpdfx",
                    "as": "dom_type"
                }
            ]
        },
        {
            "id": "input",
            "name": "input",
            "in": "7rhq0q5",
            "out": "nn4twx9",
            "nodes": [
                {
                    "id": "nn4twx9",
                    "ref": "html_element",
                    "inputs": [
                        {
                            "from": "bw4iez5/gvkhkfw",
                            "to": "bw4iez5/nn4twx9",
                            "as": "children"
                        },
                        {
                            "from": "bw4iez5/7rhq0q5",
                            "to": "bw4iez5/nn4twx9",
                            "as": "props"
                        }
                    ],
                    "name": "out"
                },
                {
                    "id": "gvkhkfw",
                    "ref": "new_array"
                },
                {
                    "id": "7rhq0q5",
                    "name": "in"
                },
                {
                    "id": "4972gx3",
                    "ref": "html_element"
                },
                {
                    "id": "1ldhfah",
                    "ref": "html_element",
                    "name": "label"
                },
                {
                    "id": "ee5i5r2",
                    "value": "input"
                },
                {
                    "id": "wet0jdv",
                    "ref": "new_array"
                },
                {
                    "id": "gcuxiw9"
                },
                {
                    "id": "875c1wk",
                    "value": "label"
                },
                {
                    "id": "ro8n2gc",
                    "ref": "merge_objects"
                },
                {
                    "id": "utkc9o6",
                    "ref": "html_element"
                },
                {
                    "id": "jxl9r29",
                    "script": "return \"input-\" + value;"
                },
                {
                    "id": "t6q6rvf"
                },
                {
                    "id": "rjwtb3c",
                    "ref": "default"
                },
                {
                    "id": "trd8ptp",
                    "ref": "arg",
                    "value": "value"
                },
                {
                    "id": "zfrrk0z",
                    "ref": "arg",
                    "value": "value"
                },
                {
                    "id": "punpbfw",
                    "ref": "execute_graph",
                    "name": "onchange_fn"
                },
                {
                    "id": "2zxw9oo",
                    "ref": "execute_graph",
                    "name": "stop_propagation"
                },
                {
                    "id": "vks4vul",
                    "ref": "arg",
                    "value": "props"
                },
                {
                    "id": "ddfgy2s"
                },
                {
                    "id": "teuf938",
                    "ref": "arg",
                    "value": "value"
                },
                {
                    "id": "1067z1h",
                    "ref": "new_array"
                },
                {
                    "id": "2obm63l",
                    "ref": "arg",
                    "value": "onchange_fn"
                },
                {
                    "id": "qseh2tb",
                    "ref": "new_array"
                },
                {
                    "id": "b8q8y2q",
                    "ref": "new_array"
                },
                {
                    "id": "pprukwn",
                    "ref": "set"
                },
                {
                    "id": "ctuds7y",
                    "ref": "new_array"
                },
                {
                    "id": "1wps21n",
                    "name": "stop propagation effect",
                    "out": "hj2cig0",
                    "nodes": [
                        {
                            "id": "hj2cig0",
                            "ref": "new_array",
                            "name": "stop propagation effect"
                        },
                        {
                            "id": "1pvaim9",
                            "ref": "execute_graph"
                        },
                        {
                            "id": "0o86xp3",
                            "ref": "arg",
                            "value": "1"
                        },
                        {
                            "id": "d60jwms",
                            "script": "payload.stopPropagation();"
                        },
                        {
                            "id": "xgbubrq",
                            "ref": "arg",
                            "value": "1"
                        }
                    ],
                    "edges": [
                        {
                            "from": "1pvaim9",
                            "to": "hj2cig0",
                            "as": "a0"
                        },
                        {
                            "from": "0o86xp3",
                            "to": "hj2cig0",
                            "as": "a1"
                        },
                        {
                            "from": "d60jwms",
                            "to": "1pvaim9",
                            "as": "fn",
                            "type": "ref"
                        },
                        {
                            "from": "xgbubrq",
                            "to": "d60jwms",
                            "as": "payload"
                        }
                    ]
                },
                {
                    "id": "y5q7mbn",
                    "ref": "arg",
                    "value": "0"
                },
                {
                    "id": "zu0hb6e",
                    "ref": "arg",
                    "value": "0.update_hyperapp"
                },
                {
                    "id": "s6847dx",
                    "ref": "arg",
                    "value": "0"
                },
                {
                    "id": "o1aktwv",
                    "ref": "arg",
                    "value": "1.target.value"
                },
                {
                    "id": "0eoq13n",
                    "ref": "arg",
                    "value": "value"
                },
                {
                    "id": "bn9vsx1",
                    "script": "return dispatch => dispatch(s => [s, [() => _lib.no.executeGraphNode({graph: runnable[0]?.graph ?? runnable.graph})(runnable[0]?.fn ?? runnable.fn)({state: s, payload: undefined, dispatch})]])"
                },
                {
                    "id": "31gq2bt",
                    "ref": "arg",
                    "value": "onchange_fn"
                }
            ],
            "edges": [
                {
                    "from": "gvkhkfw",
                    "to": "nn4twx9",
                    "as": "children"
                },
                {
                    "from": "7rhq0q5",
                    "to": "nn4twx9",
                    "as": "_"
                },
                {
                    "from": "4972gx3",
                    "to": "gvkhkfw",
                    "as": "arg1"
                },
                {
                    "from": "1ldhfah",
                    "to": "gvkhkfw",
                    "as": "arg0"
                },
                {
                    "from": "ee5i5r2",
                    "to": "4972gx3",
                    "as": "dom_type"
                },
                {
                    "from": "wet0jdv",
                    "to": "1ldhfah",
                    "as": "children"
                },
                {
                    "from": "gcuxiw9",
                    "to": "1ldhfah",
                    "as": "props"
                },
                {
                    "from": "875c1wk",
                    "to": "1ldhfah",
                    "as": "dom_type"
                },
                {
                    "from": "ro8n2gc",
                    "to": "4972gx3",
                    "as": "props"
                },
                {
                    "from": "utkc9o6",
                    "to": "wet0jdv",
                    "as": "arg0"
                },
                {
                    "from": "jxl9r29",
                    "to": "gcuxiw9",
                    "as": "for"
                },
                {
                    "from": "t6q6rvf",
                    "to": "ro8n2gc",
                    "as": "arg0"
                },
                {
                    "from": "rjwtb3c",
                    "to": "ro8n2gc",
                    "as": "props"
                },
                {
                    "from": "trd8ptp",
                    "to": "utkc9o6",
                    "as": "text"
                },
                {
                    "from": "zfrrk0z",
                    "to": "jxl9r29",
                    "as": "value"
                },
                {
                    "from": "punpbfw",
                    "to": "t6q6rvf",
                    "as": "onchange"
                },
                {
                    "from": "2zxw9oo",
                    "to": "t6q6rvf",
                    "as": "onkeydown"
                },
                {
                    "from": "vks4vul",
                    "to": "rjwtb3c",
                    "as": "value"
                },
                {
                    "from": "ddfgy2s",
                    "to": "rjwtb3c",
                    "as": "otherwise"
                },
                {
                    "from": "teuf938",
                    "to": "punpbfw",
                    "as": "value"
                },
                {
                    "from": "1067z1h",
                    "to": "punpbfw",
                    "as": "fn",
                    "type": "ref"
                },
                {
                    "from": "2obm63l",
                    "to": "punpbfw",
                    "as": "onchange_fn"
                },
                {
                    "to": "2zxw9oo",
                    "from": "qseh2tb",
                    "as": "fn",
                    "type": "ref"
                },
                {
                    "from": "b8q8y2q",
                    "to": "1067z1h",
                    "as": "arg1"
                },
                {
                    "from": "pprukwn",
                    "to": "1067z1h",
                    "as": "arg0"
                },
                {
                    "from": "ctuds7y",
                    "to": "1067z1h",
                    "as": "arg2"
                },
                {
                    "from": "1wps21n",
                    "to": "qseh2tb",
                    "as": "a1"
                },
                {
                    "from": "y5q7mbn",
                    "to": "qseh2tb",
                    "as": "a0"
                },
                {
                    "from": "zu0hb6e",
                    "to": "b8q8y2q",
                    "as": "update_hyperapp"
                },
                {
                    "from": "s6847dx",
                    "to": "pprukwn",
                    "as": "target"
                },
                {
                    "from": "o1aktwv",
                    "to": "pprukwn",
                    "as": "value"
                },
                {
                    "from": "0eoq13n",
                    "to": "pprukwn",
                    "as": "path"
                },
                {
                    "from": "bn9vsx1",
                    "to": "ctuds7y",
                    "as": "arg0"
                },
                {
                    "from": "31gq2bt",
                    "to": "bn9vsx1",
                    "as": "runnable"
                }
            ]
        },
        {
            "id": "html_text",
            "out": "out",
            "nodes": [
                {"id": "in"},
                {"id": "text", "ref": "arg", "value": "text"},
                {"id": "text_value", "value": "text_value"},
                {"id": "out"}
            ],
            "edges": [
                {"from": "in", "to": "out", "as": "_", "type": "ref"},
                {"from": "text_value", "to": "out", "as": "dom_type"},
                {"from": "text", "to": "out", "as": "text"}
            ]
        },
        {
            "id": "html_element",
            "nodes": [
                { "id": "in" },
                {"id": "children", "ref": "arg", "value": "children"},
                {"id": "props", "ref": "arg", "value": "props"},
                { "id": "dom_type", "ref": "arg", "value": "dom_type" },
                {"id": "div", "value": "div"},
                {
                    "id": "fill_children",
                    "args": [
                        "children"
                    ],
                    "script": "return children === undefined ? [] : children.length !== undefined ? children.filter(c => !!c).map(c => c.el ?? c) : [children.el ?? children]"
                },
                {
                    "id": "fill_props",
                    "args": [
                        "input"
                    ],
                    "script": "return props ?? {}"
                },
                {"id": "dom_type_def", "ref": "default"},
                {
                    "id": "out",
                    "script": "if(!(typeof dom_type === 'string' && Array.isArray(children))){ throw new Error('invalid element');} children.filter(c => c).forEach(c => {if(typeof c.dom_type !== 'string'){throw new Error ('invalid child element');}}); return {el: {dom_type, props, children}}"
                }
            ],
            "edges": [
                { "from": "children", "to": "fill_children", "as": "children" },
                { "from": "props", "to": "fill_props", "as": "props" },
                { "from": "fill_children", "to": "out", "as": "children", "type": "resolve" },
                { "from": "fill_props", "to": "out", "as": "props" },
                {"from": "dom_type", "to": "dom_type_def", "as": "value"},
                {"from": "div", "to": "dom_type_def", "as": "otherwise"},
                {"from": "dom_type_def", "to": "out", "as": "dom_type"},
                {"from": "in", "to": "out", "as": "args", "type": "ref"}
            ]
        },
        {
            "id": "icon",
            "name": "icon",
            "out": "c2sko9c",
            "nodes": [
                {
                    "id": "c2sko9c",
                    "ref": "html_element",
                    "name": "ionicon"
                },
                {
                    "id": "2lr3ihi",
                    "value": "ion-icon"
                },
                {"id": "empty_obj", "value": {}},
                {"id": "props", "ref": "arg", "value": "props"},
                {"id": "defined_props", "ref": "if"},
                {"id": "name_path", "value": "name"},
                {"id": "a0jb5es", "ref": "set"},
                {
                    "id": "s5x2r1f",
                    "ref": "arg",
                    "value": "icon"
                }
            ],
            "edges": [
                {
                    "from": "2lr3ihi",
                    "to": "c2sko9c",
                    "as": "dom_type"
                },
                {"from": "props", "to": "defined_props", "as": "true"},
                {"from": "props", "to": "defined_props", "as": "pred"},
                {"from": "empty_obj", "to": "defined_props", "as": "false"},
                {"from": "defined_props", "to": "a0jb5es", "as": "target"},
                {"from": "name_path", "to": "a0jb5es", "as": "path"},
                {
                    "from": "a0jb5es",
                    "to": "c2sko9c",
                    "as": "props"
                },
                {
                    "from": "s5x2r1f",
                    "to": "a0jb5es",
                    "as": "value"
                }
            ]
        },
        {
            "id": "add_circle_icon",
            "out": "out",
            "nodes": [
                {"id": "in_props", "ref": "arg", "value": "props"},
                {"id": "viewbox_props", "value": {"viewBox": "0 0 512 512"}},
                {"id": "props", "ref": "merge_objects"},
                {"id": "svg", "value": "svg"},
                {"id": "path", "value": "path"},
                {
                    "id": "add_props", 
                    "value": {
                        "d": "M256 176v160M336 256H176",
                        "class": "add"
                    }
                },
                {"id": "add", "ref": "html_element"},
                {
                    "id": "circle_props", 
                    "value": {
                        "d": "M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z",
                        "class": "circle"
                    }
                },
                {"id": "circle", "ref": "html_element"},
                {"id": "children", "ref": "new_array"},
                {"id": "out", "ref": "html_element"}
            ],
            "edges": [
                {"from": "add_props", "to": "add", "as": "props"},
                {"from": "circle_props", "to": "circle", "as": "props"},
                {"from": "add", "to": "children", "as": "a1"},
                {"from": "circle", "to": "children", "as": "a0"},
                {"from": "path", "to": "add", "as": "dom_type"},
                {"from": "path", "to": "circle", "as": "dom_type"},
                {"from": "svg", "to": "out", "as": "dom_type"},
                {"from": "children", "to": "out", "as": "children"},
                {"from": "in_props", "to": "props", "as": "o1"},
                {"from": "viewbox_props", "to": "props", "as": "o2"},
                {"from": "props", "to": "out", "as": "props"}
            ]
        },
        {
            "id": "run_h",
            "in": "in",
            "out": "out",
            "nodes": [
                {
                    "id": "in"
                },
                {
                    "id": "dom_type",
                    "ref": "arg",
                    "value": "dom_type"
                },
                {
                    "id": "props",
                    "ref": "arg",
                    "value": "props"
                },
                {
                    "id": "children",
                    "ref": "arg",
                    "value": "children"
                },
                {
                    "id": "graph",
                    "ref": "arg",
                    "value": "graph"
                },
                {
                    "id": "text",
                    "ref": "arg",
                    "value": "text"
                },
                {
                    "id": "mapped_children",
                    "script": "let run_graph = {...graph, in: 'run_h/in', out: 'run_h'}; const fn = _lib.no.executeGraphValue({graph: run_graph}); return (children?.filter(c => !!c) ?? []).map(c => ({...c, graph: run_graph})).map(fn).filter(c => c).map(c => c.el ?? c);"
                },
                {
                    "id": "out_h",
                    "extern": "ha.h"
                },
                {
                    "id": "out_text",
                    "extern": "ha.text"
                },
                {
                    "id": "els"
                },
                {
                    "id": "out_input",
                    "args": ["dom_type"],
                    "script": "return dom_type === 'text_value' ? 'h_text' : 'h'"
                },
                {
                    "id": "out_el",
                    "ref": "switch"
                },
                {
                    "id": "out"
                }
            ],
            "edges": [
                {"from": "in", "to": "out", "as": "_", "type": "ref"},
                {"from": "dom_type", "to": "out_input", "as": "dom_type"},
                {"from": "dom_type", "to": "out_h", "as": "dom_type"},
                {"from": "children", "to": "mapped_children", "as": "children"},
                {"from": "mapped_children", "to": "out_h", "as": "children"},
                {"from": "props", "to": "out_h", "as": "props"},
                {"from": "graph", "to": "mapped_children", "as": "graph"},
                {"from": "text", "to": "out_text", "as": "text", "type": "resolve"},
                {"from": "out_text", "to": "out_el", "as": "h_text"},
                {"from": "out_h", "to": "out_el", "as": "h"},
                {"from": "out_input", "to": "out_el", "as": "input"},
                {"from": "out_el", "to": "out", "as": "el", "type": "resolve"}
            ]
        },
        {
            "id": "expand_contract",
            "nodes": [
                {
                    "id": "in"
                },
                {
                    "id": "node_id",
                    "ref": "arg",
                    "value": "node_id"
                },
                {
                    "id": "display_graph",
                    "ref": "arg",
                    "value": "display_graph"
                },
                {
                    "id": "display_graph_out",
                    "ref": "arg",
                    "value": "display_graph_out"
                },
                {
                    "id": "selected_node",
                    "script": "return display_graph.nodes.find(n => n.id === selected)"
                },
                {
                    "id": "expand_contract_result_inputs",
                    "script": "return expandable ? 'expand' : contractable ? 'contract' : undefined"
                },
                {
                    "id": "selected",
                    "script": "return [contract] ?? [expand]"
                },
                {
                    "id": "expand_contract_result",
                    "ref": "switch"
                },
                {
                    "id": "get_name",
                    "script": "return node.name"
                },
                {
                    "id": "expandable_id",
                    "script": "return node.id ? node.id + '/' + out : undefined"
                },
                {
                    "id": "contractable_id",
                    "script": "node_id = name ?? node_id; return !node_id ? undefined : node_id.endsWith('/out') ? node_id.substring(0, node_id.lastIndexOf('/')) : node_id.lastIndexOf('/') >= 0 ? node_id.substring(0, node_id.lastIndexOf('/')) : node_id"
                },
                {
                    "id": "expand",
                    "script": "return display_graph && node_id ? _lib.scripts.expand_node({display_graph, node_id}) : []"
                },
                {
                    "id": "contract",
                    "script": "return display_graph && node_id ? _lib.scripts.contract_node({display_graph, node_id, name, node_name}) : []"
                },
                {
                    "id": "has_nodes",
                    "script": "return !!display_graph.nodes.find(n => n.id === node_id).nodes"
                },
                {
                    "id": "is_contractable",
                    "script": "return !has_nodes"
                },
                {
                    "id": "out",
                    "ref": "default"
                }
            ],
            "edges": [
                {
                    "from": "in",
                    "to": "out",
                    "as": "args",
                    "type": "ref"
                },
                {
                    "from": "node_id",
                    "to": "selected_node",
                    "as": "selected"
                },
                {
                    "from": "display_graph",
                    "to": "selected_node",
                    "as": "display_graph"
                },
                {
                    "from": "display_graph",
                    "to": "has_nodes",
                    "as": "display_graph"
                },
                {
                    "from": "node_id",
                    "to": "has_nodes",
                    "as": "node_id"
                },
                {
                    "from": "display_graph",
                    "to": "contract",
                    "as": "display_graph"
                },
                {
                    "from": "node_id",
                    "to": "contract",
                    "as": "node_id"
                },
                {
                    "from": "node_id",
                    "to": "expand",
                    "as": "node_id"
                },
                {
                    "from": "display_graph",
                    "to": "expand",
                    "as": "display_graph"
                },
                {
                    "from": "has_nodes",
                    "to": "is_contractable",
                    "as": "has_nodes"
                },
                {
                    "from": "selected_node",
                    "to": "get_name",
                    "as": "node"
                },
                {
                    "from": "selected_node",
                    "to": "expandable_id",
                    "as": "node"
                },
                {
                    "from": "display_graph_out",
                    "to": "expandable_id",
                    "as": "out"
                },
                {
                    "from": "selected_node",
                    "to": "contract",
                    "as": "node"
                },
                {
                    "from": "get_name",
                    "to": "contract",
                    "as": "node_name"
                },
                {
                    "from": "contractable_id",
                    "to": "contract",
                    "as": "name"
                },
                {
                    "from": "get_name",
                    "to": "is_contractable",
                    "as": "name"
                },
                {
                    "from": "node_id",
                    "to": "contractable_id",
                    "as": "node_id"
                },
                {
                    "from": "get_name",
                    "to": "contractable_id",
                    "as": "name"
                },
                {
                    "from": "contractable_id",
                    "to": "selected",
                    "as": "contract"
                },
                {
                    "from": "expandable_id",
                    "to": "selected",
                    "as": "expand"
                },
                {
                    "from": "has_nodes",
                    "to": "expand_contract_result_inputs",
                    "as": "expandable"
                },
                {
                    "from": "is_contractable",
                    "to": "expand_contract_result_inputs",
                    "as": "contractable"
                },
                {
                    "from": "expand_contract_result_inputs",
                    "to": "selected",
                    "as": "input"
                },
                {
                    "from": "expand_contract_result_inputs",
                    "to": "expand_contract_result",
                    "as": "input"
                },
                {
                    "from": "selected",
                    "to": "expand_contract_result",
                    "as": "selected"
                },
                {
                    "from": "expand",
                    "to": "expand_contract_result",
                    "as": "expand"
                },
                {
                    "from": "contract",
                    "to": "expand_contract_result",
                    "as": "contract"
                },
                {
                    "from": "expand_contract_result",
                    "to": "out",
                    "as": "value"
                },
                {
                    "from": "in",
                    "to": "out",
                    "as": "otherwise"
                }
            ]
        },
        {
            "id": "default_node_display",
            "name": "default_node_display",
            "in": "6pqqchhnk",
            "out": "tsxlng4gd",
            "nodes": [
                {
                    "id": "tsxlng4gd",
                    "ref": "html_element",
                    "name": "default_node_display"
                },
                {
                    "id": "osgrk7ddu",
                    "args": [],
                    "ref": "html_text"
                },
                {
                    "id": "hghirvcml",
                    "args": [],
                    "value": "pre"
                },
                {
                    "id": "ha6b5qttf",
                    "args": ["data"],
                    "script": "return JSON.stringify({node: data.node, result: data.result}, null, 2)"
                },
                {
                    "id": "6pqqchhnk",
                    "name": "default_node_display/in"
                }
            ],
            "edges": [
                {
                    "from": "osgrk7ddu",
                    "to": "tsxlng4gd",
                    "as": "children"
                },
                {
                    "from": "hghirvcml",
                    "to": "tsxlng4gd",
                    "as": "dom_type"
                },
                {
                    "from": "ha6b5qttf",
                    "to": "osgrk7ddu",
                    "as": "text"
                },
                {
                    "from": "6pqqchhnk",
                    "to": "ha6b5qttf",
                    "as": "data"
                }
            ]
        },
        {
            "id": "graph_display",
            "name": "graph_display",
            "in": "in",
            "out": "out",
            "nodes": [
                {
                    "id": "out",
                    "ref": "html_element",
                    "name": "graph_display"
                },
                {
                    "id": "ml655hs73",
                    "args": [],
                    "value": "pre"
                },
                {
                    "id": "thsez3hy1",
                    "args": [],
                    "ref": "html_text"
                },
                {
                    "id": "stringify",
                    "args": [
                        "data"
                    ],
                    "script": "return JSON.stringify({...data.node, nodes: data.node.nodes.length, edges:data.node.edges.length, result: data.result}, null, 2)"
                },
                {
                    "id": "in"
                }
            ],
            "edges": [
                {
                    "from": "ml655hs73",
                    "to": "out",
                    "as": "dom_type"
                },
                {
                    "from": "thsez3hy1",
                    "to": "out",
                    "as": "children"
                },
                {
                    "from": "stringify",
                    "to": "thsez3hy1",
                    "as": "text"
                },
                {
                    "from": "in",
                    "to": "stringify",
                    "as": "data"
                },
                {
                    "from": "in",
                    "to": "stringify",
                    "as": "data"
                }
            ]
        },
        {
            "id": "number_display",
            "name": "number_display",
            "in": "6pqqchhnk",
            "out": "tsxlng4gd",
            "nodes": [
                {
                    "id": "tsxlng4gd",
                    "args": [],
                    "ref": "html_element",
                    "name": "number_display"
                },
                {
                    "id": "hghirvcml",
                    "args": [],
                    "value": "input"
                },
                {
                    "id": "cd571vftv"
                },
                {
                    "id": "h5xzkeoql",
                    "args": [],
                    "value": {
                        "ref": "number"
                    }
                },
                {
                    "id": "ltncqmqe9",
                    "args": [],
                    "ref": "get"
                },
                {
                    "id": "9kkegcpi2",
                    "args": [],
                    "ref": "execute_graph"
                },
                {
                    "id": "e96vv0gpq",
                    "args": [],
                    "value": "node.value"
                },
                {
                    "id": "tw41k3wzg",
                    "args": [],
                    "ref": "get"
                },
                {
                    "id": "u9feks2l9",
                    "args": [],
                    "ref": "update_graph_display"
                },
                {
                    "id": "6pqqchhnk",
                    "args": [],
                    "name": "number_display/in"
                },
                {
                    "id": "yxaspmy5c",
                    "args": [],
                    "value": "graph"
                },
                {
                    "id": "rhzddw3c6",
                    "args": [],
                    "ref": "set"
                },
                {
                    "id": "8jmaa71ct",
                    "args": [],
                    "script": "return arg0 !== arg1;"
                },
                {
                    "id": "w5lqhh9qr",
                    "args": [],
                    "value": "value"
                },
                {
                    "id": "es0e6as0j",
                    "args": [],
                    "ref": "get",
                    "name": "get target value"
                },
                {
                    "id": "vnta2m4py",
                    "args": [],
                    "ref": "get"
                },
                {
                    "id": "gh99zvhy2",
                    "args": [],
                    "value": "1.target.valueAsNumber",
                    "name": "target valueasnum"
                },
                {
                    "id": "88f3s3qrq",
                    "args": [],
                    "value": "value"
                },
                {
                    "id": "fxbdw1jrr",
                    "args": [],
                    "ref": "selected_node"
                },
                {
                    "id": "pkih97fsa",
                    "args": [],
                    "ref": "get",
                    "name": "state"
                },
                {
                    "id": "mbbx3d26q",
                    "args": []
                },
                {
                    "id": "vbwsmt7jt",
                    "args": [],
                    "value": 0
                }
            ],
            "edges": [
                {
                    "from": "hghirvcml",
                    "to": "tsxlng4gd",
                    "as": "dom_type"
                },
                {
                    "from": "cd571vftv",
                    "to": "tsxlng4gd",
                    "as": "props"
                },
                {
                    "from": "h5xzkeoql",
                    "to": "cd571vftv"
                },
                {
                    "from": "ltncqmqe9",
                    "to": "cd571vftv",
                    "as": "value"
                },
                {
                    "from": "9kkegcpi2",
                    "to": "cd571vftv",
                    "as": "oninput"
                },
                {
                    "from": "e96vv0gpq",
                    "to": "ltncqmqe9",
                    "as": "path"
                },
                {
                    "from": "tw41k3wzg",
                    "to": "9kkegcpi2",
                    "as": "graph"
                },
                {
                    "from": "u9feks2l9",
                    "to": "9kkegcpi2",
                    "as": "fn",
                    "type": "ref"
                },
                {
                    "from": "6pqqchhnk",
                    "to": "ltncqmqe9",
                    "as": "target"
                },
                {
                    "from": "6pqqchhnk",
                    "to": "tw41k3wzg",
                    "as": "target"
                },
                {
                    "from": "yxaspmy5c",
                    "to": "tw41k3wzg",
                    "as": "path"
                },
                {
                    "from": "rhzddw3c6",
                    "to": "u9feks2l9",
                    "as": "node"
                },
                {
                    "from": "8jmaa71ct",
                    "to": "u9feks2l9",
                    "as": "update_graph_display"
                },
                {
                    "from": "w5lqhh9qr",
                    "to": "rhzddw3c6",
                    "as": "path"
                },
                {
                    "from": "es0e6as0j",
                    "to": "rhzddw3c6",
                    "as": "value"
                },
                {
                    "from": "vnta2m4py",
                    "to": "8jmaa71ct",
                    "as": "arg0"
                },
                {
                    "from": "es0e6as0j",
                    "to": "8jmaa71ct",
                    "as": "arg1"
                },
                {
                    "from": "gh99zvhy2",
                    "to": "es0e6as0j",
                    "as": "path"
                },
                {
                    "from": "88f3s3qrq",
                    "to": "vnta2m4py",
                    "as": "path"
                },
                {
                    "from": "fxbdw1jrr",
                    "to": "rhzddw3c6",
                    "as": "target"
                },
                {
                    "from": "fxbdw1jrr",
                    "to": "vnta2m4py",
                    "as": "target"
                },
                {
                    "from": "mbbx3d26q",
                    "to": "pkih97fsa",
                    "as": "target"
                },
                {
                    "from": "mbbx3d26q",
                    "to": "9kkegcpi2",
                    "as": "in_node",
                    "type": "ref"
                },
                {
                    "from": "mbbx3d26q",
                    "to": "es0e6as0j",
                    "as": "target"
                },
                {
                    "from": "pkih97fsa",
                    "to": "u9feks2l9"
                },
                {
                    "from": "pkih97fsa",
                    "to": "fxbdw1jrr"
                },
                {
                    "from": "vbwsmt7jt",
                    "to": "pkih97fsa",
                    "as": "path"
                }
            ]
        },
        {
            "id": "default_error_display",
            "in": "in",
            "out": "out",
            "nodes": [
                {
                    "id": "in"
                },
                {
                    "id": "stringify",
                    "args": [
                        "data"
                    ],
                    "script": "const e = data.error; return JSON.stringify({error: e instanceof AggregateError ? e.errors.map(e => e.toString()).join(\" \") : e.toString(), data}, null, 2)"
                },
                {
                    "id": "text",
                    "ref": "html_text"
                },
                {
                    "id": "out_dom_type",
                    "value": "pre" 
                },
                {
                    "id": "out",
                    "ref": "html_element"
                }
            ],
            "edges": [
                {
                    "from": "in",
                    "to": "stringify",
                    "as": "data"
                },
                {
                    "from": "stringify",
                    "to": "text",
                    "as": "text"
                },
                {
                    "from": "text",
                    "to": "out",
                    "as": "children",
                    "type": "resolve"
                },
                {
                    "from": "out_dom_type",
                    "to": "out",
                    "as": "dom_type"
                }
            ]
        },
        {
            "id": "not",
            "args": [
                "target"
            ],
            "script": "return !target"
        },
        {
            "id": "data",
            "value": "data"
        },
        {
            "id": "graph",
            "value": "graph"
        },
        {
            "id": "display_graph",
            "value": "display_graph"
        },
        {
            "id": "nodes",
            "value": "nodes"
        },
        {
            "id": "readonly",
            "ref": "arg",
            "value": "readonly"
        },
        {
            "id": "hash",
            "ref": "arg",
            "value": "hash"
        },
        {
            "id": "static",
            "ref": "arg",
            "value": "static"
        },
        {
            "id": "hide_types",
            "ref": "arg",
            "value": "hide_types"
        },
        {
            "id": "graph_nodes",
            "value": [
                [
                    "graph",
                    "nodes"
                ]
            ]
        },
        {
            "id": "initial_state",
            "value": {
                "nodes": [],
                "links": [],
                "editing": false,
                "search": false,
                "show_all": false,
                "app_state": {},
                "show_result": false,
                "node_el_width": 256,
                "sim_update_alpha": 0.4,
                "args_display": false
            }
        },
        {"id": "dimensions", "ref": "arg", "value": "dimensions"},
        {"id": "error_nodes", "script": "return new Map()"},
        {
            "id": "hyperapp_init_state"
        },
        {
            "id": "calculate_levels",
            "script": "return _lib.scripts.calculateLevels([], [], display_graph, selected)"
        },
        {
            "id": "get_graph",
            "ref": "arg",
            "value": "graph"
        },
        {
            "id": "get_display_graph",
            "ref": "arg",
            "value": "display_graph"
        },
        {
            "id": "display_graph_out",
            "ref": "arg",
            "value": "display_graph.out"
        },
        {
            "id": "init_selected",
            "ref": "new_array"
        },
        {
            "id": "hyperapp_view",
            "ref": "execute_graph"
        },
        {
            "id": "update_hyperapp",
            "ref": "update_graph_display"
        },
        {
            "id": "update_hyperapp_action",
            "ref": "hyperapp_action"
        },
        {
            "id": "update_hyperapp_effect",
            "ref": "hyperapp_action_effect"
        },
        {
            "id": "html_id",
            "ref": "arg",
            "value": "html_id"
        },
        {
            "id": "examples",
            "ref": "arg",
            "value": "examples"
        },
        {
            "id": "initialize_hyperapp_app",
            "ref": "hyperapp_app"
        },
        {
            "id": "out"
        },
        {
            "id": "nodes",
            "ref": "arg",
            "value": "nodes"
        },
        {
            "id": "links",
            "ref": "arg",
            "value": "links"
        },
        {
            "id": "graph_to_simulation",
            "args": [
                "nodes",
                "links",
                "display_graph",
                "selected",
                "levels"
            ],
            "ref": "graph_to_sim_fn",
            "_script": "return _lib.scripts.graphToSimulationNodes({display_graph, nodes, links, selected, levels})"
        },
        {
            "id": "sim_to_hyperapp",
            "ref": "sim_to_hyperapp_action"
        },
        {
            "id": "sim_to_hyperapp_fn",
            "ref": "execute_graph"
        },
        {
            "id": "graph_to_sim_action",
            "ref": "execute_graph"
        },
        {
            "id": "update_nodes_in"
        },
        {
            "id": "onkey_fn",
            "ref": "hyperapp_action"
        },
        {
            "id": "eq",
            "script": "return a === b;"
        },
        {
            "id": "neq",
            "script": "return a !== b;"
        },
        {
            "id": "clear_popover_graph",
            "out": "out",
            "nodes": [
                {"id": "in"},
                {"id": "state", "ref": "arg", "value": "state"},
                {"id": "popover_path", "value": "popover_graph"},
                {"id": "false", "value": false},
                {"id": "clear_popover", "ref": "set"},
                {"id": "new_state"},
                {
                    "id": "popover_dispatch",
                    "ref": "arg",
                    "value": "state.popover_dispatch"
                },
                {
                    "id": "clear_popover_hyperapp_effect",
                    "script": "return [[(dispatch, payload) => { payload.dispatch(s => undefined); dispatch(s => ({...s, popover_dispatch: undefined}))}, {dispatch: popover_dispatch}]]"
                },
                {"id": "out", "ref": "hyperapp_action_effect"}
            ],
            "edges": [
                {"from": "in", "to": "new_state", "as": "args"},
                {"from": "state", "to": "clear_popover", "as": "target"},
                {"from": "state", "to": "clear_popover_hyperapp_effect", "as": "state"},
                {"from": "popover_path", "to": "clear_popover", "as": "path"},
                {"from": "false", "to": "clear_popover", "as": "value"},
                {"from": "clear_popover", "to": "new_state", "as": "state"},
                {"from": "popover_dispatch", "to": "clear_popover_hyperapp_effect", "as": "popover_dispatch"},
                {"from": "clear_popover_hyperapp_effect", "to": "new_state", "as": "effects"},
                {"from": "new_state", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "show_popover_graph",
            "out": "out",
            "nodes": [
                {"id":"in"},
                {"id": "state", "ref": "arg", "value": "state"},
                {
                    "id": "popover_graph_path",
                    "value": "popover_graph"
                },
                {
                    "id": "graph",
                    "ref": "arg",
                    "value": "state.graph"
                },
                {
                    "id": "selected",
                    "ref": "arg",
                    "value": "state.selected.0"
                },
                {
                    "id": "html_id",
                    "ref": "arg",
                    "value": "state.html_id"
                },
                {
                    "id": "dimensions",
                    "ref": "arg",
                    "value": "state.dimensions"
                },
                {
                    "id": "popover_dispatch",
                    "ref": "arg",
                    "value": "state.popover_dispatch"
                },
                {"id": "set_popover_graph", "ref": "set"},
                {"id": "popover_graph_value", "ref": "arg", "value": "payload.popover_graph" },
                {"id": "render_popover_graph_effector", "ref": "render_popover_graph_effect"},
                {"id": "render_popover_graph_effect_payload"},
                {"id": "render_popover_graph_effect", "ref": "new_array"},
                {"id": "effects", "ref": "new_array"},
                {"id": "new_state"},
                {"id": "out", "ref": "hyperapp_action_effect"}
            ],
            "edges": [
                {"from": "in", "to": "out", "as": "args"},
                {"from": "state", "to": "set_popover_graph", "as": "target"},
                {"from": "popover_graph_value", "to": "set_popover_graph", "as": "value"},
                {"from": "popover_graph_path", "to": "set_popover_graph", "as": "path"},
                {"from": "set_popover_graph", "to": "new_state", "as": "state"},
                {"from": "popover_graph_value", "to": "render_popover_graph_effect_payload", "as": "display_graph"},
                {"from": "graph", "to": "render_popover_graph_effect_payload", "as": "graph"},
                {"from": "html_id", "to": "render_popover_graph_effect_payload", "as": "html_id"},
                {"from": "dimensions", "to": "render_popover_graph_effect_payload", "as": "dimensions"},
                {"from": "popover_dispatch", "to": "render_popover_graph_effect_payload", "as": "popover_dispatch"},
                {"from": "render_popover_graph_effect_payload", "to": "render_popover_graph_effect", "as": "arg1"},
                {"from": "render_popover_graph_effector", "to": "render_popover_graph_effect", "as": "arg0"},
                {"from": "render_popover_graph_effect", "to": "effects", "as": "arg0"},
                {"from": "effects", "to": "new_state", "as": "effects"},
                {"from": "new_state", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "expand_contract_effect",
            "out": "out",
            "nodes": [
                {"id": "in"},
                {"id": "state", "ref": "arg", "value": "state"},
                {"id": "display_graph_path", "value": "display_graph"},
                {"id": "selected_path", "value": "selected"},
                {"id": "node_id", "ref": "arg", "value": "payload.id"},
                {"id": "display_graph", "ref": "arg", "value": "state.display_graph"},
                {"id": "expand_contract", "ref": "expand_contract"},
                {"id": "expand_contract_display_graph", "ref": "get"},
                {"id": "expand_contract_selected", "ref": "get"},
                {"id": "set_display_graph", "ref": "set"},
                {"id": "set_selected", "ref": "set"},
                {"id": "update_sim_effector", "ref": "arg", "value": "state.update_sim_effect"},
                {"id": "update_sim_effect", "ref": "new_array"},
                {"id": "effects", "ref": "new_array"},
                {"id": "return_value"},
                {"id": "out", "ref": "hyperapp_action_effect"}
            ],
            "edges": [
                {"from": "in", "to": "out", "as": "args"},
                {"from": "state", "to": "set_display_graph", "as": "target"},
                {"from": "node_id", "to": "expand_contract", "as": "node_id"},
                {"from": "display_graph", "to": "expand_contract", "as": "display_graph"},
                {"from": "expand_contract", "to": "expand_contract_display_graph", "as": "target"},
                {"from": "display_graph_path", "to": "expand_contract_display_graph", "as": "path"},
                {"from": "display_graph_path", "to": "set_display_graph", "as": "path"},
                {"from": "expand_contract_display_graph", "to": "set_display_graph", "as": "value"},
                {"from": "expand_contract", "to": "expand_contract_selected", "as": "target"},
                {"from": "selected_path", "to": "expand_contract_selected", "as": "path"},
                {"from": "expand_contract_selected", "to": "set_selected", "as": "value"},
                {"from": "selected_path", "to": "set_selected", "as": "path"},
                {"from": "set_display_graph", "to": "set_selected", "as": "target"},
                {"from": "update_sim_effector", "to": "update_sim_effect", "as": "a0"},
                {"from": "set_selected", "to": "update_sim_effect", "as": "a1"},
                {"from": "update_sim_effect", "to": "effects", "as": "a0"},
                {"from": "set_selected", "to": "return_value", "as": "state"},
                {"from": "effects", "to": "return_value", "as": "effects"},
                {"from": "return_value", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "delete_node",
            "out": "out",
            "nodes": [
                {"id": "in"},
                {
                    "id": "state",
                    "ref": "arg",
                    "value": "state"
                },
                {
                    "id": "nodes",
                    "ref": "arg",
                    "value": "state.display_graph.nodes"
                },
                {
                    "id": "edges",
                    "ref": "arg",
                    "value": "state.display_graph.edges"
                },
                {
                    "id": "update_sim_effect",
                    "ref": "arg",
                    "value": "state.update_sim_effect"
                },
                {
                    "id": "display_graph_out",
                    "ref": "arg",
                    "value": "state.display_graph.out"
                },
                {
                    "id": "edges_path",
                    "value": "display_graph.edges"
                },
                {
                    "id": "nodes_path",
                    "value": "display_graph.nodes"
                },
                {
                    "id": "selected_path",
                    "value": "selected"
                },
                {
                    "id": "node_id",
                    "ref": "arg",
                    "value": "payload.id"
                },
                {
                    "id": "edge",
                    "ref": "arg",
                    "value": "edge"
                },
                {
                    "id": "node",
                    "ref": "arg",
                    "value": "node"
                },
                {
                    "id": "new_nodes",
                    "script": "return nodes.filter(n => n.id !== node_id)"
                },
                {
                    "id": "new_edges",
                    "script": "const parent_edge = edges.find(e => e.from === node_id); return edges.filter(e => e !== parent_edge).map(e => e.to === node_id ? {...e, ...parent_edge, from: e.from} : e)"
                },
                {
                    "id": "new_selected",
                    "script": "return [edges.find(e => e.from === node_id)?.to ?? out]"
                },
                {
                    "id": "set_selected",
                    "ref": "set"
                },
                {
                    "id": "set_nodes",
                    "ref": "set"
                },
                {
                    "id": "set_edges",
                    "ref": "set"
                },
                {
                    "id": "new_state"
                },
                {
                    "id": "effects",
                    "script": "return [[update_sim_effect, new_state.state]]"
                },
                {"id": "out", "ref": "hyperapp_action_effect"}
            ],
            "edges": [
                {"from": "state", "to": "set_edges", "as": "target"},
                {"from": "node_id", "to": "new_nodes", "as": "node_id"},
                {"from": "nodes", "to": "new_nodes", "as": "nodes"},
                {"from": "new_nodes", "to": "set_nodes", "as": "value"},
                {"from": "nodes_path", "to": "set_nodes", "as": "path"},
                {"from": "set_nodes", "to": "set_selected", "as": "target"},
                {"from": "edges", "to": "new_edges", "as": "edges"},
                {"from": "node_id", "to": "new_edges", "as": "node_id"},
                {"from": "edge", "to": "new_edges", "as": "edge"},
                {"from": "new_edges", "to": "set_edges", "as": "value"},
                {"from": "edges_path", "to": "set_edges", "as": "path"},
                {"from": "in", "to": "out", "as": "args"},
                {"from": "set_edges", "to": "set_nodes", "as": "target"},
                {"from": "edges", "to": "new_selected", "as": "edges"},
                {"from": "node_id", "to": "new_selected", "as": "node_id"},
                {"from": "display_graph_out", "to": "new_selected", "as": "out"},
                {"from": "new_selected", "to": "set_selected", "as": "value"},
                {"from": "selected_path", "to": "set_selected", "as": "path"},
                {"from": "set_selected", "to": "new_state", "as": "state"},
                {"from": "new_state", "to": "effects", "as": "new_state"},
                {
                    "from": "update_sim_effect",
                    "to": "effects",
                    "as": "update_sim_effect"
                },
                {
                    "from": "effects",
                    "to": "new_state",
                    "as": "effects"
                },
                {"from": "new_state", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "add_edge",
            "out": "out",
            "nodes": [
                {
                    "id": "in"
                },
                {
                    "id": "add_edge_fn",
                    "out": "out",
                    "nodes":[
                        {
                            "id": "in"
                        },
                        {
                            "id": "payload_edge",
                            "ref": "arg",
                            "value": "payload"
                        },
                        {
                            "id": "state",
                            "ref": "arg",
                            "value": "state"
                        },
                        {"id": "nodes", "ref": "arg", "value": "state.display_graph.nodes"},
                        {
                            "id": "new_edge",
                            "script": "return {...payload_edge, as: next_arg ?? `arg${sibling_count}`}"
                        },
                        {"id": "child_node", "script": "return nodes.find(n => n.id === edge.to)"},
                        {
                            "id": "update_sim_effect",
                            "ref": "arg",
                            "value": "state.update_sim_effect"
                        },
                        {
                            "id": "effects",
                            "script": "return [[update_sim_effect, new_state]]"
                        },
                        {
                            "id": "edges",
                            "ref": "arg",
                            "value": "state.display_graph.edges"
                        },
                        {"id": "siblings", "script": "return edges.filter(e => e.to === new_edge.to)"},
                        {"id": "node_args", "ref": "node_args"},
                        {"id": "next_arg", "script": "return args?.filter(a => !(a === '_node_inputs' || a === '_lib' || a === '_node') && !siblings.find(e => e.as === a) && !a.includes('.'))[0]"},
                        {
                            "id": "calculate_sibling_count",
                            "script": "return siblings.length"
                        },
                        {
                            "id": "edges_path",
                            "value": "display_graph.edges"
                        },
                        {
                            "id": "new_edges",
                            "ref": "append"
                        },
                        {
                            "id": "set_new_edges",
                            "ref": "set"
                        },
                        {
                            "id": "out"
                        }
                    ],
                    "edges": [
                        {
                            "from": "in",
                            "to": "out",
                            "as": "args"
                        },
                        {
                            "from": "edges",
                            "to": "new_edges",
                            "as": "array"
                        },
                        {
                            "from": "edges",
                            "to": "siblings",
                            "as": "edges"
                        },
                        {
                            "from": "payload_edge",
                            "to": "siblings",
                            "as": "new_edge"
                        },
                        {
                            "from": "payload_edge",
                            "to": "new_edge",
                            "as": "payload_edge"
                        },
                        {"from": "siblings", "to": "calculate_sibling_count", "as": "siblings"},
                        {"from": "nodes", "to": "child_node", "as": "nodes"},
                        {"from": "payload_edge", "to": "child_node", "as": "edge"},
                        {"from": "nodes", "to": "node_args", "as": "nodes"},
                        {"from": "child_node", "to": "node_args", "as": "node"},
                        {"from": "siblings", "to": "next_arg", "as": "siblings"},
                        {"from": "node_args", "to": "next_arg", "as": "args"},
                        {"from": "next_arg", "to": "new_edge", "as": "next_arg"},
                        {
                            "from": "calculate_sibling_count",
                            "to": "new_edge",
                            "as": "sibling_count"
                        },
                        {
                            "from": "new_edge",
                            "to": "new_edges",
                            "as": "item"
                        },
                        {
                            "from": "state",
                            "to": "set_new_edges",
                            "as": "target"
                        },
                        {
                            "from" :"edges_path",
                            "to": "set_new_edges",
                            "as": "path"
                        },
                        {
                            "from": "new_edges",
                            "to": "set_new_edges",
                            "as": "value"
                        },
                        {
                            "from": "update_sim_effect",
                            "to": "effects",
                            "as": "update_sim_effect"
                        },
                        {
                            "from": "set_new_edges",
                            "to": "effects",
                            "as": "new_state"
                        },
                        {
                            "from": "set_new_edges",
                            "to": "out",
                            "as": "state"
                        },
                        {
                            "from": "effects",
                            "to": "out",
                            "as": "effects"
                        }
                    ]
                },
                {
                    "id": "out",
                    "ref": "hyperapp_action_effect"
                }
            ],
            "edges": [
                {
                    "from": "in",
                    "to": "out"
                },
                {
                    "from": "add_edge_fn",
                    "to": "out",
                    "as": "fn",
                    "type": "ref"
                }
            ]
        },
        {
            "id": "save_effect",
            "script": "return (dispatch, payload) => { const graph_list = JSON.parse(localStorage.getItem('graph_list'))?.filter(l => l !== payload.display_graph.id) ?? []; graph_list.unshift(payload.display_graph.id); localStorage.setItem('graph_list', JSON.stringify(graph_list)); const graphstr = JSON.stringify({...payload.display_graph, node_map: undefined, in_edge_map: undefined}); localStorage.setItem(payload.display_graph.id, graphstr);}"
        },
        {
            "id": "export_effect",
            "script": "return (dispatch, payload) => { const str = `data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(payload.display_graph))}`; const a = document.createElement('a'); a.setAttribute('href', str); a.setAttribute('download', payload.display_graph.id + '.json'); a.click(); a.remove();}"
        },
        {
            "id": "graph_list_effect",
            "script": "return (dispatch, payload)"
        },
        {
            "id": "new_graph_effect",
            "script": "return (dispatch, payload) => { localStorage.removeItem('display_graph'); window.location.reload(); }"
        },
        {
            "id": "focus_effect",
            "script": "return (dispatch, payload) => requestAnimationFrame(() => document.querySelector(payload.selector)?.focus())"
        },
        {
            "id": "blur_effect",
            "script": "return (dispatch, payload) => requestAnimationFrame(() => document.querySelector(payload.selector)?.blur())"
        },
        {
            "id": "open_graph_effect",
            "nodes": [
                {"id": "in"},
                {"id": "new_graph", "ref": "arg", "value": "payload.graph"},
                {"id": "state", "ref": "arg", "value": "state"},
                {"id": "update_sim_effector", "ref": "arg", "value": "state.update_sim_effect"},
                {"id": "display_graph_path", "value": "display_graph"},
                {"id": "set_display_graph", "ref": "set"},
                {"id": "update_sim_effect", "ref": "new_array"},
                {"id": "effects", "ref": "new_array"},
                {"id": "result"},
                {"id": "out", "ref": "hyperapp_action_effect"}
            ],
            "edges": [
                {"from": "in", "to": "out", "as": "args", "type": "ref"},
                {"from": "state", "to": "set_display_graph", "as": "target"},
                {"from": "display_graph_path", "to": "set_display_graph", "as": "path"},
                {"from": "new_graph", "to": "set_display_graph", "as": "value"},
                {"from": "set_display_graph", "to": "result", "as": "state"},
                {"from": "update_sim_effector", "to": "update_sim_effect", "as": "a0"},
                {"from": "update_sim_effect", "to": "effects", "as": "a0"},
                {"from": "effects", "to": "result", "as": "effects"},
                {"from": "result", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "open_saved_graph_effect",
            "nodes": [
                {"id": "in"},
                {"id": "new_graph_id", "ref": "arg", "value": "payload.id"},
                {"id": "new_graph", "script": "return JSON.parse(localStorage.getItem(id))"},
                {"id": "state", "ref": "arg", "value": "state"},
                {"id": "open_graph_effector", "ref": "open_graph_effect"},
                {"id": "open_graph_payload"},
                {"id": "open_graph_effect", "ref": "new_array"},
                {"id": "effects", "ref": "new_array"},
                {"id": "result"},
                {"id": "out", "ref": "hyperapp_action_effect"}
            ],
            "edges": [
                {"from": "in", "to": "out", "as": "args", "type": "ref"},
                {"from": "new_graph_id", "to": "new_graph", "as": "id"},
                {"from": "new_graph", "to": "open_graph_payload", "as": "graph"},
                {"from": "open_graph_effector", "to": "open_graph_effect", "as": "a0"},
                {"from": "open_graph_payload", "to": "open_graph_effect", "as": "a1"},
                {"from": "open_graph_effect", "to": "effects", "as": "a0"},
                {"from": "state", "to": "result", "as": "state"},
                {"from": "effects", "to": "result", "as": "effects"},
                {"from": "result", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "update_node_action",
            "out": "out",
            "nodes": [
                {"id": "in"},
                {"id": "state", "ref": "arg", "value": "state"},
                {"id": "nodes", "ref": "arg", "value": "state.display_graph.nodes"},
                {"id": "edges", "ref": "arg", "value": "state.display_graph.edges"},
                {"id": "update_hyperapp", "ref": "arg", "value": "state.update_hyperapp"},
                {"id": "update_hyperapp_effect", "ref": "new_array"},
                {"id": "display_graph_nodes_path", "value": "display_graph.nodes"},
                {"id": "display_graph_edges_path", "value": "display_graph.edges"},
                {"id": "node_id", "ref": "arg", "value": "payload.id"},
                {"id": "node_properties", "ref": "arg", "value": "payload.properties"},
                {"id": "prev_node", "script": "return nodes.find(n => n.id === node_id)"},
                {"id": "replace_node", "script": "return nodes.map(n => n.id === node_id ? Object.assign({}, n, update) : n)"},
                {"id": "arg_value", "script": "const node = nodes.find(n => n.id === node_id); return node.ref === 'arg' ? node.value.substring(node.value.lastIndexOf('.') + 1) : undefined"},
                {"id": "replace_edges", "script": "return arg_value ? edges.map(e => e.from === node_id && (e.as.startsWith('arg') || e.as === prev_node.value)? {...e, as: arg_value} : e) : edges"},
                {"id": "display_graph_nodes_path", "value": "display_graph.nodes"},
                {"id": "set_display_graph_nodes", "ref": "set"},
                {"id": "set_display_graph_edges", "ref": "set"},
                {"id": "effects", "ref": "new_array"},
                {"id": "result"},
                {"id": "out", "ref": "hyperapp_action"}
            ],
            "edges": [
                {"from": "in", "to": "out", "as": "args"},
                {"from": "nodes", "to": "replace_node", "as": "nodes"},
                {"from": "nodes", "to": "prev_node", "as": "nodes"},
                {"from": "edges", "to": "replace_edges", "as": "edges"},
                {"from": "node_id", "to": "replace_node", "as": "node_id"},
                {"from": "node_id", "to": "prev_node", "as": "node_id"},
                {"from": "node_properties", "to": "replace_node", "as": "update"},
                {"from": "state", "to": "set_display_graph_nodes", "as": "target"},
                {"from": "display_graph_nodes_path", "to": "set_display_graph_nodes", "as": "path"},
                {"from": "replace_node", "to": "set_display_graph_nodes", "as": "value"},
                {"from": "set_display_graph_nodes", "to": "set_display_graph_edges", "as": "target"},
                {"from": "replace_node", "to": "arg_value", "as": "nodes"},
                {"from": "node_id", "to": "arg_value", "as": "node_id"},
                {"from": "arg_value", "to": "replace_edges", "as": "arg_value"},
                {"from": "node_id", "to": "replace_edges", "as": "node_id"},
                {"from": "prev_node", "to": "replace_edges", "as": "prev_node"},
                {"from": "replace_edges", "to": "set_display_graph_edges", "as": "value"},
                {"from": "display_graph_edges_path", "to": "set_display_graph_edges", "as": "path"},
                {"from": "set_display_graph_edges", "to": "result", "as": "state"},
                {"from": "update_hyperapp", "to": "update_hyperapp_effect", "as": "a0"},
                {"from": "update_hyperapp_effect", "to": "effects", "as": "a0"},
                {"from": "effects", "to": "result", "as": "effects"},
                {"from": "result", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "update_node",
            "out": "out",
            "nodes": [
                {"id": "in"},
                {"id": "update_node_action", "ref": "update_node_action"},
                {"id": "out", "ref": "hyperapp_action_effect"}
            ],
            "edges": [
                {"from": "in", "to": "out", "as": "args"},
                {"from": "update_node_action", "to": "out", "as": "fn"}
            ]
        },
        {
            "id": "update_edge_action",
            "out": "out",
            "nodes": [
                {"id": "in"},
                {"id": "state", "ref": "arg", "value": "state"},
                {"id": "edges", "ref": "arg", "value": "state.display_graph.edges"},
                {"id": "display_graph_edges_path", "value": "display_graph.edges"},
                {"id": "edge", "ref": "arg", "value": "payload.id"},
                {"id": "properties", "ref": "arg", "value": "payload.properties"},
                {"id": "replace_edge", "script": "return edges.map(e => e.from === edge.from && e.to === edge.to ? Object.assign({}, e, Object.fromEntries(Object.entries(update).map(e => [e[0], e[1] === '' ? undefined : e[1]]))) : e)"},
                {"id": "display_graph_edges_path", "value": "display_graph.edges"},
                {"id": "set_display_graph_edges", "ref": "set"},
                {"id": "update_hyperapp", "ref": "arg", "value": "state.update_hyperapp"},
                {"id": "update_hyperapp_effect", "ref": "new_array"},
                {"id": "effects", "ref": "new_array"},
                {"id": "result"},
                {"id": "out", "ref": "hyperapp_action"}
            ],
            "edges": [
                {"from": "in", "to": "out", "as": "args"},
                {"from": "edges", "to": "replace_edge", "as": "edges"},
                {"from": "edge", "to": "replace_edge", "as": "edge"},
                {"from": "properties", "to": "replace_edge", "as": "update"},
                {"from": "state", "to": "set_display_graph_edges", "as": "target"},
                {"from": "display_graph_edges_path", "to": "set_display_graph_edges", "as": "path"},
                {"from": "replace_edge", "to": "set_display_graph_edges", "as": "value"},
                {"from": "set_display_graph_edges", "to": "result", "as": "state"},
                {"from": "update_hyperapp", "to": "update_hyperapp_effect", "as": "a0"},
                {"from": "update_hyperapp_effect", "to": "effects", "as": "a0"},
                {"from": "effects", "to": "result", "as": "effects"},
                {"from": "result", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "update_edge",
            "out": "out",
            "nodes": [
                {"id": "in"},
                {"id": "update_edge_action", "ref": "update_edge_action"},
                {"id": "out", "ref": "hyperapp_action_effect"}
            ],
            "edges": [
                {"from": "in", "to": "out", "as": "args"},
                {"from": "update_edge_action", "to": "out", "as": "fn"}
            ]
        },
        {
            "id": "copy_effect",
            "out": "out",
            "nodes": [
                {"id": "in"},
                {"id": "state", "ref": "arg", "value": "state"},
                {"id": "clipboard_path", "value": "clipboard"},
                {"id": "node", "ref": "arg", "value": "payload.id"},
                {"id": "set_clipboard", "ref": "set"},
                {"id": "effects", "ref": "new_array"},
                {"id": "result"},
                {"id": "out", "ref": "hyperapp_action_effect"}
            ],
            "edges": [
                {"from": "in", "to": "out", "as": "args"},
                {"from": "state", "to": "set_clipboard", "as": "target"},
                {"from": "clipboard_path", "to": "set_clipboard", "as": "path"},
                {"from": "node", "to": "set_clipboard", "as": "value"},
                {"from": "set_clipboard", "to": "result", "as": "state"},
                {"from": "result", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "change_display_graph_id",
            "out": "out",
            "nodes": [
                {"id": "in"},
                {"id": "state", "ref": "arg", "value": "state"},
                {"id": "id_path", "value": "display_graph.id"},
                {"id": "id", "ref": "arg", "value": "payload.properties.id"},
                {"id": "set_display_graph_id", "ref": "set"},
                {"id": "effects", "ref": "new_array"},
                {"id": "result"},
                {"id": "out", "ref": "hyperapp_action"}
            ],
            "edges": [
                {"from": "in", "to": "out", "as": "args"},
                {"from": "state", "to": "set_display_graph_id", "as": "target"},
                {"from": "id_path", "to": "set_display_graph_id", "as": "path"},
                {"from": "id", "to": "set_display_graph_id", "as": "value"},
                {"from": "set_display_graph_id", "to": "result", "as": "state"},
                {"from": "result", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "paste_node_effect",
            "out": "out",
            "nodes": [
                {"id": "in"},
                {"id": "state", "ref": "arg", "value": "state"},
                {"id": "nodes", "ref": "arg", "value": "state.display_graph.nodes"},
                {"id": "edges", "ref": "arg", "value": "state.display_graph.edges"},
                {"id": "randid", "ref": "arg", "value": "payload.randid"},
                {"id": "selected", "ref": "arg", "value": "state.selected.0"},
                {"id": "id_path", "value": "id"},
                {"id": "node_id", "ref": "arg", "value": "state.clipboard"},
                {"id": "node", "script": "return nodes.find(n => n.id === node_id)"},
                {"id": "clipboard_path", "value": "clipboard"},
                {"id": "delete_clipboard", "ref": "delete"},
                {"id": "add_node_effector", "ref": "add_node"},
                {"id": "new_node", "ref": "set"},
                {"id": "select", "value": "true"},
                {"id": "add_node_payload"},
                {"id": "add_node_effect", "ref": "new_array"},
                {"id": "add_edge_effector", "ref": "add_edge"},
                {"id": "add_edge_payload"},
                {"id": "add_edge_effect", "ref": "new_array"},
                {"id": "update_hyperapp", "ref": "arg", "value": "state.update_hyperapp"},
                {"id": "update_hyperapp_effect", "ref": "new_array"},
                {"id": "effects", "ref": "new_array"},
                {"id": "result"},
                {"id": "out", "ref": "hyperapp_action_effect"}
            ],
            "edges": [
                {"from": "in", "to": "out", "as": "args"},
                {"from": "state", "to": "delete_clipboard", "as": "target"},
                {"from": "node_id", "to": "node", "as": "node_id"},
                {"from": "nodes", "to": "node", "as": "nodes"},
                {"from": "id_path", "to": "new_node", "as": "path"},
                {"from": "randid", "to": "new_node", "as": "value"},
                {"from": "node", "to": "new_node", "as": "target"},
                {"from": "new_node", "to": "add_node_payload", "as": "node"},
                {"from": "select", "to": "add_node_payload", "as": "select"},
                {"from": "clipboard_path", "to": "delete_clipboard", "as": "path"},
                {"from": "delete_clipboard", "to": "result", "as": "state"},
                {"from": "add_node_effector", "to": "add_node_effect", "as": "a0"},
                {"from": "add_node_payload", "to": "add_node_effect", "as": "a1"},
                {"from": "add_node_effect", "to": "effects", "as": "a0"},
                {"from": "randid", "to": "add_edge_payload", "as": "from"},
                {"from": "selected", "to": "add_edge_payload", "as": "to"},
                {"from": "add_edge_effector", "to": "add_edge_effect", "as": "a0"},
                {"from": "add_edge_payload", "to": "add_edge_effect", "as": "a1"},
                {"from": "add_edge_effect", "to": "effects", "as": "a1"},
                {"from": "update_hyperapp", "to": "update_hyperapp_effect", "as": "a0"},
                {"from": "update_hyperapp_effect", "to": "effects", "as": "a2"},
                {"from": "effects", "to": "result", "as": "effects"},
                {"from": "result", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "show_edit_text",
            "nodes": [
                {"id": "in"},
                {"id": "state", "ref": "arg", "value": "state"},
                {"id": "display_graph", "ref": "arg", "value": "state.display_graph"},
                {"id": "dimensions", "ref": "arg", "value": "state.dimensions"},
                {"id": "html_id", "ref": "arg", "value": "state.html_id"},
                {"id": "oneditconfirm", "ref": "arg", "value": "payload.oneditconfirm"},
                {"id": "oneditmore", "ref": "arg", "value": "payload.oneditmore"},
                {"id": "id", "ref": "arg", "value": "payload.id"},
                {"id": "current_value", "ref": "arg", "value": "payload.value"},
                {"id": "property", "ref": "arg", "value": "payload.property"},
                {"id": "arg_position", "ref": "arg", "value": "payload.position"},
                {"id": "more_action", "ref": "arg", "value": "payload.more_action"},
                {"id": "editing_path", "value": "editing"},
                {"id": "edit_value_path", "value": "edit_value"},
                {"id": "edit_id_path", "value": "edit_id"},
                {"id": "edit_onconfirm_path", "value": "oneditconfirm"},
                {"id": "edit_onmore_path", "value": "oneditmore"},
                {"id": "edit_position_path", "value": "edit_position"},
                {"id": "default_position", "script": "return {x: dimensions.x * 0.5, y: dimensions.y * 0.5}"},
                {"id": "position", "ref": "default"},
                {"id": "set_editing", "ref": "set"},
                {"id": "set_edit_value", "ref": "set"},
                {"id": "set_edit_onconfirm", "ref": "set"},
                {"id": "set_edit_onmore", "ref": "set"},
                {"id": "set_edit_id", "ref": "set"},
                {"id": "set_edit_position", "ref": "set"},
                {"id": "focus_props", "script": "return {'selector': `#${html_id}-edit-value .${editing}`, focus: true}"},
                {"id": "focus_effector", "ref": "focus_effect"},
                {"id": "focus_effect", "ref": "new_array"},
                {"id": "effects", "ref": "new_array"},
                {"id": "result"},
                {"id": "out", "ref": "hyperapp_action_effect"}
            ],
            "edges": [
                {"from": "in", "to": "out", "as": "args"},
                {"from": "editing_path", "to": "set_editing", "as": "path"},
                {"from": "property", "to": "set_editing", "as": "value"},
                {"from": "state", "to": "set_editing", "as": "target"},
                {"from": "display_graph", "to": "selected_node", "as": "display_graph"},
                {"from": "property", "to": "current_node_value", "as": "path"},
                {"from": "selected_node", "to": "current_node_value", "as": "target"},
                {"from": "set_editing", "to": "set_edit_value", "as": "target"},
                {"from": "edit_value_path", "to": "set_edit_value", "as": "path"},
                {"from": "current_value", "to": "set_edit_value", "as": "value"},
                {"from": "set_edit_value", "to": "set_edit_onconfirm", "as": "target"},
                {"from": "edit_onconfirm_path", "to": "set_edit_onconfirm", "as": "path"},
                {"from": "oneditconfirm", "to": "set_edit_onconfirm", "as": "value"},
                {"from": "set_edit_onconfirm", "to": "set_edit_onmore", "as": "target"},
                {"from": "edit_onmore_path", "to": "set_edit_onmore", "as": "path"},
                {"from": "oneditmore", "to": "set_edit_onmore", "as": "value"},
                {"from": "set_edit_onmore", "to": "set_edit_id", "as": "target"},
                {"from": "edit_id_path", "to": "set_edit_id", "as": "path"},
                {"from": "id", "to": "set_edit_id", "as": "value"},
                {"from": "arg_position", "to": "position", "as": "value"},
                {"from": "dimensions", "to": "default_position", "as": "dimensions"},
                {"from": "default_position", "to": "position", "as": "otherwise"},
                {"from": "position", "to": "set_edit_position", "as": "value"},
                {"from": "edit_position_path", "to": "set_edit_position", "as": "path"},
                {"from": "set_edit_id", "to": "set_edit_position", "as": "target"},
                {"from": "focus_effector", "to": "focus_effect", "as": "a0"},
                {"from": "html_id", "to": "focus_props", "as": "html_id"},
                {"from": "property", "to": "focus_props", "as": "editing"},
                {"from": "focus_props", "to": "focus_effect", "as": "a1"},
                {"from": "focus_effect", "to": "effects", "as": "a0"},
                {"from": "set_edit_position", "to": "result", "as": "state"},
                {"from": "effects", "to": "result", "as": "effects"},
                {"from": "result", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "node_args",
            "out": "out",
            "nodes": [
                {"id": "node", "ref": "arg", "value": "node"},
                {"id": "nodes", "ref": "arg", "value": "nodes"},
                {"id": "ref_path", "value": "ref"},
                {"id": "ref", "ref": "get"},
                {"id": "ref_node", "script": "return nodes.find(n => n.id === selected)"},
                {"id": "source_node", "ref": "if"},
                {"id": "nodes_path", "value": "nodes"},
                {"id": "node_nodes", "ref": "get"},
                {"id": "node_arg_nodes", "script": "return nodes?.filter(n => n.ref ==='arg')"},
                {"id": "should_show", "ref": "get"},
                {"id": "nested_node_args", "script": "return nodes.map(n => n.value)"},
                {"id": "extern_node_args", "script": "return _lib.just.get.fn(_lib, node.extern).args"},
                {"id": "node_args_input", "script": "return node.id === 'arg' ? undefined : node.extern ? 'extern' : node.nodes ?  'nested' : 'none'"},
                {"id": "node_args", "ref": "switch"},
                {"id": "empty", "value": []},
                {"id": "out", "ref": "default"}
            ],
            "edges": [
                {"from": "ref_path", "to": "ref", "as": "path"},
                {"from": "ref", "to": "source_node", "as": "pred"},
                {"from": "ref_node", "to": "source_node", "as": "true"},
                {"from": "node", "to": "source_node", "as": "false"},
                {"from": "node", "to": "ref", "as": "target"},
                {"from": "node", "to": "ref_node", "as": "node"},
                {"from": "nodes", "to": "ref_node", "as": "nodes"},
                {"from": "ref", "to": "ref_node", "as": "selected"},
                {"from": "source_node", "to": "node_nodes", "as": "target"},
                {"from": "nodes_path", "to": "node_nodes", "as": "path"},
                {"from": "node_nodes", "to": "node_arg_nodes", "as": "nodes"},
                {"from": "node_arg_nodes", "to": "nested_node_args", "as": "nodes"},
                {"from": "nested_node_args", "to": "node_args", "as": "nested"},
                {"from": "source_node", "to": "extern_node_args", "as": "node"},
                {"from": "extern_node_args", "to": "node_args", "as": "extern"},
                {"from": "source_node", "to": "node_args_input", "as": "node"},
                {"from": "node_args_input", "to": "node_args", "as": "input"},
                {"from": "empty", "to": "out", "as": "otherwise"},
                {"from": "node_args", "to": "out", "as": "value"}
            ]
        },
        {
            "id": "show_args_effect",
            "nodes": [
                {"id": "in"},
                {"id": "display_graph_nodes", "ref": "arg", "value": "state.display_graph.nodes"},
                {"id": "nodes", "ref": "arg", "value": "state.nodes"},
                {"id": "selected", "ref": "arg", "value": "state.selected.0"},
                {"id": "state", "ref": "arg", "value": "state"},
                {"id": "svg_offset", "ref": "arg", "value": "state.svg_offset"},
                {"id": "length_path", "value": "length"},
                {"id": "node_args_arr", "ref": "node_args"},
                {"id": "node_args", "script": "return 'inputs: ' + node_args.join(', ')"},
                {"id": "node_args_count", "ref": "get"},
                {"id": "args_display_path", "value": "args_display"},
                {"id": "selected_node", "script": "return nodes.find(n => n.id === selected)"},
                {"id": "selected_el_node", "script": "return nodes.find(n => n.node_id === selected)"},
                {"id": "x_path", "value": "x"},
                {"id": "x", "ref": "get"},
                {"id": "y_path", "value": "y"},
                {"id": "y", "ref": "get"},
                {"id": "args_h_text", "ref": "html_text"},
                {"id": "args_h_dom_type", "value": "div"},
                {"id": "args_h_props", "script": "return {class: {args: true}, style: {left: `${x * (svg_offset?.scale ?? 1) + (svg_offset?.x ?? 0) - 64}px`, top: `${y * (svg_offset?.scale ?? 1) + (svg_offset?.y ?? 0) + 32}px`}}"},
                {"id": "args_h", "ref": "html_element"},
                {"id": "args_out", "ref": "if"},
                {"id": "set_args_display", "ref": "set"},
                {"id": "result"},
                {"id": "out", "ref": "hyperapp_action_effect_debounced"}
            ],
            "edges": [
                {"from": "in", "to": "out", "as": "args", "type": "ref"},
                {"from": "display_graph_nodes", "to": "selected_node", "as": "nodes"},
                {"from": "selected", "to": "selected_node", "as": "selected"},
                {"from": "display_graph_nodes", "to": "node_args_arr", "as": "nodes"},
                {"from": "selected_node", "to": "node_args_arr", "as": "node"},
                {"from": "node_args", "to": "args_h_text", "as": "text"},
                {"from": "node_args_arr", "to": "node_args_count", "as": "target"},
                {"from": "length_path", "to": "node_args_count", "as": "path"},
                {"from": "node_args_arr", "to": "node_args", "as": "node_args"},
                {"from": "args_h_text", "to": "args_h", "as": "children"},
                {"from": "args_h_dom_type", "to": "args_h", "as": "dom_type"},
                {"from": "nodes", "to": "selected_el_node", "as": "nodes"},
                {"from": "selected", "to": "selected_el_node", "as": "selected"},
                {"from": "selected_el_node", "to": "x", "as": "target"},
                {"from": "x_path", "to": "x", "as": "path"},
                {"from": "selected_el_node", "to": "y", "as": "target"},
                {"from": "y_path", "to": "y", "as": "path"},
                {"from": "x", "to": "args_h_props", "as": "x"},
                {"from": "y", "to": "args_h_props", "as": "y"},
                {"from": "svg_offset", "to": "args_h_props", "as": "svg_offset"},
                {"from": "args_h_props", "to": "args_h", "as": "props"},
                {"from": "node_args_count", "to": "args_out", "as": "pred"},
                {"from": "args_h", "to": "args_out", "as": "true"},
                {"from": "state", "to": "set_args_display", "as": "target"},
                {"from": "args_display_path", "to": "set_args_display", "as": "path"},
                {"from": "args_out", "to": "set_args_display", "as": "value"},
                {"from": "set_args_display", "to": "result", "as": "state"},
                {"from": "result", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "confirm_edit_text",
            "nodes": [
                {"id": "in"},
                {"id": "state", "ref": "arg", "value": "state"},
                {"id": "property", "ref": "arg", "value": "state.editing"},
                {"id": "payload_value_raw", "ref": "arg", "value": "state.edit_value"},
                {"id": "payload_value", "script": "return value === '' ? undefined : value"},
                {"id": "id", "ref": "arg", "value": "state.edit_id"},
                {"id": "edit_id_path", "ref": "arg", "value": "edit_id"},
                {"id": "on_change", "ref": "arg", "value": "state.oneditconfirm"},
                {"id": "html_id", "ref": "arg", "value": "state.html_id"},
                {"id": "false", "value": false},
                {"id": "empty_string", "value": ""},
                {"id": "editing_path", "value": "editing"},
                {"id": "edit_value_path", "value": "edit_value"},
                {"id": "set_editing", "ref": "set"},
                {"id": "set_edit_value", "ref": "set"},
                {"id": "set_edit_id", "ref": "delete"},
                {"id": "change_effector", "ref": "hyperapp_action_effect"},
                {"id": "change_effect_payload"},
                {"id": "change_effect", "ref": "new_array"},
                {"id": "blur_payload", "script": "return {selector: `#${html_id}-edit-value textarea`}"},
                {"id": "blur_effector", "ref": "blur_effect"},
                {"id": "blur_effect", "ref": "new_array"},
                {"id": "empty", "value": {}},
                {"id": "new_node_props", "ref": "set"},
                {"id": "effects", "ref": "new_array"},
                {"id": "result"},
                {"id": "noop"},
                {"id": "out_result", "ref": "if"},
                {"id": "out", "ref": "hyperapp_action_effect"}
            ],
            "edges": [
                {"from": "in", "to": "out", "as": "args"},
                {"from": "editing_path", "to": "set_editing", "as": "path"},
                {"from": "false", "to": "set_editing", "as": "value"},
                {"from": "state", "to": "set_editing", "as": "target"},
                {"from": "empty_string", "to": "set_edit_value", "as": "value"},
                {"from": "set_editing", "to": "set_edit_value", "as": "target"},
                {"from": "edit_value_path", "to": "set_edit_value", "as": "path"},
                {"from": "empty", "to": "new_node_props", "as": "target"},
                {"from": "property", "to": "new_node_props", "as": "path"},
                {"from": "payload_value_raw", "to": "payload_value", "as": "value"},
                {"from": "payload_value", "to": "new_node_props", "as": "value"},
                {"from": "set_edit_value", "to": "set_edit_id", "as": "target"},
                {"from": "edit_id_path", "to": "set_edit_id", "as": "path"},
                {"from": "set_edit_id", "to": "result", "as": "state"},
                {"from": "new_node_props", "to": "change_effect_payload", "as": "properties"},
                {"from": "id", "to": "change_effect_payload", "as": "id"},
                {"from": "on_change", "to": "change_effector", "as": "fn"},
                {"from": "change_effector", "to": "change_effect", "as": "a0"},
                {"from": "change_effect_payload", "to": "change_effect", "as": "a1"},
                {"from": "change_effect", "to": "effects", "as": "a0"},
                {"from": "html_id", "to": "blur_payload", "as": "html_id"},
                {"from": "blur_payload", "to": "blur_effect", "as": "a1"},
                {"from": "blur_effector", "to": "blur_effect", "as": "a0"},
                {"from": "blur_effect", "to": "effects", "as": "a1"},
                {"from": "effects", "to": "result", "as": "effects"},
                {"from": "state", "to": "noop", "as": "state"},
                {"from": "noop", "to": "out_result", "as": "false"},
                {"from": "result", "to": "out_result", "as": "true"},
                {"from": "property", "to": "out_result", "as": "pred"},
                {"from": "result", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "open_reference_popover",
            "out": "out",
            "nodes": [
                {"id": "in"},
                {"id": "state", "ref": "arg", "value": "state"},
                {"id": "nodes", "ref": "arg", "value": "state.display_graph.nodes"},
                {"id": "edges", "ref": "arg", "value": "state.display_graph.edges"},
                {"id": "levels", "ref": "arg", "value": "state.levels"},
                {"id": "node_id", "ref": "arg", "value": "payload.id"},
                {"id": "set_popover_graph_path", "value": "popover_graph"},
                {"id": "update_node", "ref": "update_node"},
                {"id": "clear_popover", "ref": "clear_popover_graph"},
                {"id": "valid_nodes", "script": "return nodes.filter(n => !n.ref && !levels.level_by_node.has(n.id))"},
                {"id": "popover_graph_nodes", "script": "return nodes.map(n => ({id: `reference-popover${n.id}`, name: n.name ?? n.id, value: n.hasOwnProperty('script') || n.hasOwnProperty('nodes') || n.hasOwnProperty('extern') ? [[update_node, {id: node_id, properties: {ref: n.id}}], [clear_popover]] : []})).concat([{id: 'out', name: 'reference nodes', value: [[clear_popover]]}])"},
                {"id": "popover_graph_edges", "script": "return edges.filter(e => !!nodes.find(n => e.to === n.id)).map(e => ({from: `reference-popover${e.from}`, to:  `reference-popover${e.to}`})).concat(nodes.filter(n => edges.filter(e => e.from === n.id).length === 0).map(n => ({from: `reference-popover${n.id}`, to: 'out'})))"},
                {"id": "popover_graph_out", "value": "out"},
                {"id": "popover_graph_value"},
                {"id": "show_popover_graph_payload"},
                {"id": "show_popover_graph", "ref": "show_popover_graph"},
                {"id": "show_popover_graph_effect", "ref": "new_array"},
                {"id": "set_popover_graph", "ref": "set"},
                {"id": "effects", "ref": "new_array"},
                {"id": "result"},
                {"id": "out", "ref": "hyperapp_action_effect"}
            ],
            "edges": [
                {"from": "in", "to": "out", "as": "args"},
                {"from": "nodes", "to": "valid_nodes", "as": "nodes"},
                {"from": "edges", "to": "popover_graph_edges", "as": "edges"},
                {"from": "levels", "to": "valid_nodes", "as": "levels"},
                {"from": "levels", "to": "popover_graph_edges", "as": "levels"},
                {"from": "node_id", "to": "popover_graph_nodes", "as": "node_id"},
                {"from": "clear_popover", "to": "popover_graph_nodes", "as": "clear_popover"},
                {"from": "update_node", "to": "popover_graph_nodes", "as": "update_node"},
                {"from": "valid_nodes", "to": "popover_graph_nodes", "as": "nodes"},
                {"from": "popover_graph_nodes", "to": "popover_graph_value", "as": "nodes"},
                {"from": "valid_nodes", "to": "popover_graph_edges", "as": "nodes"},
                {"from": "popover_graph_edges", "to": "popover_graph_value", "as": "edges"},
                {"from": "popover_graph_out", "to": "popover_graph_value", "as": "out"},
                {"from": "popover_graph_value", "to": "set_popover_graph", "as": "value"},
                {"from": "set_popover_graph_path", "to": "set_popover_graph", "as": "path"},
                {"from": "state", "to": "set_popover_graph", "as": "target"},
                {"from": "show_popover_graph", "to": "show_popover_graph_effect", "as": "a0"},
                {"from": "popover_graph_value", "to": "show_popover_graph_payload", "as": "popover_graph"},
                {"from": "show_popover_graph_payload", "to": "show_popover_graph_effect", "as": "a1"},
                {"from": "show_popover_graph_effect", "to": "effects", "as": "a0"},
                {"from": "effects", "to": "result", "as": "effects"},
                {"from": "state", "to": "result", "as": "state"},
                {"from": "result", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "insert_node",
            "out": "out",
            "nodes": [
                {"id": "in"},
                {"id": "state", "ref": "arg", "value": "state"},
                {"id": "edge", "ref": "arg", "value": "payload.edge"},
                {"id": "id", "ref": "arg", "value": "payload.node.id"},
                {"id": "name", "ref": "arg", "value": "payload.node.name"},
                {"id": "in_node", "ref": "arg", "value": "payload.in_node"},
                {"id": "select", "script": "return !in_node"},
                {"id": "edges_path", "value": "display_graph.edges"},
                {"id": "edges", "ref": "arg", "value": "state.display_graph.edges"},
                {"id": "new_edges", "script": "return edges.filter(e => !(e.from === edge.from && e.to === edge.to)).concat(in_node ? [{...edge, to: id}, {from: id, to: edge.to}] : [{from: edge.from, to: id, as: 'arg0'}, {...edge, from: id, to: edge.to}])"},
                {"id": "set_edges", "ref": "set"},
                {"id": "add_node_effector", "ref": "add_node"},
                {"id": "new_node"},
                {"id": "add_node_payload"},
                {"id": "add_node_effect", "ref": "new_array"},
                {"id": "effects", "ref": "new_array"},
                {"id": "result"},
                {"id": "out", "ref": "hyperapp_action_effect"}
            ],
            "edges": [
                {"from": "in", "to": "out", "as": "args", "type": "ref"},
                {"from": "state", "to": "set_edges", "as": "target"},
                {"from": "edges", "to": "new_edges", "as": "edges"},
                {"from": "id", "to": "new_edges", "as": "id"},
                {"from": "edge", "to": "new_edges", "as": "edge"},
                {"from": "new_edges", "to": "set_edges", "as": "value"},
                {"from": "edges_path", "to": "set_edges", "as": "path"},
                {"from": "set_edges", "to": "result", "as": "state"},
                {"from": "id", "to": "new_node", "as": "id"},
                {"from": "name", "to": "new_node", "as": "name"},
                {"from": "new_node", "to": "add_node_payload", "as": "node"},
                {"from": "in_node", "to": "select", "as": "in_node"},
                {"from": "in_node", "to": "new_edges", "as": "in_node"},
                {"from": "select", "to": "add_node_payload", "as": "select"},
                {"from": "add_node_payload", "to": "add_node_effect", "as": "a1"},
                {"from": "add_node_effector", "to": "add_node_effect", "as": "a0"},
                {"from": "add_node_effect", "to": "effects", "as": "a0"},
                {"from": "effects", "to": "result", "as": "effects"},
                {"from": "result","to": "out", "as": "fn","type": "ref"}
            ]
        },
        {
            "id": "create_reference_effect",
            "out": "out",
            "nodes": [
                { "id": "in" },
                {"id": "id", "ref": "arg", "value": "payload.id"},
                {"id": "state", "ref": "arg", "value": "state"},
                {"id": "nodes", "ref": "arg", "value": "state.display_graph.nodes"},
                {"id": "edges", "ref": "arg", "value": "state.display_graph.edges"},
                {"id": "nodes_path", "value": "display_graph.nodes"},
                {"id": "edges_path", "value": "display_graph.edges"},
                {"id": "node", "script": "return nodes.find(n => n.id === id)"},
                {"id": "ref", "script": "return node.name ?? (node.id + 'reference')"},
                {"id": "new_nodes", "script": "return nodes.filter(n => n.id !== ref).flatMap(n => n.id === id ? [{id: n.id, name: n.name, ref}, {...n, id: ref, name: n.name ?? ref}] : n)"},
                {"id": "set_nodes", "ref": "set"},
                {"id": "new_edges", "script": "return edges.concat([{from: ref, to: 'custom'}])"},
                {"id": "set_edges", "ref": "set"},
                {"id": "result"},
                {"id": "out", "ref": "hyperapp_action_effect"}
            ],
            "edges": [
                {"from": "in", "to": "out", "as": "args", "type": "ref"},
                {"from": "id", "to": "new_nodes", "as": "id"},
                {"from": "id", "to": "node", "as": "id"},
                {"from": "nodes", "to": "node", "as": "nodes"},
                {"from": "node", "to": "ref", "as": "node"},
                {"from": "ref", "to": "new_nodes", "as": "ref"},
                {"from": "nodes", "to": "new_nodes", "as": "nodes"},
                {"from": "nodes_path", "to": "set_nodes", "as": "path"},
                {"from": "new_nodes", "to": "set_nodes", "as": "value"},
                {"from": "state", "to": "set_nodes", "as": "target"},
                {"from": "ref", "to": "new_edges", "as": "ref"},
                {"from": "edges", "to": "new_edges", "as": "edges"},
                {"from": "new_edges", "to": "set_edges", "as": "value"},
                {"from": "edges_path", "to": "set_edges", "as": "path"},
                {"from": "set_nodes", "to": "set_edges", "as": "target"},
                {"from": "set_edges", "to": "result", "as": "state"},
                {"from": "result", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "add_node",
            "out": "out",
            "nodes": [
                {
                    "id": "in"
                },
                {
                    "id": "add_node_fn",
                    "out": "out",
                    "nodes":[
                        {
                            "id": "in"
                        },
                        {
                            "id": "id",
                            "ref": "arg",
                            "value": "payload.node.id"
                        },
                        {"id": "payload", "ref": "arg", "value": "payload.node"},
                        {"id": "select", "ref": "arg", "value": "payload.select"},
                        {"id": "selected", "ref": "arg", "value": "state.selected"},
                        {
                            "id": "id_array",
                            "ref": "new_array"
                        },
                        {
                            "id": "state",
                            "ref": "arg",
                            "value": "state"
                        },
                        {
                            "id": "update_sim_effect",
                            "ref": "arg",
                            "value": "state.update_sim_effect"
                        },
                        {
                            "id": "nodes",
                            "ref": "arg",
                            "value": "state.display_graph.nodes"
                        },
                        {
                            "id": "effects",
                            "script": "return [[update_sim_effect]]"
                        },
                        {
                            "id": "nodes_path",
                            "value": "display_graph.nodes"
                        },
                        {
                            "id": "selected_path",
                            "value": "selected"
                        },
                        {
                            "id": "new_node"
                        },
                        {
                            "id": "new_nodes",
                            "ref": "append"
                        },
                        {
                            "id": "set_new_nodes",
                            "ref": "set"
                        },
                        {"id": "new_selected", "ref": "if"},
                        {
                            "id": "set_selected",
                            "ref": "set"
                        },
                        {
                            "id": "new_state"
                        },
                        {
                            "id": "out"
                        }
                    ],
                    "edges": [
                        {
                            "from": "in",
                            "to": "out",
                            "as": "args"
                        },
                        {
                            "from": "payload",
                            "to": "new_node"
                        },
                        {
                            "from": "id",
                            "to": "id_array",
                            "as": "arg0"
                        },
                        {
                            "from": "nodes",
                            "to": "new_nodes",
                            "as": "array"
                        },
                        {
                            "from": "new_node",
                            "to": "new_nodes",
                            "as": "item"
                        },
                        {
                            "from": "state",
                            "to": "set_new_nodes",
                            "as": "target"
                        },
                        {
                            "from" :"nodes_path",
                            "to": "set_new_nodes",
                            "as": "path"
                        },
                        {
                            "from": "new_nodes",
                            "to": "set_new_nodes",
                            "as": "value"
                        },
                        {
                            "from": "update_sim_effect",
                            "to": "effects",
                            "as": "update_sim_effect"
                        },
                        {
                            "from": "set_new_nodes",
                            "to": "set_selected",
                            "as": "target"
                        },
                        {
                            "from": "selected_path",
                            "to": "set_selected",
                            "as": "path"
                        },
                        {"from": "id_array", "to": "new_selected", "as": "true"},
                        {"from": "selected", "to": "new_selected", "as": "false"},
                        {"from": "select", "to": "new_selected", "as": "pred"},
                        {
                            "from": "new_selected",
                            "to": "set_selected",
                            "as": "value"
                        },
                        {
                            "from": "set_selected",
                            "to": "new_state"
                        },
                        {
                            "from": "new_state",
                            "to": "effects",
                            "as": "new_state"
                        },
                        {
                            "from": "new_state",
                            "to": "out",
                            "as": "state"
                        },
                        {
                            "from": "effects",
                            "to": "out",
                            "as": "effects"
                        }
                    ]
                },
                {
                    "id": "out",
                    "ref": "hyperapp_action_effect"
                }
            ],
            "edges": [
                {
                    "from": "in",
                    "to": "out"
                },
                {
                    "from": "add_node_fn",
                    "to": "out",
                    "as": "fn",
                    "type": "ref"
                }

            ]
        },
        {
            "id": "keybindings",
            "out": "out",
            "nodes": [
                {"id": "editing"},
                {"id": "searching"},
                {"id": "graph"},
                {"id": "save", "value": "save"},
                {"id": "j", "value": "down"},
                {"id": "k", "value": "up"},
                {"value": "right", "id": "arrowright" },
                {"value": "left", "id": "arrowleft" },
                {"id": "arrowdown", "value": "down"},
                {"id": "arrowup", "value": "up"},
                {"value": "left", "id": "h" },
                {"value": "right", "id": "l" },
                {"value": "edit_value","id": "edit_value" },
                {"value": "edit_name","id": "edit_name" },
                {"value": "edit_ref","id": "edit_ref" },
                {"value": "edit_script","id": "edit_script" },
                {"value": "node_menu","id": "node_menu"},
                {"value": "create_input", "id": "create_input"},
                {"value": "delete","id": "delete" },
                {"value": "find","id": "find" },
                {"value": "esc_editing","id": "esc_editing" },
                {"value": "clear_popover", "id": "esc"},
                {"value": "esc_search","id": "esc_search" },
                {"id": "out"}
            ],
            "edges": [
                {"from": "editing", "to": "out", "as": "editing"},
                {"from": "searching", "to": "out", "as": "searching"},
                {"from": "graph", "to": "out", "as": "graph"},
                {"from": "save", "to": "graph", "as": "ctrl_s"},
                {"from": "arrowdown", "to": "graph", "as": "arrowdown"},
                {"from": "arrowup", "to": "graph", "as": "arrowup"},
                {"from": "arrowleft", "to": "graph", "as": "arrowleft"},
                {"from": "arrowright", "to": "graph", "as": "arrowright"},
                {"from": "j", "to": "graph", "as": "j"},
                {"from": "k", "to": "graph", "as": "k"},
                {"from": "h", "to": "graph", "as": "h"},
                {"from": "l", "to": "graph", "as": "l"},
                {"from": "edit_value", "to": "graph", "as": "v"},
                {"from": "edit_name", "to": "graph", "as": "n"},
                {"from": "edit_script", "to": "graph", "as": "s"},
                {"from": "edit_ref", "to": "graph", "as": "r"}
            ]
        },
        {
            "id": "onkey_fn_body",
            "out": "out",
            "nodes": [
                {
                    "id": "in"
                },
                {
                    "id": "key_event",
                    "ref": "arg",
                    "value": "payload"
                },
                {
                    "id": "state",
                    "ref": "arg",
                    "value": "state"
                },
                {
                    "id": "static",
                    "ref": "arg",
                    "value": "state.static"
                },
                {
                    "id": "randid",
                    "ref": "arg",
                    "value": "state.randid"
                },
                {
                    "id": "arg_levels",
                    "ref": "arg",
                    "value": "state.levels"
                },
                {
                    "id": "dimensions",
                    "ref": "arg",
                    "value": "state.dimensions"
                },
                {
                    "id": "html_id",
                    "ref": "arg",
                    "value": "state.html_id"
                },
                {
                    "id": "arg_display_graph",
                    "ref": "arg",
                    "value": "state.display_graph"
                },
                {
                    "id": "display_graph_out",
                    "ref": "arg",
                    "value": "state.display_graph.out"
                },
                {
                    "id": "nodes",
                    "ref": "arg",
                    "value": "state.nodes"
                },
                {
                    "id": "links",
                    "ref": "arg",
                    "value": "state.links"
                },
                {
                    "id": "editing",
                    "ref": "arg",
                    "value": "state.editing"
                },
                {
                    "id": "search",
                    "ref": "arg",
                    "value": "state.search"
                },
                {
                    "id": "arg_selected",
                    "ref": "arg",
                    "value": "state.selected"
                },
                {
                    "id": "arg_selected_edge",
                    "ref": "arg",
                    "value": "state.selected_edge"
                },
                {
                    "id": "add_node_effect",
                    "ref": "add_node"
                },
                {
                    "id": "add_edge_effect",
                    "ref": "add_edge"
                },
                {
                    "id": "delete_node_effect",
                    "ref": "delete_node"
                },
                {
                    "id": "save_effect",
                    "ref": "save_effect"
                },
                {
                    "id": "show_edit_text",
                    "ref": "show_edit_text"
                },
                {
                    "id": "update_node",
                    "ref": "update_node_action"
                },
                {
                    "id": "open_reference_popover",
                    "ref": "open_reference_popover"
                },
                {
                    "id": "confirm_edit_text",
                    "ref": "confirm_edit_text"
                },
                {
                    "id": "onselectnode_effect",
                    "ref": "onselectnode_effect"
                },
                {"id": "onselectnode_action", "ref": "onselectnode_action"},
                {"id": "search_effect", "ref": "search_effect"},
                {"id": "focus_effect", "ref": "focus_effect"},
                {"id": "blur_effect", "ref": "blur_effect"},
                {"id": "stop_propagation", "ref": "stop_propagation_effect"},

                {"id": "keybindings", "ref": "keybindings"},
                {"id": "mode", "script": "return editing ? 'editing' : 'graph'"},
                {"id": "mode_keybindings", "ref": "get"},
                {"id": "key_action_effect", "ref": "get"},
                {"id": "effects_map", "ref": "switch"},
                {"id": "actions_map", "ref": "switch"},

                {
                    "id": "key",
                    "args": [
                        "ev"
                    ],
                    "script": "return ev.key?.toLowerCase()"
                },
                {
                    "id": "key_inputs",
                    "script": "return (ev.ctrlKey ? 'ctrl_' : '') + (ev.shiftKey ? 'shift_' : '') + ev.key.toLowerCase()"
                },
                {
                    "id": "get_selected",
                    "script": "return selected[0]"
                },
                {
                    "id": "selected_node",
                    "ref": "selected_node"
                },
                {"id": "el_node", "script": "return nodes.find(n => n.node_id === node_id)"},
                {
                    "id": "save",
                    "script": "return [[save_effect, {display_graph}]]"
                },
                {
                    "id": "down",
                    "script": "const next_node_edge = display_graph.edges.find(e => e.from === selected[0]); return next_node_edge ? {action: onselectnode, payload: {node_id: next_node_edge.to, event}} : {state, effects: [[stop_propagation, event]]}"
                },
                {
                    "id": "up",
                    "script": "console.log('up'); console.log(onselectnode); const next_edges = selected_edge ? selected_edge : display_graph.edges.filter(e => e.to === selected[0]); const next_node_edge = selected_edge ? selected_edge : next_edges[Math.ceil(next_edges.length / 2) - 1]; return next_node_edge ? {action: onselectnode, payload: {node_id: next_node_edge.from, event}} : {state, effects: [[stop_propagation, event]]}"
                },
                {
                    "id": "left",
                    "script": "const current_node = nodes.find(n => n.node_id === selected[0]); const siblings = levels.siblings.get(selected[0]); const next_node = static ? nodes.find(n => n.node_id === siblings[(siblings.findIndex(s => s === selected[0]) - 1 + siblings.length) % siblings.length]): siblings.reduce((dist, sibling) => { const sibling_node = nodes.find(n => n.node_id === sibling); if(!sibling_node){ return dist } const xdist = Math.abs(sibling_node.x - current_node.x); dist = (sibling_node.x < current_node.x) && xdist < dist[0] ? [xdist, sibling_node] : dist; return dist }, [dimensions.x])[1]; return next_node ? {action: onselectnode, payload: {node_id: next_node.node_id, event}} : {state, effects: [[stop_propagation, event]]}"
                },
                {
                    "id": "left_edge",
                    "script": "const link = links.find(l => l.source.node_child_id === selected_edge.from + '_' + selected_edge.to); return links.filter(l => l.target.node_id === link.target.node_id).reduce(([current, dist], l) => l.source.x < link.source.x && Math.abs(l.source.x - link.source.x) < dist ? [{from: l.source.node_id, to: l.target.node_id} , Math.abs(l.source.x - link.source.x)] : [current, dist], [selected_edge, 10000])[0]"
                },
                {
                    "id": "right",
                    "script": "const current_node = nodes.find(n => n.node_id === selected[0]); const siblings = levels.siblings.get(selected[0]); const next_node = static ? nodes.find(n => n.node_id === siblings[(siblings.findIndex(s => s === selected[0]) + 1) % siblings.length]) : siblings.reduce((dist, sibling) => { const sibling_node = nodes.find(n => n.node_id === sibling); if(!sibling_node){ return dist } const xdist = Math.abs(sibling_node.x - current_node.x); dist = sibling_node.x > current_node.x && xdist < dist[0] ? [xdist, sibling_node] : dist; return dist }, [dimensions.x])[1]; return next_node ? {action: onselectnode, payload: {node_id: next_node.node_id, event}} : {state, effects: [[stop_propagation, event]]}"
                },
                {
                    "id": "right_edge",
                    "script": "const link = links.find(l => l.source.node_child_id === selected_edge.from + '_' + selected_edge.to); return links.filter(l => l.target.node_id === link.target.node_id).reduce(([current, dist], l) => l.source.x > link.source.x && Math.abs(l.source.x - link.source.x) < dist ? [{from: l.source.node_id, to: l.target.node_id} , Math.abs(l.source.x - link.source.x)] : [current, dist], [{to: link.target.node_id, from: link.source.node_id}, 10000])[0]"
                },
                {
                    "id": "edit_value",
                    "script": "return [[show_edit_text, {id: selected_node.id, property:'value', oneditconfirm: update_node, value: selected_node.value, position: {x: node.x, y: node.y}}]]"
                },
                {
                    "id": "edit_name",
                    "script": "return [[show_edit_text, {id: selected_node.id, property:'name', oneditconfirm: update_node, value: selected_node.name, position: {x: node.x, y: node.y}}]]"
                },
                {
                    "id": "edit_ref",
                    "script": "return [[show_edit_text, {id, property: 'ref', oneditconfirm: update_node, value: '', position: {x: node.x, y: node.y}}]]"
                },
                {
                    "id": "edit_script",
                    "script": "return [[show_edit_text, {id: selected_node.id, property:'script', oneditconfirm: update_node, value: selected_node.script, position: {x: node.x, y: node.y}}]]"
                },
                {"id": "enter", "script": "return [[onselectnode, {node_id, event}]]"},
                {
                    "id": "o",
                    "script": "return [[add_node, {node: {id: randid}, select: true}], [add_edge, {from: randid, to: selected}]]"
                },
                {
                    "id": "x",
                    "script": "return [[delete_node, {id: selected}]]"
                },
                {
                    "id": "e",
                    "script": "return selected_edge ? null : display_graph.edges.find(e => e.to === selected[0]);"
                },
                {
                    "id": "f",
                    "args": [],
                    "script": "return [[search, {search: ''}], [focus_effect, {selector: `#${html_id}-search-input`}]]"
                },
                {
                    "id": "esc_editing",
                    "script": "return [[confirm_edit_text]]" 
                },
                {
                    "id": "esc",
                    "script": "return [[onselectnode, {node_id, event}]]" 
                },
                {
                    "id": "esc_search",
                    "script": "return [[search, {search: false}], [blur, {selector: `#${html_id}-search-input`}]]"
                },
                {
                    "id": "selected",
                    "ref": "switch"
                },
                {
                    "id": "set_selected",
                    "script": "return {...state, selected: selected ?? state.selected}"
                },
                {
                    "id": "show_all",
                    "ref": "switch"
                },
                {
                    "id": "show_result",
                    "ref": "switch"
                },
                {
                    "id": "set_show_result",
                    "script": "return {...state, show_result: show_result ?? state.show_result}"
                },
                {
                    "id": "set_editing",
                    "script": "state.editing = editing ?? state.editing; return state"
                },
                {
                    "id": "display_graph",
                    "ref": "switch"
                },
                {
                    "id": "set_display_graph",
                    "script": "state.display_graph = display_graph ?? state.display_graph; return state"
                },
                {
                    "id": "edit_value",
                    "ref": "switch"
                },
                {
                    "id": "clipboard",
                    "ref": "switch"
                },
                {"id": "panzoom_selected_id", "script": "return selected[0]"},
                {"id": "panzoom_selected_effector", "ref": "arg", "value": "state.panzoom_selected_effect"},
                {"id": "panzoom_selected_effect", "ref": "new_array"},
                {"id": "panzoom_selected_effect_arr", "ref": "new_array"},
                {"id": "panzoom_selected_payload"},
                {
                    "id": "set_clipboard",
                    "script": "state.clipboard = clipboard ? clipboard : state.clipboard; return state"
                },
                {
                    "id": "graph_effects",
                    "ref": "switch"
                },
                {
                    "id": "search_effects",
                    "ref": "switch"
                },
                {"id": "update_effects_input", "script": "return typeof search === 'string' ? 'search' : 'graph'"},
                {
                    "id": "update_effects",
                    "ref": "switch"
                },
                {
                    "id": "editing_effects",
                    "ref": "switch"
                },
                {"id": "effects", "ref": "switch"},
                {
                    "id": "update_graph_sim",
                    "script": "return (!state.editing && state.search === false && (key === 'enter' || key.toLowerCase() === 'o' || key === 'x' || (key === 't' && shiftKey) || (!!pending_edges.edge_to && !!pending_edges.edge_from))) || key === 'escape' || selected"
                },
                {"id": "graph_state"},
                {"id": "search_state"},
                {"id": "update_state", "ref": "switch"},
                {"id": "no_update"},
                {"id": "update", "ref": "update_graph_display"},

                {"id": "out_effects"},
                {"id": "out_action_effect", "ref": "default"},
                {"id": "log", "ref": "log"},
                {"id": "out", "ref": "default"}
            ],
            "edges": [
                {"from": "edit_value", "to": "effects_map", "as": "edit_value"},
                {"from": "edit_name", "to": "effects_map", "as": "edit_name"},
                {"from": "edit_ref", "to": "effects_map", "as": "edit_ref"},
                {"from": "down", "to": "actions_map", "as": "down"},
                {"from": "up", "to": "actions_map", "as": "up"},
                {"from": "left", "to": "actions_map", "as": "left"},
                {"from": "right", "to": "actions_map", "as": "right"},

                {"from": "editing", "to": "mode", "as": "editing"},
                {"from": "keybindings", "to": "mode_keybindings", "as": "target"},
                {"from": "mode", "to": "mode_keybindings", "as": "path"},
                {"from": "mode_keybindings", "to": "key_action_effect", "as": "target"},
                {"from": "key_inputs", "to": "key_action_effect", "as": "path"},
                {"from": "key_action_effect", "to": "effects_map", "as": "input"},
                {"from": "effects_map", "to": "out_effects", "as": "effects"},
                {"from": "state", "to": "out_effects", "as": "state"},
                {"from": "out_effects", "to": "out_action_effect", "as": "otherwise"},
                {"from": "key_action_effect", "to": "actions_map", "as": "input"},
                {"from": "actions_map", "to": "out_action_effect", "as": "value"},
                {"from": "out_action_effect", "to": "out", "as": "value"},
                {"from": "state", "to": "out", "as": "otherwise"},

                {
                    "from": "state",
                    "to": "key_inputs",
                    "as": "state"
                },
                {
                    "from": "key_event",
                    "to": "key",
                    "as": "ev"
                },
                {
                    "from": "state",
                    "to": "key_inputs",
                    "as": "state"
                },
                {
                    "from": "key_event",
                    "to": "key_inputs",
                    "as": "ev"
                },
                {
                    "from": "arg_display_graph",
                    "to": "selected_node",
                    "as": "display_graph"
                },
                {"from": "arg_selected", "to": "get_selected", "as": "selected"},
                {
                    "from": "get_selected",
                    "to": "selected_node",
                    "as": "selected"
                },
                {
                    "from": "nodes",
                    "to": "el_node",
                    "as": "nodes"
                },
                {
                    "from": "get_selected",
                    "to": "el_node",
                    "as": "node_id"
                },
                {
                    "from": "key_event",
                    "to": "run"
                },
                {
                    "from": "key_inputs",
                    "to": "selected",
                    "as": "input"
                },
                {
                    "from": "key_inputs",
                    "to": "graph_effects",
                    "as": "input"
                },
                {
                    "from": "key_inputs",
                    "to": "search_effects",
                    "as": "input"
                },
                {
                    "from": "key_inputs",
                    "to": "editing_effects",
                    "as": "input"
                },
                {
                    "from": "key_inputs",
                    "to": "search_effects",
                    "as": "input"
                },
                {
                    "from": "state",
                    "to": "calculate_levels",
                    "as": "state"
                },
                {
                    "from": "selected",
                    "to": "calculate_levels",
                    "as": "selected"
                },
                {
                    "from": "display_graph",
                    "to": "calculate_levels",
                    "as": "display_graph"
                },
                {
                    "from": "key_inputs",
                    "to": "edit_value",
                    "as": "input"
                },
                {
                    "from": "key_inputs",
                    "to": "display_graph",
                    "as": "input"
                },
                {
                    "from": "key_inputs",
                    "to": "clipboard",
                    "as": "input"
                },
                {
                    "from": "key_inputs",
                    "to": "show_all",
                    "as": "input"
                },
                {
                    "from": "key_inputs",
                    "to": "show_result",
                    "as": "input"
                },
                {
                    "from": "arg_display_graph",
                    "to": "save",
                    "as": "display_graph"
                },
                {
                    "from": "save_effect",
                    "to": "save",
                    "as": "save_effect"
                },
                {
                    "from": "onselectnode_action",
                    "to": "up",
                    "as": "onselectnode"
                },
                {
                    "from": "state",
                    "to": "up",
                    "as": "state"
                },
                {
                    "from": "arg_selected_edge",
                    "to": "up",
                    "as": "selected_edge"
                },
                {
                    "from": "arg_selected",
                    "to": "up",
                    "as": "selected"
                },
                {
                    "from": "arg_display_graph",
                    "to": "up",
                    "as": "display_graph"
                },
                {
                    "from": "key_event",
                    "to": "up",
                    "as": "event"
                },
                {
                    "from": "stop_propagation",
                    "to": "up",
                    "as": "stop_propagation"
                },
                {
                    "from": "key_event",
                    "to": "down",
                    "as": "event"
                },
                {
                    "from": "stop_propagation",
                    "to": "down",
                    "as": "stop_propagation"
                },
                {
                    "from": "onselectnode_action",
                    "to": "down",
                    "as": "onselectnode"
                },
                {
                    "from": "state",
                    "to": "down",
                    "as": "state"
                },
                {
                    "from": "arg_selected",
                    "to": "down",
                    "as": "selected"
                },
                {
                    "from": "arg_display_graph",
                    "to": "down",
                    "as": "display_graph"
                },
                {
                    "from": "show_edit_text",
                    "to": "edit_value",
                    "as": "show_edit_text"
                },
                {
                    "from": "update_node",
                    "to": "edit_value",
                    "as": "update_node"
                },
                {
                    "from": "el_node",
                    "to": "edit_value",
                    "as": "node"
                },
                {
                    "from": "selected_node",
                    "to": "edit_value",
                    "as": "selected_node"
                },
                {
                    "from": "edit_value",
                    "to": "graph_effects",
                    "as": "edit_value"
                },
                {
                    "from": "show_edit_text",
                    "to": "edit_name",
                    "as": "show_edit_text"
                },
                {
                    "from": "update_node",
                    "to": "edit_name",
                    "as": "update_node"
                },
                {
                    "from": "el_node",
                    "to": "edit_name",
                    "as": "node"
                },
                {
                    "from": "selected_node",
                    "to": "edit_name",
                    "as": "selected_node"
                },
                {
                    "from": "edit_name",
                    "to": "graph_effects",
                    "as": "edit_name"
                },
                {
                    "from": "el_node",
                    "to": "edit_ref",
                    "as": "node"
                },
                {
                    "from": "show_edit_text",
                    "to": "edit_ref",
                    "as": "show_edit_text"
                },
                {
                    "from": "update_node",
                    "to": "edit_ref",
                    "as": "update_node"
                },
                {
                    "from": "get_selected",
                    "to": "edit_ref",
                    "as": "id"
                },
                {
                    "from": "edit_ref",
                    "to": "graph_effects",
                    "as": "edit_ref"
                },
                {
                    "from": "show_edit_text",
                    "to": "s",
                    "as": "show_edit_text"
                },
                {
                    "from": "update_node",
                    "to": "s",
                    "as": "update_node"
                },
                {
                    "from": "el_node",
                    "to": "s",
                    "as": "node"
                },
                {
                    "from": "selected_node",
                    "to": "s",
                    "as": "selected_node"
                },
                {
                    "from": "s",
                    "to": "graph_effects",
                    "as": "s"
                },
                {
                    "from": "get_selected",
                    "to": "enter",
                    "as": "node_id"
                },
                {
                    "from": "key_event",
                    "to": "enter",
                    "as": "event"
                },
                {
                    "from": "onselectnode_effect",
                    "to": "enter",
                    "as": "onselectnode"
                },
                {
                    "from": "enter",
                    "to": "graph_effects",
                    "as": "enter"
                },
                {
                    "from": "key_event",
                    "to": "t"
                },
                {
                    "from": "state",
                    "to": "t"
                },
                {
                    "from": "key_event",
                    "to": "shift_t"
                },
                {
                    "from": "state",
                    "to": "shift_t"
                },
                {
                    "from": "html_id",
                    "to": "s",
                    "as": "html_id"
                },
                {
                    "from": "html_id",
                    "to": "f",
                    "as": "html_id"
                },
                {"from": "search_effect", "to": "f", "as": "search"},
                {"from": "focus_effect", "to": "f", "as": "focus_effect"},
                {
                    "from": "html_id",
                    "to": "a",
                    "as": "html_id"
                },
                {
                    "from": "html_id",
                    "to": "t",
                    "as": "html_id"
                },
                {
                    "from": "html_id",
                    "to": "set_selected",
                    "as": "html_id"
                },
                {
                    "from": "html_id",
                    "to": "esc_search",
                    "as": "html_id"
                },
                {
                    "from": "key_event",
                    "to": "s"
                },
                {
                    "from": "state",
                    "to": "s"
                },
                {
                    "from": "state",
                    "to": "p"
                },
                {
                    "from": "state",
                    "to": "q"
                },
                {
                    "from": "key_event",
                    "to": "n"
                },
                {
                    "from": "state",
                    "to": "n"
                },
                {
                    "from": "key_event",
                    "to": "a"
                },
                {
                    "from": "state",
                    "to": "a"
                },
                {
                    "from": "get_selected",
                    "to": "x",
                    "as": "selected"
                },
                {
                    "from": "delete_node_effect",
                    "to": "x",
                    "as": "delete_node"
                },
                {
                    "from": "randid",
                    "to": "o",
                    "as": "randid"
                },
                {
                    "from": "get_selected",
                    "to": "o",
                    "as": "selected"
                },
                {
                    "from": "add_edge_effect",
                    "to": "o",
                    "as": "add_edge"
                },
                {
                    "from": "add_node_effect",
                    "to": "o",
                    "as": "add_node"
                },
                {
                    "from": "state",
                    "to": "i",
                    "as": "state"
                },
                {
                    "from": "state",
                    "to": "e"
                },
                {
                    "from": "selected_node",
                    "to": "y",
                    "as": "node"
                },
                {
                    "from": "down",
                    "to": "selected",
                    "as": "arrowdown"
                },
                {
                    "from": "down",
                    "to": "selected",
                    "as": "j"
                },
                {
                    "from": "up",
                    "to": "selected",
                    "as": "arrowup"
                },
                {
                    "from": "up",
                    "to": "selected",
                    "as": "k"
                },
                {
                    "from": "key_event",
                    "to": "left",
                    "as": "event"
                },
                {
                    "from": "dimensions",
                    "to": "left",
                    "as": "dimensions"
                },
                {
                    "from": "links",
                    "to": "left",
                    "as": "links"
                },
                {
                    "from": "arg_levels",
                    "to": "left",
                    "as": "levels"
                },
                {
                    "from": "arg_selected",
                    "to": "left",
                    "as": "selected"
                },
                {
                    "from": "arg_selected_edge",
                    "to": "left",
                    "as": "selected_edge"
                },
                {
                    "from": "arg_display_graph",
                    "to": "left",
                    "as": "display_graph"
                },
                {
                    "from": "nodes",
                    "to": "left",
                    "as": "nodes"
                },
                {
                    "from": "onselectnode_action",
                    "to": "left",
                    "as": "onselectnode"
                },
                {
                    "from": "state",
                    "to": "left",
                    "as": "state"
                },
                {
                    "from": "static", "to": "left", "as": "static"
                },
                {
                    "from": "stop_propagation",
                    "to": "left",
                    "as": "stop_propagation"
                },
                {
                    "from": "left",
                    "to": "selected",
                    "as": "arrowleft"
                },
                {
                    "from": "left",
                    "to": "selected",
                    "as": "h"
                },
                {
                    "from": "static", "to": "right", "as": "static"
                },
                {
                    "from": "stop_propagation",
                    "to": "right",
                    "as": "stop_propagation"
                },
                {
                    "from": "key_event",
                    "to": "right",
                    "as": "event"
                },
                {
                    "from": "dimensions",
                    "to": "right",
                    "as": "dimensions"
                },
                {
                    "from": "nodes",
                    "to": "right",
                    "as": "nodes"
                },
                {
                    "from": "links",
                    "to": "right",
                    "as": "links"
                },
                {
                    "from": "arg_levels",
                    "to": "right",
                    "as": "levels"
                },
                {
                    "from": "arg_selected",
                    "to": "right",
                    "as": "selected"
                },
                {
                    "from": "arg_selected_edge",
                    "to": "right",
                    "as": "selected_edge"
                },
                {
                    "from": "arg_display_graph",
                    "to": "right",
                    "as": "display_graph"
                },
                {
                    "from": "onselectnode_action",
                    "to": "right",
                    "as": "onselectnode"
                },
                {
                    "from": "state",
                    "to": "right",
                    "as": "state"
                },
                {
                    "from": "right",
                    "to": "selected",
                    "as": "arrowright"
                },
                {
                    "from": "right",
                    "to": "selected",
                    "as": "l"
                },
                {
                    "from": "static", "to": "right_edge", "as": "static"
                },
                {
                    "from": "dimensions",
                    "to": "right_edge",
                    "as": "dimensions"
                },
                {
                    "from": "nodes",
                    "to": "right_edge",
                    "as": "nodes"
                },
                {
                    "from": "links",
                    "to": "right_edge",
                    "as": "links"
                },
                {
                    "from": "arg_levels",
                    "to": "right_edge",
                    "as": "levels"
                },
                {
                    "from": "arg_selected",
                    "to": "right_edge",
                    "as": "selected"
                },
                {
                    "from": "arg_selected_edge",
                    "to": "right_edge",
                    "as": "selected_edge"
                },
                {
                    "from": "arg_display_graph",
                    "to": "right_edge",
                    "as": "display_graph"
                },
                {
                    "from": "right_edge",
                    "to": "selected_edge",
                    "as": "arrowright"
                },
                {
                    "from": "right_edge",
                    "to": "selected_edge",
                    "as": "l"
                },
                {
                    "from": "selected_edge",
                    "to": "set_selected_edge",
                    "as": "selected_edge"
                },
                {
                    "from": "state",
                    "to": "pending_edges",
                    "as": "state"
                },
                {
                    "from": "key_event",
                    "to": "pending_edges"
                },
                {
                    "from": "pending_edges",
                    "to": "make_edge",
                    "as": "pending_edges"
                },
                {
                    "from": "pending_edges",
                    "to": "set_pending_edges",
                    "as": "pending_edges"
                },
                {
                    "from": "pending_edges",
                    "to": "update_graph_sim",
                    "as": "pending_edges"
                },
                {
                    "from": "selected",
                    "to": "update_graph_sim",
                    "as": "selected"
                },
                {
                    "from": "state",
                    "to": "update_graph_sim",
                    "as": "state"
                },
                {
                    "from": "state",
                    "to": "make_edge",
                    "as": "state"
                },
                {
                    "from": "q",
                    "to": "show_all",
                    "as": "q"
                },
                {
                    "from": "i",
                    "to": "show_result",
                    "as": "i"
                },
                {
                    "from": "confirm_edit_text",
                    "to": "esc_editing",
                    "as": "confirm_edit_text"
                },
                {
                    "from": "esc_editing",
                    "to": "editing_effects",
                    "as": "escape"
                },
                {
                    "from": "search_effect",
                    "to": "esc_search",
                    "as": "search"
                },
                {
                    "from": "blur_effect",
                    "to": "esc_search",
                    "as": "blur"
                },
                {
                    "from": "esc_search",
                    "to": "search_effects",
                    "as": "escape"
                },
                {"from": "display_graph_out", "to": "esc", "as": "node_id"},
                {"from": "onselectnode_effect", "to": "esc", "as": "onselectnode"},
                {"from": "key_event", "to": "esc", "as": "event"},
                {"from": "esc", "to": "graph_effects", "as": "escape"},
                {
                    "from": "f",
                    "to": "graph_effects",
                    "as": "f"
                },
                {
                    "from": "x",
                    "to": "graph_effects",
                    "as": "x"
                },
                {
                    "from": "o",
                    "to": "graph_effects",
                    "as": "o"
                },
                {
                    "from": "save",
                    "to": "graph_effects",
                    "as": "ctrl_s"
                },
                {
                    "from": "y",
                    "to": "clipboard",
                    "as": "y"
                },
                {
                    "from": "state",
                    "to": "set_selected",
                    "as": "state"
                },
                {
                    "from": "selected",
                    "to": "set_selected",
                    "as": "selected"
                },
                {
                    "from": "clipboard",
                    "to": "set_clipboard",
                    "as": "clipboard"
                },
                {
                    "from": "set_selected",
                    "to": "set_selected_edge",
                    "as": "state"
                },
                {"from": "editing", "to": "new_state", "as": "pred"},
                {"from": "state", "to": "search_state", "as": "search"},
                {"from": "search_state", "to": "update_state", "as": "search"},
                {"from": "update_effects_input", "to": "update_state", "as": "input"},
                {
                    "from": "search_state",
                    "to": "update_state",
                    "as": "search"
                },
                {
                    "from": "graph_state",
                    "to": "update_state",
                    "as": "graph"
                },
                {"from": "update_state", "to": "update"},
                {
                    "from": "key_event",
                    "to": "update_graph_sim"
                },
                {
                    "from": "key_event",
                    "to": "graph_state"
                },
                {
                    "from": "display_graph",
                    "to": "graph_state",
                    "as": "display_graph"
                },
                {
                    "from": "selected",
                    "to": "graph_state",
                    "as": "selected"
                },
                {
                    "from": "set_selected",
                    "to": "graph_state",
                    "as": "state"
                },
                {
                    "from": "key_inputs",
                    "to": "graph_state",
                    "as": "key"
                },
                {
                    "from": "search",
                    "to": "update_effects_input",
                    "as": "search"
                },
                {
                    "from": "update_effects_input",
                    "to": "update_effects",
                    "as": "input"
                },
                {"from": "state", "to": "panzoom_selected_payload"},
                {"from": "selected", "to": "panzoom_selected_id", "as": "selected"},
                {"from": "panzoom_selected_id", "to": "panzoom_selected_payload", "as": "selected"},
                {"from": "panzoom_selected_effector", "to": "panzoom_selected_effect", "as": "a0"},
                {"from": "panzoom_selected_payload", "to": "panzoom_selected_effect", "as": "a1"},
                {"from": "panzoom_selected_effect", "to": "panzoom_selected_effect_arr", "as": "a0"},
                {"from": "panzoom_selected_effect_arr", "to": "graph_effects", "as": "arrowleft"},
                {"from": "panzoom_selected_effect_arr", "to": "graph_effects", "as": "h"},
                {"from": "panzoom_selected_effect_arr", "to": "graph_effects", "as": "arrowright"},
                {"from": "panzoom_selected_effect_arr", "to": "graph_effects", "as": "l"},
                {"from": "panzoom_selected_effect_arr", "to": "graph_effects", "as": "arrowup"},
                {"from": "panzoom_selected_effect_arr", "to": "graph_effects", "as": "k"},
                {"from": "panzoom_selected_effect_arr", "to": "graph_effects", "as": "arrowdown"},
                {"from": "panzoom_selected_effect_arr", "to": "graph_effects", "as": "j"},
                {
                    "from": "graph_effects",
                    "to": "update_effects",
                    "as": "graph"
                },
                {
                    "from": "search_effects",
                    "to": "update_effects",
                    "as": "search"
                },
                {
                    "from": "update_effects",
                    "to": "update",
                    "as": "effects"
                },
                {"from": "state", "to": "no_update", "as": "state"},
                {
                    "from": "editing_effects",
                    "to": "no_update",
                    "as": "effects"
                },
                { "from": "editing", "to": "_out", "as": "pred" },
                { "from": "update", "to": "_out", "as": "false" },
                { "from": "no_update", "to": "_out", "as": "true" }
            ]
        },
        {
            "id": "simulation",
            "ref": "arg",
            "value": "simulation"
        },
        {
            "id": "arg_sim_update_alpha",
            "ref": "arg",
            "value": "sim_update_alpha"
        },
        {
            "id": "arg_nodes",
            "ref": "arg",
            "value": "nodes"
        },
        {
            "id": "arg_links",
            "ref": "arg",
            "value": "links"
        },
        {
            "id": "arg_selected",
            "ref": "arg",
            "value": "selected"
        },
        {
            "id": "arg_levels",
            "ref": "arg",
            "value": "levels"
        },
        {
            "id": "update_sim_effect",
            "script": "return (dispatch, payload) => payload ? !(payload.simulation || payload.static) ? undefined : _lib.scripts.updateSimulationNodes(dispatch, payload) : dispatch(state => [state, [() => !(state.simulation || state.static) ? undefined : _lib.scripts.updateSimulationNodes(dispatch, state)]])"
        },
        {
            "id": "update_sim_in"
        },
        {
            "id": "update_sim_fn",
            "ref": "execute_graph"
        },
        {
            "id": "_update_sim_effect",
            "ref": "wrap_effect_fn"
        },
        {
            "id": "stop_propagation_effect",
            "script": "return (_, payload) => {payload.stopPropagation(); payload.preventDefault();}"
        },
        {
            "id": "dispatch_custom_event_effect",
            "script": "return (_, payload) => document.getElementById(`${payload.html_id}`).dispatchEvent(new CustomEvent(payload.event, {detail: payload.detail}))"
        },
        {
            "id": "search_effect",
            "out": "out",
            "nodes": [
                {"id": "in"},
                {"id": "search", "ref": "arg", "value": "payload.search"},
                {"id": "state", "ref": "arg", "value": "state"},
                {"id": "search_path", "value": "search"},
                {"id": "set_search", "ref": "set"},
                {"id": "result"},
                {"id": "out", "ref": "hyperapp_action_effect"}
            ],
            "edges": [
                {"from": "in", "to": "out", "as": "args", "type": "ref"},
                {"from": "state", "to": "set_search", "as": "target"},
                {"from": "search_path", "to": "set_search", "as": "path"},
                {"from": "search", "to": "set_search", "as": "value"},
                {"from": "set_search", "to": "result", "as": "state"},
                {"from": "result", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "create_object_graph",
            "out": "out",
            "nodes": [
                {"id": "in"},
                {"id": "in_obj", "ref": "arg", "value": "obj"},
                {"id": "name", "ref": "arg", "value": "name"},
                {"id": "map_obj", "script": "return _lib.no.objToGraph(obj)"},
                {"id": "out_node_id", "script": "return Object.keys(obj)[0]"},
                {"id": "out"}
            ],
            "edges": [
                {"from": "in_obj", "to": "map_obj", "as": "obj"},
                {"from": "in_obj", "to": "out_node_id", "as": "obj"},
                {"from": "name", "to": "out_node", "as": "name"},
                {"from": "map_obj", "to": "out"},
                {"from": "in", "to": "out", "as": "args", "type": "ref"},
                {"from": "out_node_id", "to": "out", "as": "out"}
            ]
        },
        {
            "id": "create_popover_graph",
            "out": "out",
            "nodes": [
                {"id": "in"},
                {"id": "in_nodes", "ref": "arg", "value": "nodes"},
                {"id": "name", "ref": "arg", "value": "name"},
                {"id": "clear_popover", "ref": "clear_popover_graph"},
                {"id": "out_node", "script": "return {'id': 'out', name, value: [[clear_popover]]}"},
                {"id": "out_node_id", "value": "out"},
                {"id": "edges", "script": "return nodes.map(n => ({from: n.id, to: 'out', _needsresolve: true}))"},
                {"id": "nodes", "ref": "append"},
                {"id": "out"}
            ],
            "edges": [
                {"from": "clear_popover", "to": "out_node", "as": "clear_popover"},
                {"from": "name", "to": "out_node", "as": "name"},
                {"from": "out_node", "to": "nodes", "as": "item"},
                {"from": "in_nodes", "to": "nodes", "as": "array"},
                {"from": "in_nodes", "to": "edges", "as": "nodes"},
                {"from": "in", "to": "out", "as": "args", "type": "ref"},
                {"from": "nodes", "to": "out", "as": "nodes"},
                {"from": "edges", "to": "out", "as": "edges"},
                {"from": "out_node_id", "to": "out", "as": "out"}
            ]
        },
        {
            "id": "graph_ui_action",
            "nodes": [
                {"id": "in"},
                {"id": "payload", "ref": "arg", "value": "payload"},
                {"id": "state", "ref": "arg", "value": "state"},
                {"id": "name", "ref": "arg", "value": "state.display_graph.id"},
                {"id": "display_graph", "ref": "arg", "value": "state.display_graph"},
                {"id": "readonly", "ref": "arg", "value": "state.readonly"},
                {"id": "html_id", "ref": "arg", "value": "state.html_id"},
                {"id": "examples", "ref": "arg", "value": "state.examples"},
                {"id": "event_name", "value": "graphclick"},
                {"id": "id_path", "value": "id"},
                {"id": "clear_popover", "ref": "clear_popover_graph"},
                {"id": "clear_popover_effect", "ref": "new_array"},
                {"id": "save_effector", "ref": "save_effect"},
                {"id": "save_payload"},
                {"id": "save_effect", "ref": "new_array"},
                {"id": "save_node_effects", "ref": "new_array"},
                {"id": "save_name", "value": "save"},
                {"id": "save_id", "value": "save"},
                {"id": "save_node"},
                {"id": "export_effector", "ref": "export_effect"},
                {"id": "export_payload"},
                {"id": "export_effect", "ref": "new_array"},
                {"id": "export_node_effects", "ref": "new_array"},
                {"id": "export_name", "value": "export"},
                {"id": "export_id", "value": "export"},
                {"id": "export_node"},
                {"id": "new_graph_effector", "ref": "new_graph_effect"},
                {"id": "new_graph_effect", "ref": "new_array"},
                {"id": "new_graph_name", "value": "new_graph"},
                {"id": "new_graph_id", "value": "new_graph"},
                {"id": "new_graph_node_effects", "ref": "new_array"},
                {"id": "new_graph_node"},
                {"id": "popover_graph_actions", "ref": "new_array"},
                {"id": "empty", "value": {}},
                {"id": "popover_graph_obj_actions", "ref": "new_array"},
                {"id": "popover_graph_obj"},
                {"id": "popover_graph_parent_obj", "ref": "set"},
                {"id": "popover_graph", "ref": "create_object_graph"},
                {"id": "show_popover_effector", "ref": "show_popover_graph"},
                {"id": "show_popover_effect", "ref": "new_array"},
                {"id": "show_popover_payload"},
                {"id": "display_graph_path", "value": "display_graph"},
                {"id": "change_display_graph_id", "ref": "change_display_graph_id"},
                {"id": "change_display_graph_id_node_name", "value": "change id"},
                {"id": "change_display_graph_id_node_id", "value": "change_display_graph_id_node"},
                {"id": "change_display_graph_id_node_value", "ref": "new_array"},
                {"id": "change_display_graph_id_node"},
                {"id": "show_edit_text_effector", "ref": "show_edit_text"},
                {"id": "show_edit_text_payload"},
                {"id": "show_edit_text_effect", "ref": "new_array"},
                {"id": "open_graph", "ref": "open_saved_graph_effect"},
                {"id": "open_obj", "script": "return Object.fromEntries(JSON.parse(localStorage.getItem('graph_list') ?? '[]').map(g => [g, [clear_popover, [open_graph, {id: g}]]]))"},
                {"id": "open_example_graph", "ref": "open_graph_effect"},
                {"id": "examples_obj", "script": "return Object.fromEntries(examples.map(e => ['example-' + e.id, [clear_popover, [open_graph, {graph: e}]]]))"},
                {"id": "stop_propagation_effector", "ref": "stop_propagation_effect"},
                {"id": "stop_propagation_effect", "ref": "new_array"},
                {"id": "dispatch_on_graph_click_effector", "ref": "dispatch_custom_event_effect"},
                {"id": "dispatch_on_graph_click_payload"},
                {"id": "dispatch_on_graph_click_effect", "ref": "new_array"},
                {"id": "edit_effects", "ref": "new_array"},
                {"id": "readonly_effects", "ref": "new_array"},
                {"id": "effects", "ref": "if"},
                {"id": "result"},
                {"id": "out", "ref": "hyperapp_action"}
            ],
            "edges": [
                {"from": "in", "to": "out", "as": "args"},
                {"from": "payload", "to": "stop_propagation_effect", "as": "a1"},
                {"from": "display_graph", "to": "save_payload", "as": "display_graph"},
                {"from": "clear_popover", "to": "clear_popover_effect", "as": "a0"},
                {"from": "clear_popover_effect", "to": "save_node_effects", "as": "a1"},
                {"from": "save_effector", "to": "save_effect", "as": "a0"},
                {"from": "save_payload", "to": "save_effect", "as": "a1"},
                {"from": "save_effect", "to": "save_node_effects", "as": "a0"},
                {"from": "save_effector", "to": "save_effect", "as": "a0"},
                {"from": "save_payload", "to": "save_effect", "as": "a1"},
                {"from": "save_effect", "to": "save_node_effects", "as": "a0"},
                {"from": "save_node_effects", "to": "popover_graph_obj", "as": "save"},
                {"from": "save_name", "to": "save_node", "as": "name"},
                {"from": "save_id", "to": "save_node", "as": "id"},
                {"from": "save_node", "to": "popover_graph_actions", "as": "a"},
                {"from": "clear_popover_effect", "to": "export_node_effects", "as": "a1"},
                {"from": "display_graph", "to": "export_payload", "as": "display_graph"},
                {"from": "export_effector", "to": "export_effect", "as": "a0"},
                {"from": "export_payload", "to": "export_effect", "as": "a1"},
                {"from": "export_effect", "to": "export_node_effects", "as": "a0"},
                {"from": "export_effect", "to": "export_node_effects", "as": "a0"},
                {"from": "export_node_effects", "to": "popover_graph_obj", "as": "export"},
                {"from": "export_name", "to": "export_node", "as": "name"},
                {"from": "export_id", "to": "export_node", "as": "id"},
                {"from": "export_node", "to": "popover_graph_actions", "as": "c"},
                {"from": "new_graph_effector", "to": "new_graph_effect", "as": "a0"},
                {"from": "new_graph_effect", "to": "new_graph_node_effects", "as": "a0"},
                {"from": "new_graph_node_effects", "to": "popover_graph_obj", "as": "new"},
                {"from": "new_graph_name", "to": "new_graph_node", "as": "name"},
                {"from": "new_graph_id", "to": "new_graph_node", "as": "id"},
                {"from": "new_graph_node", "to": "popover_graph_actions", "as": "b"},
                {"from": "change_display_graph_id_effector", "to": "change_display_graph_id_effect", "as": "a0"},
                {"from": "change_display_graph_id", "to": "show_edit_text_payload", "as": "oneditconfirm"},
                {"from": "display_graph_path", "to": "show_edit_text_payload", "as": "id"},
                {"from": "name", "to": "show_edit_text_payload", "as": "value"},
                {"from": "id_path", "to": "show_edit_text_payload", "as": "property"},
                {"from": "show_edit_text_effector", "to": "show_edit_text_effect", "as": "a0"},
                {"from": "show_edit_text_payload", "to": "show_edit_text_effect", "as": "a1"},
                {"from": "show_edit_text_effect", "to": "change_display_graph_id_node_value", "as": "a"},
                {"from": "clear_popover_effect", "to": "change_display_graph_id_node_value", "as": "b"},
                {"from": "change_display_graph_id_node_value", "to": "popover_graph_obj", "as": "change_name"},
                {"from": "change_display_graph_id_node_id", "to": "change_display_graph_id_node", "as": "id"},
                {"from": "change_display_graph_id_node_name", "to": "change_display_graph_id_node", "as": "name"},
                {"from": "change_display_graph_id_node", "to": "popover_graph_actions", "as": "d"},
                {"from": "clear_popover_effect", "to": "open_obj", "as": "clear_popover"},
                {"from": "open_graph", "to": "open_obj", "as": "open_graph"},
                {"from": "open_obj", "to": "popover_graph_obj", "as": "open"},
                {"from": "examples", "to": "examples_obj", "as": "examples"},
                {"from": "clear_popover_effect", "to": "examples_obj", "as": "clear_popover"},
                {"from": "open_example_graph", "to": "examples_obj", "as": "open_graph"},
                {"from": "examples_obj", "to": "popover_graph_obj", "as": "examples"},
                {"from": "clear_popover_effect", "to": "popover_graph_obj_actions", "as": "a0"},
                {"from": "popover_graph_obj_actions", "to": "popover_graph_obj", "as": "_value"},
                {"from": "name", "to": "popover_graph", "as": "name"},
                {"from": "empty", "to": "popover_graph_parent_obj", "as": "target"},
                {"from": "name", "to": "popover_graph_parent_obj", "as": "path"},
                {"from": "popover_graph_obj", "to": "popover_graph_parent_obj", "as": "value"},
                {"from": "popover_graph_parent_obj", "to": "popover_graph", "as": "obj", "type": "resolve"},
                {"from": "popover_graph", "to": "show_popover_payload", "as": "popover_graph"},
                {"from": "show_popover_effector", "to": "show_popover_effect", "as": "a0"},
                {"from": "show_popover_payload", "to": "show_popover_effect", "as": "a1"},
                {"from": "stop_propagation_effector", "to": "stop_propagation_effect", "as": "a0"},
                {"from": "payload", "to": "stop_propagation_effect", "as": "a1"},
                {"from": "stop_propagation_effect", "to": "edit_effects", "as": "a1"},
                {"from": "html_id", "to": "dispatch_on_graph_click_payload", "as": "html_id"},
                {"from": "event_name", "to": "dispatch_on_graph_click_payload", "as": "event"},
                {"from": "dispatch_on_graph_click_effector", "to": "dispatch_on_graph_click_effect", "as": "a0"},
                {"from": "dispatch_on_graph_click_payload", "to": "dispatch_on_graph_click_effect", "as": "a1"},
                {"from": "dispatch_on_graph_click_effect", "to": "readonly_effects", "as": "a0"},
                {"from": "show_popover_effect", "to": "edit_effects", "as": "a0"},
                {"from": "edit_effects", "to": "effects", "as": "false"},
                {"from": "readonly_effects", "to": "effects", "as": "true"},
                {"from": "readonly", "to": "effects", "as": "pred"},
                {"from": "effects", "to": "result", "as": "effects"},
                {"from": "state", "to": "result", "as": "state"},
                {"from": "result", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "onclick_graph_action",
            "nodes": [
                {"id": "state", "ref": "arg", "value": "state"},
                {"id": "false", "value": false},
                {"id": "search_payload"},
                {"id": "search_effect", "ref": "search_effect"},
                {"id": "clear_search", "ref": "new_array"},
                {"id": "effects", "ref": "new_array"},
                {"id": "result"},
                {"id": "out", "ref": "hyperapp_action"}
            ],
            "edges": [
                {"from": "false", "to": "search_payload", "as": "search"},
                {"from": "search_payload", "to": "clear_search", "as": "a1"},
                {"from": "search_effect", "to": "clear_search", "as": "a0"},
                {"from": "clear_search", "to": "effects", "as": "a0"},
                {"from": "effects", "to": "result", "as": "effects"},
                {"from": "state", "to": "result", "as": "state"},
                {"from": "result", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "onselectnode",
            "nodes": [
                {
                    "id": "in"
                },
                {
                    "id": "state",
                    "ref": "arg",
                    "value": "state"
                },
                {
                    "id": "html_id",
                    "ref": "arg",
                    "value": "state.html_id"
                },
                {
                    "id": "event",
                    "ref": "arg",
                    "value": "payload.event"
                },
                {
                    "id": "node_id",
                    "ref": "arg",
                    "value": "payload.node_id"
                },
                {
                    "id": "arg_selected",
                    "ref": "arg",
                    "value": "state.selected"
                },
                {
                    "id": "readonly",
                    "ref": "arg",
                    "value": "state.readonly"
                },
                {
                    "id": "arg_display_graph",
                    "ref": "arg",
                    "value": "state.display_graph"
                },
                {
                    "id": "display_graph_nodes",
                    "ref": "arg",
                    "value": "state.display_graph.nodes"
                },
                {
                    "id": "node_el_width",
                    "ref": "arg",
                    "value": "state.node_el_width"
                },
                {
                    "id": "dimensions",
                    "ref": "arg",
                    "value": "state.dimensions"
                },
                {"id": "nodes", "ref": "arg", "value": "state.nodes"},
                {"id": "links", "ref": "arg", "value": "state.links"},
                {
                    "id": "wrapped_node_id",
                    "ref": "wrap_array"
                },
                {
                    "id": "get_selected_node",
                    "args": [
                        "node_id",
                        "nodes"
                    ],
                    "script": "return Object.assign({}, nodes.find(n => n.node_id === node_id), display_graph.nodes.find(n => n.id === node_id))"
                },
                {"id": "show_all_path", "value": "show_all"},
                {
                    "id": "set_selected",
                    "args": [
                        "selected",
                        "state"
                    ],
                    "script": "return {...state, selected: [node_id]}"
                },
                {
                    "id": "display_graph_inputs",
                    "script": "return event.ty === 'down' && node.node_id === selected[0] ? 'expand_contract' : undefined"
                },
                {
                    "id": "display_graph",
                    "ref": "switch"
                },
                {
                    "id": "set_display_graph",
                    "args": [
                        "display_graph",
                        "state"
                    ],
                    "script": "state.display_graph = display_graph ?? state.display_graph; return state"
                },
                {
                    "id": "false",
                    "value": false
                },
                {
                    "id": "should_show_popover",
                    "script": "return !readonly && node_id === selected[0]"
                },
                {
                    "id": "randid",
                    "ref": "arg",
                    "value": "state.randid"
                },
                {"id": "add_node_effect", "ref": "add_node"},
                {"id": "add_edge_effect", "ref": "add_edge"},
                {"id": "paste_node_effect", "ref": "paste_node_effect"},
                {"id": "copy_effect", "ref": "copy_effect"},
                {"id": "delete_node_effect", "ref": "delete_node"},
                {"id": "expand_contract_effect", "ref": "expand_contract_effect"},
                {"id": "open_reference_popover", "ref": "open_reference_popover"},
                {"id": "show_edit_text", "ref": "show_edit_text"},
                {"id": "clear_popover", "ref": "clear_popover_graph"},
                {"id": "update_node", "ref": "update_node_action"},
                {"id": "update_node_effect", "ref": "update_node"},
                {"id": "create_reference_effect", "ref": "create_reference_effect"},
                {
                    "id": "popover_graph_obj",
                    "script": "return {[selected.node_id]: {_value: [[clear_popover]], inputs: {create_input: [[add_node, {node: {id: randid}, select: true}], [add_edge, {from: randid, to: selected.node_id }], [clear_popover]], arg: [[add_node, {node: {id: randid, ref: 'arg'}, select: true}], [add_edge, {from: randid, to: selected.node_id }], [show_edit_text, {id: randid, property:'value', oneditconfirm: update_node, value: ''}], [clear_popover]]}, structure: {delete: [[delete_node, {id: selected.node_id}], [clear_popover]], expand_contract: [[expand_contract, {id: selected.node_id}], [clear_popover]]}, change: {name: [[show_edit_text, {id: selected.node_id, property:'name', position: {x: selected.x, y: selected.y}, oneditconfirm: update_node, value: selected.name}], [clear_popover]], value: [[show_edit_text, {id: selected.node_id, property:'value', position: {x: selected.x, y: selected.y}, oneditconfirm: update_node, value: selected.value}], [clear_popover]], script: [[show_edit_text, {id: selected.node_id, property:'script', position: {x: selected.x, y: selected.y},oneditconfirm: update_node, value: selected.script}], [clear_popover]]}, clipboard: {copy: [[copy_effect, {id: selected.node_id}], [clear_popover]], paste: [[paste_node_effect, {randid}], [clear_popover]]}, reference: {create: [[create_reference_effect, {id: selected.node_id}], [clear_popover]], clear: [[update_node_effect, {id: selected.node_id, properties: {ref: undefined}}], [clear_popover]], copy: [[update_node_effect, {id: selected.node_id, properties: {...nodes.find(n => n.id === selected.ref), id: selected.node_id, ref: undefined}}], [clear_popover]], change: [[show_edit_text, {id: selected.node_id, property: 'ref', position: {x: selected.x, y: selected.y}, oneditconfirm: update_node, value: selected.ref}], [clear_popover]]}}}"
                },
                {"id": "popover_graph_value", "ref": "create_object_graph"},
                {"id": "dispatch_custom_event_effect", "script": "return [(_, payload) => document.getElementById(`${html_id}`).dispatchEvent(new CustomEvent(`selectnode`, {detail: {node: node_id}}))]"},
                {
                    "id": "show_popover_payload"
                },
                {
                    "id": "show_popover_effector",
                    "ref": "show_popover_graph"
                },
                {
                    "id": "show_popover_effect",
                    "ref": "new_array"
                },
                {
                    "id": "stop_propagation_effector",
                    "ref": "stop_propagation_effect"
                },
                {
                    "id": "payload",
                    "ref": "arg",
                    "value": "payload"
                },
                {
                    "id": "stop_propagation_effect",
                    "ref": "new_array"
                },
                {"id": "panzoom_selected_effector", "ref": "arg", "value": "state.panzoom_selected_effect"},
                {"id": "panzoom_selected_effect", "ref": "new_array"},
                {"id": "panzoom_selected_payload"},
                {"id": "clear_search_payload", "value": {"search": false}},
                {"id": "search_effect", "ref": "search_effect"},
                {"id": "clear_search", "ref": "new_array"},
                {
                    "id": "if_show_popover",
                    "ref": "if"
                },
                {
                    "id": "effects",
                    "ref": "new_array"
                },
                {
                    "id": "out",
                    "ref": "update_graph_display"
                }
            ],
            "edges": [
                {
                    "from": "in",
                    "to": "out",
                    "as": "args"
                },
                {
                    "from": "node_id",
                    "to": "selected_inputs",
                    "as": "node_id"
                },
                {
                    "from": "node_id",
                    "to": "get_selected_node",
                    "as": "node_id"
                },
                {
                    "from": "arg_display_graph",
                    "to": "get_selected_node",
                    "as": "display_graph"
                },
                {
                    "from": "nodes",
                    "to": "get_selected_node",
                    "as": "nodes"
                },
                {
                    "from": "get_selected_node",
                    "to": "selected_inputs",
                    "as": "node"
                },
                {
                    "from": "event",
                    "to": "selected_inputs",
                    "as": "event"
                },
                {
                    "from": "node_id",
                    "to": "wrapped_node_id",
                    "as": "value"
                },
                {
                    "from": "wrapped_node_id",
                    "to": "selected",
                    "as": "node_id"
                },
                {
                    "from": "state",
                    "to": "set_selected",
                    "as": "state"
                },
                {
                    "from": "node_id",
                    "to": "set_selected",
                    "as": "node_id"
                },
                {
                    "from": "html_id",
                    "to": "set_selected",
                    "as": "html_id"
                },
                {
                    "from": "set_selected",
                    "to": "set_display_graph",
                    "as": "state"
                },
                {
                    "from": "display_graph",
                    "to": "set_display_graph",
                    "as": "display_graph"
                },
                {
                    "from": "get_selected_node",
                    "to": "display_graph_inputs",
                    "as": "node"
                },
                {
                    "from": "state",
                    "to": "display_graph_inputs"
                },
                {
                    "from": "event",
                    "to": "display_graph_inputs",
                    "as": "event"
                },
                {
                    "from": "display_graph_inputs",
                    "to": "display_graph",
                    "as": "input"
                },
                {
                    "from": "state",
                    "to": "expand_contract"
                },
                {
                    "from": "node_id",
                    "to": "expand_contract",
                    "as": "node_id"
                },
                {
                    "from": "event",
                    "to": "out",
                    "as": "payload"
                },
                {
                    "from": "show_popover_effector",
                    "to": "show_popover_effect",
                    "as": "arg0"
                },
                {
                    "from": "event",
                    "to": "stop_propagation_effect",
                    "as": "a1"
                },
                {
                    "from": "stop_propagation_effector",
                    "to": "stop_propagation_effect",
                    "as": "a0"
                },
                {"from": "randid", "to": "popover_graph_obj", "as": "randid"},
                {"from": "display_graph_nodes", "to": "popover_graph_obj", "as": "nodes"},
                {
                    "from": "get_selected_node",
                    "to": "popover_graph_obj",
                    "as": "selected"
                },
                {"from": "add_node_effect", "to": "popover_graph_obj", "as": "add_node"},
                {"from": "add_edge_effect", "to": "popover_graph_obj", "as": "add_edge"},
                {"from": "delete_node_effect", "to": "popover_graph_obj", "as": "delete_node"},
                {"from": "expand_contract_effect", "to": "popover_graph_obj", "as": "expand_contract"},
                {"from": "open_reference_popover", "to": "popover_graph_obj", "as": "open_reference_popover"},
                {"from": "show_edit_text", "to": "popover_graph_obj", "as": "show_edit_text"},
                {"from": "clear_popover", "to": "popover_graph_obj", "as": "clear_popover"},
                {"from": "update_node", "to": "popover_graph_obj", "as": "update_node"},
                {"from": "update_node_effect", "to": "popover_graph_obj", "as": "update_node_effect"},
                {"from": "copy_effect", "to": "popover_graph_obj", "as": "copy_effect"},
                {"from": "paste_node_effect", "to": "popover_graph_obj", "as": "paste_node_effect"},
                {"from": "create_reference_effect", "to": "popover_graph_obj", "as": "create_reference_effect"},
                {"from": "popover_graph_obj", "to": "popover_graph_value", "as": "obj"},
                {
                    "from": "popover_graph_value",
                    "to": "show_popover_payload",
                    "as": "popover_graph"
                },
                {
                    "from": "show_popover_payload",
                    "to": "show_popover_effect",
                    "as": "arg1"
                },
                {
                    "from": "show_popover_effect",
                    "to": "if_show_popover",
                    "as": "true"
                },
                {
                    "from": "false",
                    "to": "if_show_popover",
                    "as": "false"
                },
                {
                    "from": "node_id",
                    "to": "should_show_popover",
                    "as": "node_id"
                },
                {
                    "from": "readonly",
                    "to": "should_show_popover",
                    "as": "readonly"
                },
                {
                    "from": "arg_selected",
                    "to": "should_show_popover",
                    "as": "selected"
                },
                {
                    "from": "should_show_popover",
                    "to": "if_show_popover",
                    "as": "pred"
                },
                {
                    "from": "arg_selected",
                    "to": "dispatch_custom_event_effect",
                    "as": "selected"
                },
                {
                    "from": "html_id",
                    "to": "dispatch_custom_event_effect",
                    "as": "html_id"
                },
                {
                    "from": "node_id",
                    "to": "dispatch_custom_event_effect",
                    "as": "node_id"
                },
                {
                    "from": "if_show_popover",
                    "to": "effects",
                    "as": "a1"
                },
                {
                    "from": "stop_propagation_effect",
                    "to": "effects",
                    "as": "a0"
                },
                {
                    "from": "dispatch_custom_event_effect",
                    "to": "effects",
                    "as": "a2"
                },
                {
                    "from": "node_id",
                    "to": "panzoom_selected_payload",
                    "as": "selected"
                },
                {"from": "html_id", "to": "panzoom_selected_payload", "as": "html_id"},
                {"from": "dimensions", "to": "panzoom_selected_payload", "as": "dimensions"},
                {"from": "node_el_width", "to": "panzoom_selected_payload", "as": "node_el_width"},
                {"from": "links", "to": "panzoom_selected_payload", "as": "links"},
                {"from": "nodes", "to": "panzoom_selected_payload", "as": "nodes"},
                {"from": "panzoom_selected_payload", "to": "panzoom_selected_effect", "as": "a1"},
                {"from": "panzoom_selected_effector", "to": "panzoom_selected_effect", "as": "a0"},
                {"from": "panzoom_selected_effect", "to": "effects", "as": "a3" },
                {"from": "search_effect", "to": "clear_search", "as": "a0" },
                {"from": "clear_search_payload", "to": "clear_search", "as": "a1" },
                {"from": "clear_search", "to": "effects", "as": "a4" },
                {
                    "from": "effects",
                    "to": "out",
                    "as": "effects",
                    "type": "resolve"
                },
                {
                    "from": "set_selected",
                    "to": "out",
                    "as": "state"
                }
            ]
        },
        {
            "id": "onselectnode_effect",
            "nodes": [
                {"id": "in"},
                {"id": "onselectnode", "ref": "onselectnode"},
                {"id": "out", "ref": "hyperapp_action_effect"}
            ],
            "edges": [
                {"from": "in", "to": "out", "type": "ref", "as": "args"},
                {"from": "onselectnode", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "onselectnode_action",
            "nodes": [
                {"id": "in"},
                {"id": "onselectnode", "ref": "onselectnode"},
                {"id": "out", "ref": "hyperapp_action"}
            ],
            "edges": [
                {"from": "in", "to": "out", "type": "ref", "as": "args"},
                {"from": "onselectnode", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "open_edge_popover",
            "nodes": [
                {"id": "state", "ref": "arg", "value": "state"},
                {"id": "edge", "ref": "arg", "value": "state.edit_id"},
                {"id": "edge_as", "ref": "arg", "value": "state.edit_id.as"},
                {"id": "state", "ref": "arg", "value": "state"},
                {"id": "readonly", "ref": "arg", "value": "state.readonly"},
                {"id": "randid", "ref": "arg", "value": "state.randid"},
                {"id": "display_graph_nodes", "ref": "arg", "value": "state.display_graph.nodes"},
                {"id": "links", "ref": "arg", "value": "state.links"},
                {"id": "event", "ref": "arg", "value": "payload.event"},
                {"id": "as_path", "value": "as"},
                {"id": "clear_popover", "ref": "clear_popover_graph"},
                {"id": "clear_popover_type", "ref": "clear_popover_graph"},
                {"id": "update_edge", "ref": "update_edge"},
                {"id": "update_edge_action", "ref": "update_edge_action"},
                {"id": "show_edit_text", "ref": "show_edit_text"},
                {"id": "insert_node", "ref": "insert_node"},
                {"id": "update_sim", "ref": "arg", "value": "update_sim_effect"},
                {"id": "type_popover_actions", "script": "return {change_type: {_value: [[clear_popover]], ref: [[update_edge, {id: edge, properties: {type: 'ref'}}], [clear_popover]], none: [[update_edge, {id: edge, properties: {type: undefined}}], [clear_popover]], resolve: [[update_edge, {id: edge, properties: {type: 'resolve'}}], [clear_popover]]}}"},
                {"id": "type_popover", "ref": "create_object_graph"},
                {"id": "type_popover_name", "value": "change_type"},
                {"id": "to_name", "script": "return nodes.find(n => n.id === edge.to).name"},
                {"id": "popover_graph_actions", "script": "return {edit_edge: {_value: [[clear_popover]], 'change_type': [[show_popover_graph, {popover_graph: type_popover}]],'change_as': [[show_edit_text, {id: edge, property: 'as', value: edge.as, oneditconfirm: update_edge}], [clear_popover]], 'insert': {node: [[insert_node, {node: {id: randid}, edge, in_node: false}], [clear_popover]], in_node: [[insert_node, {node: {id:  randid, name: (to_name ?? edge.to) + '/in'}, edge, in_node: true}], [clear_popover]]}}}"},
                {"id": "popover_graph_name", "value": "change edge"},
                {"id": "popover_graph", "ref": "create_object_graph"},
                {"id": "show_popover_graph_payload"},
                {"id": "show_popover_graph_effector", "ref": "show_popover_graph"},
                {"id": "show_popover_graph", "ref": "new_array"},
                {"id": "effects", "ref": "new_array"},
                {"id": "result"},
                {"id": "out", "ref": "hyperapp_action"}
            ],
            "edges": [
                {"from": "type_popover_actions", "to": "type_popover", "as": "obj"},
                {"from": "type_popover_name", "to": "type_popover", "as": "name"},
                {"from": "edge", "to": "type_popover_actions", "as" :"edge"},
                {"from": "clear_popover_type", "to": "type_popover_actions", "as": "clear_popover"},
                {"from": "update_edge", "to": "type_popover_actions", "as": "update_edge"},
                {"from": "update_edge_action", "to": "popover_graph_actions", "as": "update_edge"},
                {"from": "type_popover", "to": "popover_graph_actions", "as": "type_popover"},
                {"from": "edge", "to": "clear_popover", "as" :"edge"},
                {"from": "edge", "to": "to_name", "as": "edge"},
                {"from": "display_graph_nodes", "to": "to_name", "as": "nodes"},
                {"from": "to_name", "to": "popover_graph_actions", "as": "to_name"},
                {"from": "clear_popover", "to": "popover_graph_actions", "as": "clear_popover"},
                {"from": "insert_node", "to": "popover_graph_actions", "as": "insert_node"},
                {"from": "edge", "to": "popover_graph_actions", "as" :"edge"},
                {"from": "randid", "to": "popover_graph_actions", "as" :"randid"},
                {"from": "show_edit_text", "to": "popover_graph_actions", "as": "show_edit_text"},
                {"from": "update_sim", "to": "popover_graph_actions", "as" :"update_sim"},
                {"from": "show_popover_graph_effector", "to": "popover_graph_actions", "as": "show_popover_graph"},
                {"from": "popover_graph_actions", "to": "popover_graph", "as": "obj"},
                {"from": "popover_graph_name", "to": "popover_graph", "as": "name"},
                {"from": "popover_graph", "to": "show_popover_graph_payload", "as": "popover_graph"},
                {"from": "show_popover_graph_effector", "to": "show_popover_graph", "as": "a0"},
                {"from": "show_popover_graph_payload", "to": "show_popover_graph", "as": "a1"},
                {"from": "show_popover_graph", "to": "effects", "as": "a0"},
                {"from": "effects", "to": "result", "as": "effects"},
                {"from": "state", "to": "result", "as": "state"},
                {"from": "result", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "onclick_edge",
            "out": "out",
            "nodes": [
                {"id": "in"},
                {"id": "edge", "ref": "arg", "value": "payload.edge"},
                {"id": "edge_as", "ref": "arg", "value": "payload.edge.as"},
                {"id": "state", "ref": "arg", "value": "state"},
                {"id": "readonly", "ref": "arg", "value": "state.readonly"},
                {"id": "randid", "ref": "arg", "value": "state.randid"},
                {"id": "display_graph_nodes", "ref": "arg", "value": "state.display_graph.nodes"},
                {"id": "links", "ref": "arg", "value": "state.links"},
                {"id": "event", "ref": "arg", "value": "payload.event"},
                {"id": "as_path", "value": "as"},
                {"id": "update_edge", "ref": "update_edge"},
                {"id": "update_edge_action", "ref": "update_edge_action"},
                {"id": "show_edit_text", "ref": "show_edit_text"},
                {"id": "edit_text_position", "script": "return links.filter(l => l.source.node_id === edge.from && l.target.node_id === edge.to).map(l => ({x: (l.source.x + l.target.x) * 0.5, y: (l.source.y + l.target.y) * 0.5}))[0]"},
                {"id": "open_edge_popover", "ref": "open_edge_popover"},
                {"id": "edit_edge_as_payload"},
                {"id": "edit_edge_as", "ref": "new_array"},
                {"id": "stop_propagation_effector", "ref": "stop_propagation_effect"},
                {"id": "stop_propagation", "ref": "new_array"},
                {"id": "editable_effects", "ref": "new_array"},
                {"id": "readonly_effects", "ref": "new_array"},
                {"id": "effects", "ref": "if"},
                {"id": "result"},
                {"id": "out", "ref": "hyperapp_action"}
            ],
            "edges": [
                {"from": "in", "to": "out", "as": "args"},
                {"from": "edge", "to": "edit_text_position", "as" :"edge"},
                {"from": "links", "to": "edit_text_position", "as": "links"},
                {"from": "edit_text_position", "to": "edit_edge_as_payload", "as": "position"},
                {"from": "as_path", "to": "edit_edge_as_payload", "as": "property"},
                {"from": "update_edge_action", "to": "edit_edge_as_payload", "as": "oneditconfirm"},
                {"from": "edge", "to": "edit_edge_as_payload", "as": "id"},
                {"from": "edge_as", "to": "edit_edge_as_payload", "as": "value"},
                {"from": "open_edge_popover", "to": "edit_edge_as_payload", "as": "oneditmore"},
                {"from": "edit_edge_as_payload", "to": "edit_edge_as", "as": "a1"},
                {"from": "show_edit_text", "to": "edit_edge_as", "as": "a0"},
                {"from": "edit_edge_as", "to": "editable_effects", "as": "a0"},
                {"from": "event", "to": "stop_propagation_payload", "as": "event"},
                {"from": "stop_propagation_effector", "to": "stop_propagation", "as": "a0"},
                {"from": "event", "to": "stop_propagation", "as": "a1"},
                {"from": "stop_propagation", "to": "editable_effects", "as": "a1"},
                {"from": "editable_effects", "to": "effects", "as": "false"},
                {"from": "readonly_effects", "to": "effects", "as": "true"},
                {"from": "readonly", "to": "effects", "as": "pred"},
                {"from": "state", "to": "result", "as": "state"},
                {"from": "effects", "to": "result", "as": "effects"},
                {"from": "result", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "editor_dom_type",
            "value": "div"
        },
        {
            "id": "editor_props",
            "value": {"key": "editor"}
        },
        {
            "id": "popover_dimensions",
            "value": {"x": 400, "y": 800}
        },
        {
            "id": "html_id",
            "ref": "arg",
            "value": "html_id"
        },
        {
            "id": "render_popover_graph_effect",
            "script": "return (dispatch, payload) => requestAnimationFrame(() => {payload = _lib.no.resolve(payload); if(payload.popover_dispatch) { payload.popover_dispatch(s => [{...s, display_graph: payload.display_graph, selected: [payload.display_graph.out]}, [s.update_sim_effect, {...s, display_graph: payload.display_graph}], [s.update_hyperapp] ]) } else { const popover_dispatch = _lib.no.executeGraphNode({graph: payload.graph})('initialize_hyperapp_app')({graph: payload.graph, display_graph: payload.display_graph, html_id: `${payload.html_id}-popover`, dimensions: payload.dimensions, readonly: true, hide_types: true, sim_update_alpha: 0.3, static: true, hash: ''}).dispatch; dispatch(s => ({...s, popover_dispatch}));}})"
        },
        {
            "id": "handle_popover_event",
            "out": "out",
            "nodes": [
                {"id": "in"},
                {"id": "state", "ref": "arg", "value": "state"},
                {"id": "randid", "ref": "arg", "value": "state.randid"},
                {"id": "selected", "ref": "arg", "value": "state.selected"},
                {"id": "popover_graph", "ref": "arg", "value": "state.popover_graph"},
                {"id": "payload", "ref": "arg", "value": "payload"},
                {"id": "clear_popover_effect", "ref": "clear_popover_graph"},
                {"id": "effects", "script": "return popover_graph.nodes.find(n => n.id === payload.detail.node).value"},
                {"id": "new_state"},
                {"id": "out", "ref": "hyperapp_action"}
            ],
            "edges": [
                {"from": "in", "to": "new_state", "as": "args"},
                {"from": "state", "to": "new_state", "as": "state"},
                {"from": "selected", "to": "effects", "as": "selected"},
                {"from": "popover_graph", "to": "effects", "as": "popover_graph"},
                {"from": "clear_popover_effect", "to": "effects", "as": "clear_popover"},
                {"from": "randid", "to": "effects", "as": "randid"},
                {"from": "payload", "to": "effects", "as": "payload"},
                {"from": "effects", "to": "new_state", "as": "effects"},
                {"from" :"new_state", "to": "out", "as": "fn", "type": "ref"}
            ]
        },
        {
            "id": "editor",
            "out": "out",
            "nodes": [
                {
                    "id": "in"
                },
                {
                    "id": "wrapper",
                    "ref": "run_h"
                },
                {
                    "id": "graph",
                    "ref": "arg",
                    "value": "graph"
                },
                {
                    "id": "display_graph",
                    "ref": "arg",
                    "value": "display_graph"
                },
                {
                    "id": "show_result",
                    "ref": "arg",
                    "value": "show_result"
                },
                {
                    "id": "show_all",
                    "ref": "arg",
                    "value": "show_all"
                },
                {
                    "id": "html_id",
                    "ref": "arg",
                    "value": "html_id"
                },
                {
                    "id": "result_display",
                    "ref": "arg",
                    "value": "result_display"
                },
                {
                    "id": "editing",
                    "ref": "arg",
                    "value": "editing"
                },
                {
                    "id": "args_display",
                    "ref": "arg",
                    "value": "args_display"
                },
                {
                    "id": "update_sim",
                    "ref": "arg",
                    "value": "update_sim"
                },
                {
                    "id": "popover_graph",
                    "ref": "arg",
                    "value": "popover_graph"
                },
                {
                    "id": "readonly",
                    "ref": "arg",
                    "value": "readonly"
                },
                {
                    "id": "error",
                    "ref": "arg",
                    "value": "error"
                },
                {
                    "id": "search",
                    "ref": "arg",
                    "value": "search"
                },
                {
                    "id": "result_wrapper",
                    "ref": "run_h"
                },
                {
                    "id": "wrapper_dom_type",
                    "value": "div"
                },
                {
                    "id": "wrapper_props",
                    "value": {}
                },
                {
                    "id": "wrapper_children",
                    "script": "return [styles.el, node_editor.el, !readonly && editing !== false && edit_text.el, !readonly && popover_graph && popover_graph_h.el.el, !!result_display && result_display.el, !editing && !show_all && args_display && args_display.el, !!error && error_display.el, menu.el].filter(e => e)"
                },
                {
                    "id": "styles",
                    "nodes": [
                        {"id": "in"},
                        {"id": "style_content", "value": "#node-editor { position: relative; width: 100%; height: 100vh; color: white; font-family: consolas; overflow: hidden; } #node-editor-editor.hash-view { background-color: unset; } svg { user-select: none; } .graph-ui { display: flex; position: absolute; right: 100px; top: 100px; flex-direction: row; gap: 8px; } .graph-ui ion-icon { cursor: pointer; width: 1.5em; height: 1.5em; color: #ccc; } .graph-ui ion-icon:hover { color: #fff; } .edit-value { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #00000011; } .edit-value .more { cursor: pointer; } .edit-value .centering { position: absolute; width: 32vw; display: flex; flex-direction: column; } .edit-value.none { left: -1000%; } .edit-value textarea { width: 32vw; font-size: (1em + 1vh); outline: none; resize: none; } .edit-value label { font-size: calc(1em + 2vh) } .edit-value textarea { height: 64em; } .edit-value.ref input { position:relative; left: 0; } .edit-value .input { width: 256px; } .search-input.hidden { left: -1000px; } #arrow polyline { stroke: #fff; stroke-width: 2; fill: none } .node { cursor: pointer; } .node.hover { opacity: 1 !important; } .node .fill { opacity: 0; } .node .shape { animation_: 2s blink infinite; fill: #66ccff; } .node.hover .shape { stroke-width: 2; stroke: #3fc } .node.selected .shape { fill: #fcc; } .node .shape.script { transform-box: fill-box; transform-origin: 50% 50%; transform: rotate(45deg); fill: none; stroke-width: 2px; stroke: #66ccff; } .node.selected .shape.script { stroke: #fcc; } .node .shape.none { stroke-width: 2px; stroke: #66ccff; } .node .shape.error { fill: #FF0000 !important; } .node.selected .shape.none { stroke: #fcc; } .args { position: absolute; top: 0; left: 0; z-index: 10; border: 1px solid white; background: black; padding: .4em; max-width: 256px; color: white; } /* result props */ .result { position: fixed; bottom: 100px; left: 100px; max-width: 33%; } .result.error { color: red; } text { user-select: none; fill: white; } .link.selected { stroke: red; } .link { stroke: #ccc; } svg.edge-info.selected rect { fill: red; } .insert-node { cursor: pointer; stroke: #fff; stroke-width: 32; stroke-opacity: 1; } .insert-node .circle{ fill-opacity: 0.5; } .node text .primary { font-weight: bold; } .node text .secondary { font-style: italic; } .show-key { position: fixed; right: 100px; top: 100px; font-size: 2em;; font-family: consolas; } .edge-info { filter: url(\"#flood-background\"); padding: 4px; cursor: pointer; } .edge-info.selected { filter: url(\"#selected-flood-background\"); } .error.main { position: absolute; top: 0; left: 0; width: 25vw; color: red; padding: 1em; height: 8em; z-index: 100; } /* popover */ #node-editor-popover { position: fixed; width: 100vw; height: 100vh; z-index: 100; top: 0; left: 0; background: #000000EE; } .popover { position: absolute; z-index: 100; background: #000000EE; }"},
                        {"id": "style_h_text", "ref": "html_text"},
                        {"id": "style_dom_type", "value": "style"},
                        {"id": "out", "ref": "html_element"}
                    ],
                    "edges": [
                        {"from": "in", "to": "out", "as": "args", "type": "ref"},
                        {"from": "style_h_text", "to": "out", "as": "children"},
                        {"from": "style_content", "to": "style_h_text", "as": "text"},
                        {"from": "style_dom_type", "to": "out", "as": "dom_type"}
                    ]
                },
                {
                    "id": "edit_text",
                    "nodes": [
                        {
                            "id": "in"
                        },
                        {
                            "id": "html_id",
                            "ref": "arg",
                            "value": "html_id"
                        },
                        {
                            "id": "display_graph_nodes",
                            "ref": "arg",
                            "value": "display_graph.nodes"
                        },
                        {
                            "id": "nodes",
                            "ref": "arg",
                            "value": "nodes"
                        },
                        {
                            "id": "selected",
                            "ref": "arg",
                            "value": "selected.0"
                        },
                        {
                            "id": "dimensions",
                            "ref": "arg",
                            "value": "dimensions"
                        },
                        {"id": "display_graph", "ref": "arg", "value": "display_graph"},
                        {"id": "selected_edge", "ref": "arg", "value": "selected_edge"},
                        {"id": "editing", "ref": "arg", "value": "editing"},
                        {"id": "levels", "ref": "arg", "value": "levels"},
                        {"id": "edit_value", "ref": "arg", "value": "edit_value"},
                        {"id": "on_editmore_action", "ref": "arg", "value": "oneditmore"},
                        {"id": "selected_node", "script": "return nodes.find(n => n.node_id === selected)"},
                        {"id": "ref_nodes", "script": "return nodes.filter(n => !(n.ref || levels.level_by_node.has(n.id)) && (n.script || n.nodes))"},
                        {
                            "id": "edit_text",
                            "ref": "html_element"
                        },
                        {
                            "id": "edit_text_dom_type",
                            "value": "div"
                        },
                        {"id": "edit_text_label_wrapper_children", "ref": "new_array"},
                        {"id": "edit_text_label_wrapper", "ref": "html_element"},
                        {
                            "id": "edit_text_input",
                            "ref": "html_element"
                        },
                        {
                            "id": "edit_text_textarea",
                            "ref": "html_element"
                        },
                        {
                            "id": "confirm_edit_text",
                            "ref": "confirm_edit_text"
                        },
                        {"id": "edit_position", "ref": "arg", "value": "edit_position"},
                        {"id": "svg_offset", "ref": "arg", "value": "svg_offset"},
                        {"id": "edit_html_position", "script": "return {x: Math.min(dimensions.x - 256 * 1.25, (position?.x ?? 0) * (svg_offset?.scale ?? 1) + (svg_offset?.x ?? 0)), y: Math.min(dimensions.y - 64, (position?.y ?? 0) * (svg_offset?.scale ?? 1) + (svg_offset?.y ?? 0))}"},
                        {
                            "id": "edit_text_base_props",
                            "script": "return {id: `${html_id}-edit-value`, class: {'edit-value': true, [editing]: true}, onclick: (s, payload) => (payload.preventDefault(), payload.stopPropagation(), [s, [confirm_edit_text, payload]])}"
                        },
                        {
                            "id": "edit_text_props"
                        },
                        {"id": "edit_text_edit_box", "ref": "switch"},
                        {
                            "id": "centering_wrapper_children",
                            "args": [
                                "label",
                                "edit_box",
                                "types"
                            ],
                            "script": "return [label.el, edit_box?.el, editing === 'ref' ? ref_datalist.el : false]"
                        },
                        {
                            "id": "edit_text_textarea_dom_type",
                            "args": ["editing"],
                            "script": "return 'textarea'"
                        },
                        {
                            "id": "edit_text_textarea_props",
                            "script": "const start_value = edit_value ?? (!editing ? '' : (selected_edge ? display_graph.edges.find(e => e.from === selected_edge.from && e.to === selected_edge.to) : display_graph.nodes.find(n => n.id === selected))[editing]); return {id: `${html_id}-textarea`, class: {textarea: true, [editing]: true}, onclick: (s, payload) => (payload.stopPropagation(), s), value: typeof(start_value) === 'string' ? start_value : JSON.stringify(start_value), oninput: (s, payload) => ({...s, edit_value: payload.target.value}), onfocus: (s, payload) => [s, [() => payload.target.setSelectionRange(0, payload.target.value.length)]] }"
                        },
                        {
                            "id": "edit_text_input_dom_type",
                            "args": ["editing"],
                            "script": "return 'input'"
                        },
                        {
                            "id": "edit_text_input_props",
                            "script": "const start_value = edit_value ?? (!editing ? '' : (selected_edge ? display_graph.edges.find(e => e.from === selected_edge.from && e.to === selected_edge.to) : display_graph.nodes.find(n => n.id === selected))[editing]); return Object.assign({id: `${html_id}-edit-text`, class: {input: true, [editing]: true}, value: typeof(start_value) === 'string' ? start_value : JSON.stringify(start_value), onclick: (s, payload) => (payload.stopPropagation(), s), onkeydown: (s, payload) => [s, (payload.key === 'Enter' ? (payload.stopPropagation(), [confirm_edit_text, payload]): false)], oninput: (s, payload) => ({...s, edit_value: payload.target.value}), onfocus: (s, payload) => [s, [() => payload.target.setSelectionRange(0, payload.target.value.length)]], onchange: (s, payload) => ([s, s.editing && [confirm_edit_text, payload]])}, editing === 'ref' ? {list: 'node-options', type: 'text'} : {})"
                        },
                        {
                            "id": "edit_text_label",
                            "ref": "html_element"
                        },
                        {
                            "id": "edit_text_label_dom_type",
                            "value": "label"
                        },
                        {"id":"edit_text_label_props", "script": "return {for: `${html_id}-edit-text`}"},
                        {
                            "id": "edit_text_label_text",
                            "ref": "html_text"
                        },
                        {"id": "edit_text_more_props", "script": "return {onclick: on_editmore_action, class: {more: true, hydrated: true, md: true}}"},
                        {"id": "edit_text_more_icon", "value": "ellipsis-vertical-outline"},
                        {"id": "edit_text_more", "ref": "icon"},
                        {"id": "editing_path", "value": "editing"},
                        {
                            "id": "editing",
                            "ref": "arg",
                            "value": "editing"
                        },
                        {
                            "id": "ref_datalist",
                            "name": "ref_datalist",
                            "out": "xtr0qj6",
                            "nodes": [
                                {
                                    "id": "xtr0qj6",
                                    "ref": "html_element",
                                    "name": "ref_datalist"
                                },
                                {
                                    "id": "0msbgbm",
                                    "ref": "map"
                                },
                                {
                                    "id": "buav28h",
                                    "value": "datalist"
                                },
                                {
                                    "id": "ql1hqrf"
                                },
                                {
                                    "id": "jppiihp/jppiihp",
                                    "ref": "html_element"
                                },
                                {
                                    "id": "h2altl0",
                                    "ref": "arg",
                                    "value": "ref_nodes"
                                },
                                {
                                    "id": "jgaye79",
                                    "value": "node-options"
                                },
                                {
                                    "id": "tk685lj"
                                },
                                {
                                    "id": "2xycz42",
                                    "value": "option"
                                },
                                {
                                    "id": "8v5dk5c",
                                    "ref": "html_text"
                                },
                                {
                                    "id": "jppiihp/ci554ww",
                                    "ref": "arg",
                                    "value": "element.id"
                                },
                                {
                                    "id": "n5dpir5",
                                    "ref": "default"
                                },
                                {
                                    "id": "9q28w9y",
                                    "ref": "arg",
                                    "value": "element.name"
                                },
                                {
                                    "id": "6s0wcu9",
                                    "ref": "arg",
                                    "value": "element.id"
                                }
                            ],
                            "edges": [
                                {
                                    "from": "0msbgbm",
                                    "to": "xtr0qj6",
                                    "as": "children"
                                },
                                {
                                    "from": "buav28h",
                                    "to": "xtr0qj6",
                                    "as": "dom_type"
                                },
                                {
                                    "from": "ql1hqrf",
                                    "to": "xtr0qj6",
                                    "as": "props"
                                },
                                {
                                    "from": "jppiihp/jppiihp",
                                    "to": "0msbgbm",
                                    "as": "fn",
                                    "type": "ref"
                                },
                                {
                                    "from": "h2altl0",
                                    "to": "0msbgbm",
                                    "as": "array"
                                },
                                {
                                    "from": "jgaye79",
                                    "to": "ql1hqrf",
                                    "as": "id"
                                },
                                {
                                    "from": "tk685lj",
                                    "to": "jppiihp/jppiihp",
                                    "as": "props"
                                },
                                {
                                    "from": "2xycz42",
                                    "to": "jppiihp/jppiihp",
                                    "as": "dom_type"
                                },
                                {
                                    "from": "8v5dk5c",
                                    "to": "jppiihp/jppiihp",
                                    "as": "children"
                                },
                                {
                                    "from": "jppiihp/ci554ww",
                                    "to": "tk685lj",
                                    "as": "value"
                                },
                                {
                                    "from": "n5dpir5",
                                    "to": "8v5dk5c",
                                    "as": "text"
                                },
                                {
                                    "from": "9q28w9y",
                                    "to": "n5dpir5",
                                    "as": "value"
                                },
                                {
                                    "from": "6s0wcu9",
                                    "to": "n5dpir5",
                                    "as": "otherwise"
                                }
                            ]
                        },
                        {
                            "id": "get_nodes",
                            "ref": "arg",
                            "value": "display_graph.nodes"
                        },
                        {
                            "id": "get_id",
                            "script": "return node.id"
                        },
                        {"id": "centering_wrapper_dom_type", "value": "div"},
                        {"id": "centering_wrapper_props", "script": "return {class: {centering: true}, style: {left: `${position.x}px`, top: `${position.y}px`} }"},
                        {
                            "id": "centering_wrapper",
                            "ref": "html_element"
                        },
                        {
                            "id": "edit_text_children",
                            "ref": "new_array"
                        },
                        {"id": "edit_text_el_wrapper", "script": "return et.el"},
                        {
                            "id": "out"
                        }
                    ],
                    "edges": [
                        {"from": "selected", "to": "edit_text_textarea_props", "as": "selected"},
                        {"from": "selected_edge", "to": "edit_text_textarea_props", "as": "selected_edge"},
                        {"from": "display_graph", "to": "edit_text_textarea_props", "as": "display_graph"},
                        {"from": "edit_value", "to": "edit_text_textarea_props", "as": "edit_value"},
                        {"from": "editing", "to": "edit_text_textarea_props", "as": "editing"},
                        {"from": "selected", "to": "edit_text_textarea_props", "as": "selected"},
                        {"from": "selected_edge", "to": "edit_text_input_props", "as": "selected_edge"},
                        {"from": "display_graph", "to": "edit_text_input_props", "as": "display_graph"},
                        {"from": "edit_value", "to": "edit_text_input_props", "as": "edit_value"},
                        {"from": "editing", "to": "edit_text_input_props", "as": "editing"},
                        {"from": "selected", "to": "edit_text_input_props", "as": "selected"},
                        {"from": "selected", "to": "selected_node", "as": "selected"},
                        {"from": "nodes", "to": "selected_node", "as": "nodes"},
                        {"from": "selected_node", "to": "centering_wrapper_props", "as": "node"},
                        {"from": "edit_text", "to": "edit_text_el_wrapper", "as": "et"},
                        {"from": "editing", "to": "edit_text_edit_box", "as": "input"},
                        {"from": "editing", "to": "centering_wrapper_children", "as": "editing"},
                        {
                            "from": "edit_text_el_wrapper",
                            "to": "out",
                            "as": "el"
                        },
                        {
                            "from": "edit_text_dom_type",
                            "to": "edit_text",
                            "as": "dom_type"
                        },
                        {
                            "from": "html_id",
                            "to": "edit_text_base_props",
                            "as": "html_id"
                        },
                        {
                            "from": "edit_text_base_props",
                            "to": "edit_text_props"
                        },
                        {
                            "from": "edit_text_props",
                            "to": "edit_text",
                            "as": "props"
                        },
                        {
                            "from": "centering_wrapper",
                            "to": "edit_text",
                            "as": "children"
                        },
                        {"from": "dimensions", "to": "edit_html_position", "as": "dimensions"},
                        {"from": "edit_position", "to": "edit_html_position", "as": "position"},
                        {"from": "svg_offset", "to": "edit_html_position", "as": "svg_offset"},
                        {"from": "edit_html_position", "to": "centering_wrapper_props", "as": "position"},
                        {
                            "from": "html_id",
                            "to": "edit_text_input_props",
                            "as": "html_id"
                        },
                        {
                            "from": "confirm_edit_text",
                            "to": "edit_text_input_props",
                            "as": "confirm_edit_text"
                        },
                        {
                            "from": "edit_text_input_props",
                            "to": "edit_text_input",
                            "as": "props"
                        },
                        {
                            "from": "edit_text_input_dom_type",
                            "to": "edit_text_input",
                            "as": "dom_type"
                        },
                        {
                            "from": "edit_text_input",
                            "to": "edit_text_edit_box",
                            "as": "otherwise"
                        },
                        {
                            "from": "edit_text_textarea",
                            "to": "edit_text_edit_box",
                            "as": "script"
                        },
                        {
                            "from": "edit_text_edit_box",
                            "to": "centering_wrapper_children",
                            "as": "edit_box"
                        },
                        {"from": "levels", "to": "ref_nodes", "as": "levels"},
                        {"from": "nodes", "to": "ref_nodes", "as": "nodes"},
                        {"from": "display_graph_nodes", "to": "ref_nodes", "as": "nodes"},
                        {"from": "ref_nodes", "to": "ref_datalist", "as": "ref_nodes"},
                        {
                            "from": "ref_datalist",
                            "to": "centering_wrapper_children",
                            "as": "ref_datalist"
                        },
                        {
                            "from": "html_id",
                            "to": "edit_text_textarea_props",
                            "as": "html_id"
                        },
                        {
                            "from": "edit_text_textarea_props",
                            "to": "edit_text_textarea",
                            "as": "props"
                        },
                        {
                            "from": "edit_text_textarea_dom_type",
                            "to": "edit_text_textarea",
                            "as": "dom_type"
                        },
                        {
                            "from": "html_id",
                            "to": "edit_text_label_props",
                            "as": "html_id"
                        },
                        {"from": "edit_text_more", "to": "edit_text_label_wrapper_children", "as": "a1"},
                        {"from": "edit_text_label", "to": "edit_text_label_wrapper_children", "as": "a0"},
                        {"from": "edit_text_label_wrapper_children", "to": "edit_text_label_wrapper", "as": "children"},
                        {
                            "from": "edit_text_label_wrapper",
                            "to": "centering_wrapper_children",
                            "as": "label"
                        },
                        {
                            "from": "edit_text_label_props",
                            "to": "edit_text_label",
                            "as": "props"
                        },
                        {
                            "from": "edit_text_label_dom_type",
                            "to": "edit_text_label",
                            "as": "dom_type"
                        },
                        {
                            "from": "edit_text_label_text",
                            "to": "edit_text_label",
                            "as": "children"
                        },
                        {"from": "on_editmore_action", "to": "edit_text_more_props", "as": "on_editmore_action"},
                        {"from": "edit_text_more_props", "to": "edit_text_more", "as": "props"},
                        {"from": "edit_text_more_icon", "to": "edit_text_more", "as": "icon"},
                        {
                            "from": "in",
                            "to": "get_nodes"
                        },
                        {
                            "from": "get_nodes",
                            "to": "get_id",
                            "as": "node"
                        },
                        {
                            "from": "get_id",
                            "to": "id_text",
                            "as": "text"
                        },
                        {
                            "from": "editing",
                            "to": "edit_text_label_text",
                            "as": "text"
                        },
                        {
                            "from": "editing",
                            "to": "edit_text_base_props",
                            "as": "editing"
                        },
                        {
                            "from": "confirm_edit_text",
                            "to": "edit_text_base_props",
                            "as": "confirm_edit_text"
                        },
                        {"from": "centering_wrapper_dom_type", "to": "centering_wrapper", "as": "dom_type"},
                        {"from": "centering_wrapper_props", "to": "centering_wrapper", "as": "props"},
                        {"from": "centering_wrapper_children", "to": "centering_wrapper", "as": "children"},
                        {"from": "centering_wrapper", "to": "edit_text_children", "as": "a0"},
                        {"from": "edit_text_children", "to": "edit_text", "as": "children"}
                    ]
                },
                {
                    "id": "popover_graph_h",
                    "nodes": [
                        {
                            "id": "html_id",
                            "ref": "arg",
                            "value": "html_id"
                        },
                        {
                            "id": "update_sim",
                            "ref": "arg",
                            "value": "update_sim"
                        },
                        {
                            "id": "randid",
                            "ref": "arg",
                            "value": "randid"
                        },
                        {
                            "id": "handle_popover_event",
                            "ref": "handle_popover_event"
                        },
                        {
                            "id": "clear_popover",
                            "ref": "clear_popover_graph"
                        },
                        {
                            "id": "props",
                            "script": "return {id: `${html_id}-popover`, class: {popover: true}, key:  `${html_id}-popover`, onselectnode: handle_popover_event, ongraphclick: (s, p) => [s]}"
                        },
                        {
                            "id": "dom_type",
                            "value": "div"
                        },
                        {"id": "out", "ref": "html_element"}
                    ],
                    "edges": [
                        {"from": "update_sim", "to": "props", "as": "update_sim"},
                        {"from": "handle_popover_event", "to": "props", "as": "handle_popover_event"},
                        {"from": "clear_popover", "to": "props", "as": "clear_popover"},
                        {"from": "props", "to": "out", "as": "props"},
                        {"from": "html_id", "to": "props", "as": "html_id"},
                        {"from": "dom_type", "to": "out", "as": "dom_type"}
                    ]
                },
                {
                    "id": "popover_graph_h_wrapper"
                },
                {
                    "id": "result",
                    "nodes": [
                        {
                            "id": "in"
                        },
                        {
                            "id": "error",
                            "ref": "arg",
                            "value": "error"
                        },
                        {
                            "id": "html_id",
                            "ref": "arg",
                            "value": "html_id"
                        },
                        {
                            "id": "get_node",
                            "args": [
                                "display_graph",
                                "selected"
                            ],
                            "script": "return display_graph.nodes.find(n => n.id === selected[0])"
                        },
                        {
                            "id": "get_type",
                            "args": [
                                "ref",
                                "script",
                                "value",
                                "nodes"
                            ],
                            "script": "return ref?.display_type ? ref.display_type : typeof value !== 'undefined' && typeof value !== 'object' ? typeof value : ref ? (ref.node_type ?? ref) : nodes ? 'graph' : script ? 'script' : 'object'"
                        },
                        {
                            "id": "result",
                            "ref": "arg",
                            "value": "result"
                        },
                        {
                            "id": "display_graph",
                            "ref": "arg",
                            "value": "display_graph"
                        },
                        {
                            "id": "container_dom_type",
                            "value": "div"
                        },
                        {
                            "id": "container_props",
                            "args": [
                                "error"
                            ],
                            "script": "return {class: {error: error ? 'error' : '', result: true}, id: `${html_id}-result`}"
                        },
                        {
                            "id": "container_children_inputs",
                            "script": "return error? ['error_display'] : ['display']"
                        },
                        {
                            "id": "container_children",
                            "ref": "switch"
                        },
                        {
                            "id": "container",
                            "ref": "html_element"
                        },
                        {
                            "id": "text_value",
                            "args": [
                                "result",
                                "error"
                            ],
                            "script": "return error ?? result ?? ''"
                        },
                        {
                            "id": "out"
                        }
                    ],
                    "edges": [
                        {
                            "from": "in",
                            "to": "container_props"
                        },
                        {
                            "from": "in",
                            "to": "get_node"
                        },
                        {
                            "from": "in",
                            "to": "get_node_display"
                        },
                        {
                            "from": "in",
                            "to": "get_error_display"
                        },
                        {
                            "from": "in",
                            "to": "run_error_display"
                        },
                        {
                            "from": "error",
                            "to": "container_children_inputs",
                            "as": "error"
                        },
                        {
                            "from": "get_node",
                            "to": "get_type"
                        },
                        {
                            "from": "get_type",
                            "to": "get_node_display",
                            "as": "type"
                        },
                        {
                            "from": "get_type",
                            "to": "get_error_display",
                            "as": "type"
                        },
                        {
                            "from": "get_node",
                            "to": "run_node_display",
                            "as": "node"
                        },
                        {
                            "from": "get_node",
                            "to": "run_error_display",
                            "as": "node"
                        },
                        {
                            "from": "get_node_display",
                            "to": "run_node_display",
                            "as": "display"
                        },
                        {
                            "from": "display_graph",
                            "to": "run_node_display",
                            "as": "display_graph"
                        },
                        {
                            "from": "result",
                            "to": "run_node_display",
                            "as": "result"
                        },
                        {
                            "from": "get_error_display",
                            "to": "run_error_display",
                            "as": "error_display"
                        },
                        {
                            "from": "container_children_inputs",
                            "to": "container_children",
                            "as": "input"
                        },
                        {
                            "from": "run_node_display",
                            "to": "container_children",
                            "as": "display"
                        },
                        {
                            "from": "run_error_display",
                            "to": "container_children",
                            "as": "error_display"
                        },
                        {
                            "from": "run_node_display",
                            "to": "run_error_display"
                        },
                        {
                            "from": "container_props",
                            "to": "container",
                            "as": "props"
                        },
                        {
                            "from": "container_children",
                            "to": "container",
                            "as": "children"
                        },
                        {
                            "from": "container_dom_type",
                            "to": "container",
                            "as": "dom_type"
                        },
                        {
                            "from": "container",
                            "to": "out"
                        }
                    ]
                },
                {
                    "id": "menu",
                    "nodes": [
                        {"id": "readonly", "ref": "arg", "value": "readonly"},
                        {"id": "false", "value": false},
                        {
                            "id": "search_input",
                            "nodes": [
                                {
                                    "id": "in"
                                },
                                {"id": "search", "ref": "arg", "value": "search"},
                                {"id": "is_searching", "script": "return typeof search === 'string'"},
                                {
                                    "id": "search_input_dom_type",
                                    "value": "input"
                                },
                                {
                                    "id": "nodes",
                                    "ref": "arg",
                                    "value": "nodes"
                                },
                                {
                                    "id": "html_id",
                                    "ref": "arg",
                                    "value": "html_id"
                                },
                                {
                                    "id": "display_graph",
                                    "ref": "arg",
                                    "value": "display_graph"
                                },
                                {
                                    "id": "search_input_props",
                                    "script": "return {id: `${html_id}-search-input`, key: `${html_id}-search-input`, class: 'search-input', type: 'text', onkeydown: (s, payload) => { if(payload.key === 'Enter'){ const direction = payload.shiftKey ? -1 : 1; const idx = (s.search_results.length + s.search_index + direction) % s.search_results.length; return {...s, selected: s.search_results.slice(idx, idx + 1), search_index: idx} } else { return s;} }, oninput: (s, payload) => {const search_results = new _lib.Fuse(nodes.map(n => Object.assign({}, n, display_graph.nodes.find(d => d.id === n.node_id))), {keys: ['name', 'node_id', 'ref', 'value']}).search(payload.target.value).map(r => r.item.node_id); return {...s, search: payload.target.value, selected: search_results.length > 0 ? search_results.slice(0, 1) : s.selected, search_results, search_index: 0}}}"
                                },
                                {"id": "search_field", "ref": "html_element"},
                                {"id": "search_effect", "ref": "search_effect"},
                                {"id": "focus_effect", "ref": "focus_effect"},
                                {"id": "search_icon_props", "script": "return {id: `${html_id}-search-input`, key: `${html_id}-search-input-icon`, class: 'search-input search-input-icon', onclick: s => [s, [search, {search: ''}], [focus, {selector: `#${html_id}-search-input`}]]}"},
                                {"id": "search_icon_dom_type", "value": "div"},
                                {"id": "search_icon_name", "value": "search"},
                                {"id": "search_icon", "ref": "icon"},
                                {
                                    "id": "out",
                                    "ref": "if"
                                }
                            ],
                            "edges": [
                                {
                                    "from": "html_id",
                                    "to": "search_input_props",
                                    "as": "html_id"
                                },
                                {
                                    "from": "nodes",
                                    "to": "search_input_props",
                                    "as": "nodes"
                                },
                                {
                                    "from": "display_graph",
                                    "to": "search_input_props",
                                    "as": "display_graph"
                                },
                                {
                                    "from": "search", 
                                    "to": "is_searching",
                                    "as": "search"
                                },
                                {
                                    "from": "search_input_dom_type",
                                    "to": "search_field",
                                    "as": "dom_type"
                                },
                                {
                                    "from": "search_input_props",
                                    "to": "search_field",
                                    "as": "props"
                                },
                                {
                                    "from": "html_id",
                                    "to": "search_icon_props",
                                    "as": "html_id"
                                },
                                {
                                    "from": "search_effect",
                                    "to": "search_icon_props",
                                    "as": "search"
                                },
                                {
                                    "from": "focus_effect",
                                    "to": "search_icon_props",
                                    "as": "focus"
                                },
                                {"from": "search_icon_props", "to": "search_icon", "as": "props"},
                                {"from": "search_icon_dom_type", "to": "search_icon", "as": "dom_type"},
                                {"from": "search_icon_name", "to": "search_icon", "as": "icon"},
                                {"from": "search_icon", "to": "out", "as": "false"},
                                {
                                    "from": "search_field",
                                    "to": "out",
                                    "as": "true"
                                },
                                {"from": "is_searching", "to": "out", "as": "pred"}
                            ]
                        },
                        {
                            "id": "close",
                            "nodes": [
                                {"id": "icon", "value": "close"},
                                {"id": "dispatch_custom_event_effect", "ref": "dispatch_custom_event_effect"},
                                {"id": "props", "script": "return {onclick: (s, p) => (p.stopPropagation(), [s, [dispatch_custom, {event: 'selectnode', detail: {node: s.display_graph.out}, html_id: s.html_id}]])}"},
                                {"id": "out", "ref": "icon"}
                            ],
                            "edges": [
                                {"from": "dispatch_custom_event_effect", "to": "props", "as": "dispatch_custom"},
                                {"from": "props", "to": "out", "as": "props"},
                                {"from": "icon", "to": "out", "as": "icon"}
                            ]
                        },
                        {"id": "close_readonly", "ref": "if"},
                        {
                            "id":"more",
                            "nodes": [
                                {"id": "icon", "value": "ellipsis-vertical-outline"},
                                {"id": "onclick", "ref": "graph_ui_action"},
                                {"id": "props", "script": "return {onclick}"},
                                {"id": "out", "ref": "icon"}
                            ],
                            "edges": [
                                {"from": "props", "to": "out", "as": "props"},
                                {"from": "icon", "to": "out", "as": "icon"},
                                {"from": "onclick", "to": "props", "as": "onclick"}
                            ]
                        },
                        {"id": "more_readonly", "ref": "if"},
                        {"id": "dom_type", "value": "div"},
                        {"id": "children", "ref": "new_array"},
                        {"id": "html_id", "ref": "arg", "value": "html_id"},
                        {"id": "props", "script": "return {class: {'graph-ui': true}, key: `${html_id}-graph-ui`}"},
                        {"id": "out", "ref": "html_element"}
                    ],
                    "edges": [
                        {"from": "more", "to": "more_readonly", "as": "false"},
                        {"from": "false", "to": "more_readonly", "as": "true"},
                        {"from": "readonly", "to": "more_readonly", "as": "pred"},
                        {"from": "more_readonly", "to": "children", "as": "a1"},
                        {"from": "search_input", "to": "children", "as": "a0"},
                        {"from": "readonly", "to": "close_readonly", "as": "pred"},
                        {"from": "close", "to": "close_readonly", "as": "true"},
                        {"from": "false", "to": "close_readonly", "as": "false"},
                        {"from": "close_readonly", "to": "children", "as": "a2", "type": "resolve"},
                        {"from": "html_id", "to": "props", "as": "html_id"},
                        {"from": "children", "to": "out", "as": "children"},
                        {"from": "props", "to": "out", "as": "props"},
                        {"from": "dom_type", "to": "out", "as": "dom_type"}
                    ]
                },
                {
                    "id": "node_editor",
                    "nodes": [
                        {
                            "id": "in"
                        },
                        {
                            "id": "out",
                            "ref": "html_element"
                        },
                        {"id": "panzoom_box_dom_type", "value": "g"},
                        {"id": "panzoom_box_props", "script": "return {id: `${html_id}-editor-panzoom`}"},
                        {
                            "id": "panzoom_box",
                            "ref": "html_element"
                        },
                        {"id": "panzoom_box_arr", "ref": "new_array"},
                        {
                            "id": "html_id",
                            "ref": "arg",
                            "value": "html_id"
                        },
                        {
                            "id": "hover",
                            "ref": "arg",
                            "value": "hover"
                        },
                        {
                            "id": "randid",
                            "ref": "arg",
                            "value": "randid"
                        },
                        {
                            "id": "node_el_width",
                            "ref": "arg",
                            "value": "node_el_width"
                        },
                        {
                            "id": "display_graph",
                            "ref": "arg",
                            "value": "display_graph"
                        },
                        {
                            "id": "readonly",
                            "ref": "arg",
                            "value": "readonly"
                        },
                        {
                            "id": "hash",
                            "ref": "arg",
                            "value": "hash"
                        },
                        {
                            "id": "show_all",
                            "ref": "arg",
                            "value": "show_all"
                        },
                        {
                            "id": "error",
                            "ref": "arg",
                            "value": "error"
                        },
                        {
                            "id": "hide_types",
                            "ref": "arg",
                            "value": "hide_types"
                        },
                        {
                            "id": "links",
                            "ref": "arg",
                            "value": "links"
                        },
                        {
                            "id": "get_levels",
                            "ref": "arg",
                            "value": "levels"
                        },
                        {"id": "nodes", "ref": "arg", "value": "nodes"},
                        {
                            "id": "get_nodes",
                            "script": "return nodes?.map(n => ({...n, x: (n.x - node_el_width * 0.5)})) ?? []"
                        },
                        {
                            "id": "get_links",
                            "script": "return links?.map(l => ({...l, source: {...l.source, x: (l.source.x - node_el_width * 0.5)}, target: {...l.target, x: (l.target.x - node_el_width * 0.5)}})) ?? []"
                        },
                        {
                            "id": "get_selected",
                            "ref": "arg",
                            "value": "selected"
                        },
                        {
                            "id": "get_graph",
                            "ref":"arg",
                            "value": "graph"
                        },
                        {
                            "id": "get_selected_node",
                            "script": "return nodes.find(n => n.node_id === selected[0])"
                        },
                        {
                            "id": "get_selected_edge",
                            "ref": "arg",
                            "value": "selected_edge"
                        },
                        {
                            "id": "dimensions",
                            "ref": "arg",
                            "value": "dimensions"
                        },
                        {"id": "onclick_graph", "ref": "onclick_graph_action"},
                        {
                            "id": "node_editor_props",
                            "script": "return {id: `${html_id}-editor`, class: {[`hash-${hash.substring(1)}`]: hash.length > 0},width: dimensions.x, height: dimensions.y, onclick: onclick_graph, ontouchstart: onclick_graph}"
                        },
                        {
                            "id": "node_editor_dom_type",
                            "value": "svg"
                        },
                        {
                            "id": "node_editor_children",
                            "script": "return [defs.el].concat(nodes?.map(c => c.el) ?? []).concat(links?.flatMap(l => l.map(lc => lc.el)) ?? [])"
                        },
                        {
                            "id": "node_layout",
                            "script": "const error_nodes = error instanceof AggregateError ? error.errors.map(e => e instanceof _lib.no.NodysseusError ? e.node_id : false).filter(n => n) : error instanceof _lib.no.NodysseusError ? [error.node_id] : []; const fn = _lib.no.executeGraphNode({graph: {..._graph}})(node_layout_map); return nodes.map(n => fn(Object.assign({node: Object.assign({}, n, display_graph.nodes.find(dgn => dgn.id === n.node_id)), hide_types, show_all, selected_distance: levels.distance_from_selected.get(n.node_child_id), level: levels.level_by_node.get(n.node_id), node_error: !error_nodes ? false : error_nodes.filter(k => k.startsWith(n.node_id)).length > 0}, _node_inputs)))"
                        },
                        {
                            "id": "node_layout_map",
                            "nodes": [
                                {
                                    "id": "in"
                                },
                                {
                                    "id": "get_node",
                                    "ref": "arg",
                                    "value": "node"
                                },
                                {
                                    "id": "hover",
                                    "ref": "arg",
                                    "value": "hover"
                                },
                                {
                                    "id": "selected_edge",
                                    "ref": "arg",
                                    "value": "selected_edge"
                                },
                                {
                                    "id": "html_id",
                                    "ref": "arg",
                                    "value": "html_id"
                                },
                                {
                                    "id": "show_all",
                                    "ref": "arg",
                                    "value": "show_all"
                                },
                                {
                                    "id": "selected",
                                    "ref": "arg",
                                    "value": "selected"
                                },
                                {
                                    "id": "node_el_width",
                                    "ref": "arg",
                                    "value": "node_el_width"
                                },
                                {
                                    "id": "is_selected",
                                    "script": "return selected === node.node_id"
                                },
                                {
                                    "id": "selected_distance",
                                    "ref": "arg",
                                    "value": "selected_distance"
                                },
                                {
                                    "id": "level",
                                    "ref": "arg",
                                    "value": "level"
                                },
                                {
                                    "id": "hide_types",
                                    "ref": "arg",
                                    "value": "hide_types"
                                },
                                {
                                    "id": "error",
                                    "ref": "arg",
                                    "value": "node_error"
                                },
                                {
                                    "id": "out",
                                    "ref": "html_element"
                                },
                                {
                                    "id": "parent",
                                    "ref": "html_element"
                                },
                                {
                                    "id": "parent_dom_type",
                                    "value": "svg"
                                },
                                {"id": "onclick_node", "ref": "onselectnode_action"},
                                {
                                    "id": "parent_attrs",
                                    "script": "return ({onclick: (_, payload) => [onclick, {event: payload, node_id: node.node_id}],  onmouseover: (state, payload) => [{...state, hover: node.node_id}], onmouseout: (state, payload) => [{...state, hover: undefined}],  ontouchstart: (_, payload) => [onclick, {event: payload, node_id: node.node_id}], width: '256', height: '64', id: html_id + '-' + node.node_child_id, class: {node: true,  selected: selected[0] === node.node_id, hover: hover === node.node_id }, opacity: selected_edge?.from === node.node_id || show_all ? 1 : selected_distance !== undefined ? Math.max(0.05, 1 - (selected_distance * selected_distance) / 6) : 0.1})"
                                },
                                {
                                    "id": "children",
                                    "nodes": [
                                        {
                                            "id": "in"
                                        },
                                        {
                                            "id": "selected_distance",
                                            "ref": "arg",
                                            "value": "selected_distance"
                                        },
                                        {
                                            "id": "node",
                                            "ref": "arg",
                                            "value": "node"
                                        },
                                        {
                                            "id": "node_node",
                                            "ref": "arg",
                                            "value": "node.node"
                                        },
                                        {
                                            "id": "error",
                                            "ref": "arg",
                                            "value": "node_error"
                                        },
                                        {
                                            "id": "node_shape_attrs",
                                            "args": [
                                                "value",
                                                "script",
                                                "ref",
                                                "selected_distance",
                                                "nodes"
                                            ],
                                            "script": "const r = 24; return node.value !== undefined ? {class: {shape: true, value: true, error}, points: `4,${4 + r} ${4 + r},${4 + r} ${4 + r * 0.5},4`} : node.script ? {class:{shape: true, script: true, error}, width: r, height: r, x: 10, y: 10} : node.ref ? {class: {shape: true, ref: true, error}, width: r, height: r, x: 10, y: 10} : node.nodes ? {class: {shape: true, graph: true, error}, r: r * 0.5, cx: r * 0.5 + 4, cy: r * 0.5 + 4}  : {class: {shape: true, none: true, error}, r: r * 0.5 , cx: r * 0.5 + 4, cy: r * 0.5 + 4}"
                                        },
                                        {
                                            "id": "default_color",
                                            "value": "blue"
                                        },
                                        {
                                            "id": "empty_array",
                                            "value": []
                                        },
                                        {
                                            "id": "node_shape_dom_type",
                                            "script": "return node.value !== undefined ? 'polygon' : node.script ? 'rect' : node.ref ? 'rect' : node.nodes ? 'circle' : 'circle'"
                                        },
                                        {
                                            "id": "node_shape",
                                            "ref": "html_element"
                                        },
                                        {
                                            "id": "text",
                                            "nodes": [
                                                {
                                                    "id": "in"
                                                },
                                                {
                                                    "id": "out"
                                                },
                                                {
                                                    "id": "node_id",
                                                    "value": "node_id"
                                                },
                                                {
                                                    "id": "node_ref",
                                                    "value": "ref"
                                                },
                                                {
                                                    "id": "node_name",
                                                    "value": "name"
                                                },
                                                {
                                                    "id": "node_value",
                                                    "value": "value"
                                                },
                                                {
                                                    "id": "get_id",
                                                    "ref": "arg",
                                                    "value": "node.node_id"
                                                },
                                                {
                                                    "id": "get_name",
                                                    "ref": "get"
                                                },
                                                {
                                                    "id": "node",
                                                    "ref": "arg",
                                                    "value": "node"
                                                },
                                                {
                                                    "id": "hide_types",
                                                    "ref": "arg",
                                                    "value": "hide_types"
                                                },
                                                {
                                                    "id": "get_value",
                                                    "args": [
                                                        "target",
                                                        "def"
                                                    ],
                                                    "script": "return target.value !== undefined ? (typeof target.value === 'object' ? JSON.stringify(target.value) : target.value.toString()) : def"
                                                },
                                                {
                                                    "id": "get_type",
                                                    "args": [
                                                        "target"
                                                    ],
                                                    "script": "return (target.ref ? target.ref : target.value !== undefined ? 'value' : target.script ? 'script' : target.nodes ? `graph (${target.nested_node_count}, ${target.nested_edge_count})` : 'object')"
                                                },
                                                {
                                                    "id": "selected_distance",
                                                    "ref": "arg",
                                                    "value": "selected_distance"
                                                },
                                                {
                                                    "id": "shorten",
                                                    "args": [
                                                        "text"
                                                    ],
                                                    "script": "return text.substring(text.lastIndexOf('/') + 1)"
                                                },
                                                {
                                                    "id": "node_primary_text_attrs",
                                                    "value": {
                                                        "class": "primary",
                                                        "dy": ".6em",
                                                        "x": "48"
                                                    }
                                                },
                                                {
                                                    "id": "tspan_dom_type",
                                                    "value": "tspan"
                                                },
                                                {"id": "display_name_input", "script": "return n.name ? 'name' : n.value !== undefined ? 'value' : 'id'"},
                                                {"id": "display_name", "ref": "switch"},
                                                {
                                                    "id": "node_primary_text_text",
                                                    "ref": "html_text"
                                                },
                                                {
                                                    "id": "node_primary_text",
                                                    "ref": "html_element"
                                                },
                                                {
                                                    "id": "node_secondary_text_attrs",
                                                    "value": {
                                                        "class": "secondary",
                                                        "dy": "1.2em",
                                                        "x": "48"
                                                    }
                                                },
                                                {
                                                    "id": "node_secondary_text_text",
                                                    "ref": "html_text"
                                                },
                                                {
                                                    "id": "node_secondary_text",
                                                    "ref": "html_element"
                                                },
                                                {
                                                    "id": "node_text_dom_type",
                                                    "value": "text"
                                                },
                                                {
                                                    "id": "node_text",
                                                    "ref": "html_element"
                                                },
                                                {
                                                    "id": "script",
                                                    "value": "script"
                                                },
                                                {
                                                    "id": "node_text_props",
                                                    "args": [
                                                        "selected_distance"
                                                    ],
                                                    "script": "return { x: 48, y: 12 }"
                                                },
                                                {
                                                    "id": "node_text_children",
                                                    "args": [
                                                        "primary",
                                                        "secondary"
                                                    ],
                                                    "script": "return [primary.el, !hide_types && secondary.el]"
                                                },
                                                {
                                                    "id": "text",
                                                    "value": "text"
                                                }
                                            ],
                                            "edges": [
                                                {
                                                    "from": "node",
                                                    "to": "get_type",
                                                    "as": "target"
                                                },
                                                {
                                                    "from": "node",
                                                    "to": "get_value",
                                                    "as": "target"
                                                },
                                                {
                                                    "from": "node",
                                                    "to": "get_name",
                                                    "as": "target"
                                                },
                                                {
                                                    "from": "get_id",
                                                    "to": "display_name",
                                                    "as": "id"
                                                },
                                                {
                                                    "from": "get_value",
                                                    "to": "display_name",
                                                    "as": "value"
                                                },
                                                {
                                                    "from": "node_ref",
                                                    "to": "get_type",
                                                    "as": "path"
                                                },
                                                {
                                                    "from": "node_name",
                                                    "to": "get_name",
                                                    "as": "path"
                                                },
                                                {
                                                    "from": "script",
                                                    "to": "get_type",
                                                    "as": "default_value"
                                                },
                                                {
                                                    "from": "get_name",
                                                    "to": "display_name",
                                                    "as": "name"
                                                },
                                                {
                                                    "from": "node",
                                                    "to": "display_name_input",
                                                    "as": "n"
                                                },
                                                {
                                                    "from": "display_name_input",
                                                    "to": "display_name",
                                                    "as": "input"
                                                },
                                                {
                                                    "from": "display_name",
                                                    "to": "node_primary_text_text",
                                                    "as": "text"
                                                },
                                                {
                                                    "from": "get_type",
                                                    "to": "node_secondary_text_text",
                                                    "as": "text"
                                                },
                                                {
                                                    "from": "node_text_props",
                                                    "to": "node_text",
                                                    "as": "props"
                                                },
                                                {
                                                    "from": "node_primary_text_text",
                                                    "to": "node_primary_text",
                                                    "as": "children"
                                                },
                                                {
                                                    "from": "node_primary_text_attrs",
                                                    "to": "node_primary_text",
                                                    "as": "props"
                                                },
                                                {
                                                    "from": "node_primary_text",
                                                    "to": "node_text_children",
                                                    "as": "primary"
                                                },
                                                {
                                                    "from": "hide_types",
                                                    "to": "node_text_children",
                                                    "as": "hide_types"
                                                },
                                                {
                                                    "from": "node_secondary_text_text",
                                                    "to": "node_secondary_text",
                                                    "as": "children"
                                                },
                                                {
                                                    "from": "node_secondary_text_attrs",
                                                    "to": "node_secondary_text",
                                                    "as": "props"
                                                },
                                                {
                                                    "from": "tspan_dom_type",
                                                    "to": "node_primary_text",
                                                    "as": "dom_type"
                                                },
                                                {
                                                    "from": "node_secondary_text",
                                                    "to": "node_text_children",
                                                    "as": "secondary"
                                                },
                                                {
                                                    "from": "tspan_dom_type",
                                                    "to": "node_secondary_text",
                                                    "as": "dom_type"
                                                },
                                                {
                                                    "from": "node_text_children",
                                                    "to": "node_text",
                                                    "as": "children"
                                                },
                                                {
                                                    "from": "node_text_dom_type",
                                                    "to": "node_text",
                                                    "as": "dom_type"
                                                },
                                                {
                                                    "from": "node_text",
                                                    "to": "out"
                                                }
                                            ]
                                        },
                                        {
                                            "id": "fill_rect",
                                            "script": "return {dom_type: 'rect', props:{class:{fill: true}, width: '48', 'height': '48'}, children: []}"
                                        },
                                        {
                                            "id": "order",
                                            "args": [
                                                "shape",
                                                "text"
                                            ],
                                            "script": "return [shape.el, text.el, rect]"
                                        },
                                        {
                                            "id": "out"
                                        }
                                    ],
                                    "edges": [
                                        {
                                            "from": "in",
                                            "to": "out",
                                            "as": "_"
                                        },
                                        {
                                            "from": "node",
                                            "to": "node_shape_attrs",
                                            "as": "node"
                                        },
                                        {
                                            "from": "selected_distance",
                                            "to": "node_shape_attrs",
                                            "as": "selected_distance"
                                        },
                                        {
                                            "from": "error",
                                            "to": "node_shape_attrs",
                                            "as": "error"
                                        },
                                        {
                                            "from": "default_color",
                                            "to": "node_shape_attrs",
                                            "as": "color"
                                        },
                                        {
                                            "from": "empty_array",
                                            "to": "node_shape",
                                            "as": "children"
                                        },
                                        {
                                            "from": "node",
                                            "to": "node_shape_dom_type",
                                            "as": "node"
                                        },
                                        {
                                            "from": "node_shape_dom_type",
                                            "to": "node_shape",
                                            "as": "dom_type"
                                        },
                                        {
                                            "from": "node_node",
                                            "to": "text"
                                        },
                                        {
                                            "from": "node_shape_attrs",
                                            "to": "node_shape",
                                            "as": "props"
                                        },
                                        {
                                            "from": "node_shape",
                                            "to": "order",
                                            "as": "shape"
                                        },
                                        {
                                            "from": "text",
                                            "to": "order",
                                            "as": "text"
                                        },
                                        {
                                            "from": "fill_rect",
                                            "to": "order",
                                            "as": "rect"
                                        },
                                        {
                                            "from": "order",
                                            "to": "out",
                                            "as": "children"
                                        }
                                    ]
                                }
                            ],
                            "edges": [
                                {
                                    "from": "selected",
                                    "to": "is_selected",
                                    "as": "selected"
                                },
                                {
                                    "from": "selected",
                                    "to": "parent_attrs",
                                    "as": "selected"
                                },
                                {
                                    "from": "selected_edge",
                                    "to": "parent_attrs",
                                    "as": "selected_edge"
                                },
                                {
                                    "from": "hover",
                                    "to": "parent_attrs",
                                    "as": "hover"
                                },
                                {
                                    "from": "get_node",
                                    "to": "get_ref"
                                },
                                {
                                    "from": "get_node",
                                    "to": "children"
                                },
                                {
                                    "from": "get_node",
                                    "to": "is_selected",
                                    "as": "node"
                                },
                                {
                                    "from": "is_selected",
                                    "to": "children",
                                    "as": "selected"
                                },
                                {
                                    "from": "children",
                                    "to": "out"
                                },
                                {
                                    "from": "show_all",
                                    "to": "parent_attrs",
                                    "as": "show_all"
                                },
                                {
                                    "from": "html_id",
                                    "to": "parent_attrs",
                                    "as": "html_id"
                                },
                                {
                                    "from": "selected_distance",
                                    "to": "parent_attrs",
                                    "as": "selected_distance"
                                },
                                {
                                    "from": "selected_distance",
                                    "to": "children",
                                    "as": "selected_distance"
                                },
                                {"from": "onclick_node", "to": "parent_attrs", "as": "onclick"},
                                {
                                    "from": "parent_attrs",
                                    "to": "out",
                                    "as": "props"
                                },
                                {
                                    "from": "parent_dom_type",
                                    "to": "out",
                                    "as": "dom_type"
                                },
                                {
                                    "from": "get_node",
                                    "to": "parent_attrs",
                                    "as": "node"
                                }
                            ]
                        },
                        {
                            "id": "link_layout",
                            "script": "const fn = _lib.no.executeGraphNode({graph: _graph})(link_layout_map); return links.map(link => fn(Object.assign({readonly, show_all, randid, link: Object.assign({edge: display_graph.edges.find(e => link.source.node_id === e.from && link.target.node_id === e.to)}, link), selected_distance: levels.distance_from_selected.get(link.target.node_child_id) !== undefined ? Math.min(levels.distance_from_selected.get(link.target.node_child_id), levels.distance_from_selected.get(link.source.node_child_id)) : undefined, sibling_index_normalized: (levels.siblings.get(link.source.node_id).findIndex(n => n === link.source.node_id) + 1) / (levels.siblings.get(link.source.node_id).length + 1)}, _node_inputs)))"
                        },
                        {
                            "id": "link_layout_map",
                            "nodes": [
                                {
                                    "id": "in"
                                },
                                { "id": "get_link", "ref": "arg", "value": "link" },
                                {
                                    "id": "get_selected_edge",
                                    "ref": "arg",
                                    "value": "selected_edge"
                                },
                                {
                                    "id": "source",
                                    "ref": "arg",
                                    "value": "link.source"
                                },
                                {
                                    "id": "target",
                                    "ref": "arg",
                                    "value": "link.target"
                                },
                                {
                                    "id": "selected_distance",
                                    "ref": "arg",
                                    "value": "selected_distance"
                                },
                                {
                                    "id": "sibling_index_normalized",
                                    "ref": "arg",
                                    "value": "sibling_index_normalized"
                                },
                                {
                                    "id": "show_all",
                                    "ref": "arg",
                                    "value": "show_all"
                                },
                                {"id": "edge", "ref": "arg", "value": "link.edge"},
                                {
                                    "id": "edge_info_el",
                                    "ref": "html_element"
                                },
                                {
                                    "id": "edge_info_el_children",
                                    "script": "return [rect.el, edge_as.el, edge_type.el]"
                                },
                                {
                                    "id": "edge_info_dom_type",
                                    "value": "svg"
                                },
                                {"id": "onclick_edge", "ref": "onclick_edge"},
                                {
                                    "id": "edge_info_props",
                                    "script": "return ({id: `edge-info-${source.node_child_id}`, key: `edge-info-${source.node_child_id}`, z: selected_edge && source.node_id === selected_edge.from && target.node_id === selected_edge.to ? 100 : 200, opacity: show_all ? 1 : selected_distance !== undefined ? Math.max(0.05, 1 - selected_distance * selected_distance / 2) : 0.1, class: {'edge-info': true, selected: selected_edge && (source.node_id === selected_edge.from + '_' + selected_edge.to || (source.node_id === selected_edge.from && target.node_id === selected_edge.to))}, onclick: (state, payload) => [onclick_edge, {event: payload, edge}], ontouchstart: (state, payload) => [onclick_edge, {event: payload, edge}]})"
                                },
                                {
                                    "id": "edge_info_line_position",
                                    "value": 0.5,
                                    "min": 0,
                                    "max": 1,
                                    "step": 0.01
                                },
                                {
                                    "id": "edge_info_type_props",
                                    "value": {
                                        "font-size": 14,
                                        "y": 32
                                    }
                                },
                                {
                                    "id": "edge_info_type_el",
                                    "ref": "svg_text"
                                },
                                {
                                    "id": "edge_info_type_text",
                                    "script": "return edge?.type ?? ''"
                                },
                                {
                                    "id": "edge_info_as_props",
                                    "value": {
                                        "font-size": 14,
                                        "y": 16
                                    }
                                },
                                {
                                    "id": "edge_info_as_el",
                                    "ref": "svg_text"
                                },
                                {"id": "readonly", "ref": "arg", "value": "readonly"},
                                {
                                    "id": "edge_info_as_text",
                                    "script": "return edge?.as ?? (readonly ? '' : '*')"
                                },
                                {
                                    "id": "edge_info_rect_dom_type",
                                    "value": "rect"
                                },
                                {
                                    "id": "edge_info_rect",
                                    "ref": "html_element"
                                },
                                {
                                    "id": "lerp_length",
                                    "value": 24
                                },
                                {
                                    "id": "line_lerp",
                                    "script": "const length_x = Math.abs(source.x - target.x); const length_y = Math.abs(source.y - target.y); const length = Math.sqrt(length_x * length_x + length_y * length_y); return {selected_distance, selected_edge, source: {...source, x: source.x + (target.x - source.x) * lerp_length / length, y: source.y + (target.y - source.y) * lerp_length / length}, target: {...target, x: source.x + (target.x - source.x) * (1 - (lerp_length / length)), y: source.y + (target.y - source.y) * (1 - (lerp_length / length))}}"
                                },
                                {
                                    "id": "line_props",
                                    "script": "return ({id: `link-${source.node_child_id}`, key: `link-${source.node_child_id}`, onclick: (state, payload) => [onclick_edge, {event: payload, edge}], class: `link ${selected_edge && (source.node_id === selected_edge.from + '_' + selected_edge.to || (source.node_id === selected_edge.from && target.node_id === selected_edge.to)) ? 'selected' : 'unselected'}`, 'marker-end': 'url(#arrow)', opacity: show_all ? 1 : selected_distance !== undefined ? Math.max(0.05, 1 - selected_distance * selected_distance / 2) : 0.1})"
                                },
                                {
                                    "id": "line_dom_type",
                                    "value": "line"
                                },
                                {
                                    "id": "empty_array",
                                    "value": [
                                    ]
                                },
                                {
                                    "id": "line",
                                    "ref": "html_element"
                                },
                                {
                                    "id": "insert_node_el",
                                    "out": "el",
                                    "nodes": [
                                        {"id": "link", "ref": "arg", "value": "link"},
                                        {"id": "randid", "ref": "arg", "value": "randid"},
                                        {"id": "base_props", "value": {"href": "svg/add-circle-outline.svg#icon", "width": "32px", "height": "32px", "class": "insert-node" }},
                                        {"id": "position", "script": "return {x: (link.source.x + link.target.x) * 0.5 - 16, y: (link.source.y + link.target.y) * 0.5 - 16, id: `insert-${link.source.node_child_id}`, key: `insert-${link.source.node_child_id}`}"},
                                        {"id": "insert_node", "ref": "insert_node"},
                                        {"id": "onclick_props", "script": "return {onclick: (s, p) => [s, [insert_node, {edge: link.edge, node: {id: randid}}]], ontouchstart: (s, p) => [s, [insert_node, {edge: link.edge, node: {id: randid}}]]}"},
                                        {"id": "props", "ref": "merge_objects"},
                                        {"id": "el", "ref": "add_circle_icon"}
                                    ],
                                    "edges": [
                                        {"from": "randid", "to": "onclick_props", "as": "randid"},
                                        {"from": "link", "to": "onclick_props", "as": "link"},
                                        {"from": "insert_node", "to": "onclick_props", "as": "insert_node"},
                                        {"from": "link", "to": "position", "as": "link"},
                                        {"from": "base_props", "to": "props", "as": "o0"},
                                        {"from": "position", "to": "props", "as": "o1"},
                                        {"from": "onclick_props", "to": "props", "as": "o2"},
                                        {"from": "props", "to": "el", "as": "props"}
                                    ]
                                },
                                {
                                    "id": "out",
                                    "args": [
                                        "line",
                                        "edge_info"
                                    ],
                                    "script": "return [line, edge_info, !readonly && selected_distance < 1 && insert_node]"
                                }
                            ],
                            "edges": [
                                {
                                    "from": "in",
                                    "to": "line_props"
                                },
                                {
                                    "from": "get_link",
                                    "to": "line_lerp"
                                },
                                {
                                    "from": "show_all",
                                    "to": "line_props",
                                    "as": "show_all"
                                },
                                {
                                    "from": "get_selected_edge",
                                    "to": "line_props",
                                    "as": "selected_edge"
                                },
                                {
                                    "from": "get_selected_edge",
                                    "to": "line_lerp",
                                    "as": "selected_edge"
                                },
                                {
                                    "from": "get_selected_edge",
                                    "to": "edge_info_props",
                                    "as": "selected_edge"
                                },
                                {
                                    "from": "selected_distance",
                                    "to": "edge_info_props",
                                    "as": "selected_distance"
                                },
                                {
                                    "from": "sibling_index_normalized",
                                    "to": "edge_info_props",
                                    "as": "sibling_index_normalized"
                                },
                                {
                                    "from": "show_all",
                                    "to": "edge_info_props",
                                    "as": "show_all"
                                },
                                {
                                    "from": "onclick_edge",
                                    "to": "edge_info_props",
                                    "as": "onclick_edge"
                                },
                                {
                                    "from": "edge",
                                    "to": "line_props",
                                    "as": "edge"
                                },
                                {
                                    "from": "onclick_edge",
                                    "to": "line_props",
                                    "as": "onclick_edge"
                                },
                                {
                                    "from": "selected_distance",
                                    "to": "line_props",
                                    "as": "selected_distance"
                                },
                                {
                                    "from": "source",
                                    "to": "line_lerp",
                                    "as": "source"
                                },
                                {
                                    "from": "target",
                                    "to": "line_lerp",
                                    "as": "target"
                                },
                                {
                                    "from": "source",
                                    "to": "line_props",
                                    "as": "source"
                                },
                                {
                                    "from": "target",
                                    "to": "line_props",
                                    "as": "target"
                                },
                                {
                                    "from": "source",
                                    "to": "edge_info_props",
                                    "as": "source"
                                },
                                {
                                    "from": "target",
                                    "to": "edge_info_props",
                                    "as": "target"
                                },
                                {
                                    "from": "selected_distance",
                                    "to": "line_lerp",
                                    "as": "selected_distance"
                                },
                                {
                                    "from": "line_lerp",
                                    "to": "line_props"
                                },
                                {
                                    "from": "lerp_length",
                                    "to": "line_lerp",
                                    "as": "lerp_length"
                                },
                                {
                                    "from": "get_link",
                                    "to": "edge_info_props"
                                },
                                {
                                    "from": "edge",
                                    "to": "edge_info_props",
                                    "as": "edge"
                                },
                                {
                                    "from": "readonly",
                                    "to": "edge_info_props",
                                    "as": "readonly"
                                },
                                {
                                    "from": "edge",
                                    "to": "edge_info_as_text",
                                    "as": "edge"
                                },
                                {
                                    "from": "edge_info_dom_type",
                                    "to": "edge_info_el",
                                    "as": "dom_type"
                                },
                                {
                                    "from": "edge_info_props",
                                    "to": "edge_info_el",
                                    "as": "props"
                                },
                                {
                                    "from": "edge_info_line_position",
                                    "to": "edge_info_props",
                                    "as": "line_position"
                                },
                                {
                                    "from": "edge_info_rect",
                                    "to": "edge_info_el_children",
                                    "as": "rect"
                                },
                                {
                                    "from": "edge_info_rect_dom_type",
                                    "to": "edge_info_rect",
                                    "as": "dom_type"
                                },
                                {
                                    "from": "edge_info_el_children",
                                    "to": "edge_info_el",
                                    "as": "children"
                                },
                                {
                                    "from": "edge_info_el",
                                    "to": "out",
                                    "as": "edge_info"
                                },
                                {
                                    "from": "edge_info_type_props",
                                    "to": "edge_info_type_el",
                                    "as": "props"
                                },
                                {
                                    "from": "edge",
                                    "to": "edge_info_type_text",
                                    "as": "edge"
                                },
                                {
                                    "from": "edge_info_type_text",
                                    "to": "edge_info_type_el",
                                    "as": "text"
                                },
                                {
                                    "from": "edge_info_type_el",
                                    "to": "edge_info_el_children",
                                    "as": "edge_type",
                                    "type": "resolve"
                                },
                                {
                                    "from": "edge_info_as_props",
                                    "to": "edge_info_as_el",
                                    "as": "props"
                                },
                                {
                                    "from": "readonly",
                                    "to": "edge_info_as_text",
                                    "as": "readonly"
                                },
                                {
                                    "from": "edge_info_as_text",
                                    "to": "edge_info_as_el",
                                    "as": "text"
                                },
                                {
                                    "from": "edge_info_as_el",
                                    "to": "edge_info_el_children",
                                    "as": "edge_as",
                                    "type": "resolve"
                                },
                                {
                                    "from": "line_props",
                                    "to": "line",
                                    "as": "props"
                                },
                                {
                                    "from": "line_dom_type",
                                    "to": "line",
                                    "as": "dom_type"
                                },
                                {
                                    "from": "empty_array",
                                    "to": "line",
                                    "as": "children"
                                },
                                {
                                    "from": "empty_array",
                                    "to": "line",
                                    "as": "children"
                                },
                                {
                                    "from": "line",
                                    "to": "out",
                                    "as": "line"
                                },
                                {
                                    "from": "selected_distance",
                                    "to": "out",
                                    "as": "selected_distance"
                                },
                                {
                                    "from": "readonly",
                                    "to": "out",
                                    "as": "readonly"
                                },
                                {
                                    "from": "insert_node_el",
                                    "to": "out",
                                    "as": "insert_node"
                                }
                            ]
                        },
                        {
                            "id": "line_end",
                            "ref": "html_element"
                        },
                        {
                            "id": "line_end_props",
                            "value": {
                                "id": "arrow",
                                "refX": 8,
                                "refY": 4,
                                "markerWidth": 8,
                                "markerHeight": 8,
                                "markerUnits": "userSpaceOnUse",
                                "orient": "auto"
                            }
                        },
                        {
                            "id": "line_end_children",
                            "args": [
                                "children"
                            ],
                            "script": "return [children.el]"
                        },
                        {
                            "id": "arrow_path",
                            "ref": "html_element"
                        },
                        {
                            "id": "arrow_path_props",
                            "value": {
                                "points": "1 1, 8 4, 1 8"
                            }
                        },
                        {
                            "id": "arrow_path_dom_type",
                            "value": "polyline"
                        },
                        {
                            "id": "fill_filter_flood_dom_type",
                            "value": "feFlood"
                        },
                        {
                            "id": "fill_filter_flood_props",
                            "value": {
                                "flood-color": "black"
                            }
                        },
                        {
                            "id": "fill_filter_flood",
                            "ref": "html_element"
                        },
                        {
                            "id": "fill_filter_props",
                            "value": {
                                "id": "flood-background",
                                "width": 1,
                                "height": 1,
                                "x": 0,
                                "y": 0
                            }
                        },
                        {
                            "id": "fill_filter_flood_selected_dom_type",
                            "value": "feFlood"
                        },
                        {
                            "id": "fill_filter_flood_selected_props",
                            "value": {
                                "flood-color": "red"
                            }
                        },
                        {
                            "id": "fill_filter_flood_selected",
                            "ref": "html_element"
                        },
                        {
                            "id": "fill_filter_selected_props",
                            "value": {
                                "id": "selected-flood-background",
                                "width": 1.2,
                                "height": 1.5,
                                "x": -0.1,
                                "y": -0.25
                            }
                        },
                        {
                            "id": "fill_filter_composite_props",
                            "value": {
                                "in": "SourceGraphic"
                            }
                        },
                        {
                            "id": "fill_filter_composite_dom_type",
                            "value": "feComposite"
                        },
                        {
                            "id": "fill_filter_composite",
                            "ref": "html_element"
                        },
                        {
                            "id": "fill_filter_children",
                            "script": "return [flood.el, comp.el]"
                        },
                        {
                            "id": "fill_filter_selected_children",
                            "script": "return [flood.el, comp.el]"
                        },
                        {
                            "id": "fill_filter_dom_type",
                            "value": "filter"
                        },
                        {
                            "id": "fill_filter",
                            "ref": "html_element"
                        },
                        {
                            "id": "fill_filter_selected",
                            "ref": "html_element"
                        },
                        {
                            "id": "marker",
                            "value": "marker"
                        },
                        {
                            "id": "defs_children",
                            "args": [
                                "arrow",
                                "bg_color",
                                "bg_color_selected"
                            ],
                            "script": "return [bg_color.el, bg_color_selected.el, arrow.el]"
                        },
                        {
                            "id": "defs",
                            "ref": "html_element"
                        },
                        {
                            "id": "defs_dom_type",
                            "value": "defs"
                        },
                        {
                            "id": "defs_props",
                            "value": {}
                        },
                        {
                            "id": "link_selected_distance",
                            "args": [
                                "link"
                            ],
                            "script": "return !link ? [] : link.selected_distance ? link.selected_distance : 10"
                        },
                        {
                            "id": "filter_links",
                            "ref": "filter_eq"
                        }
                    ],
                    "edges": [
                        {
                            "from": "nodes",
                            "to": "get_nodes",
                            "as": "nodes"
                        },
                        {
                            "from": "get_selected",
                            "to": "get_links",
                            "as": "selected"
                        },
                        {
                            "from": "links",
                            "to": "get_links",
                            "as": "links"
                        },
                        {
                            "from": "node_el_width",
                            "to": "get_nodes",
                            "as": "node_el_width"
                        },
                        {
                            "from": "html_id",
                            "to": "node_layout",
                            "as": "html_id"
                        },
                        {
                            "from": "hover",
                            "to": "node_layout",
                            "as": "hover"
                        },
                        {
                            "from": "error",
                            "to": "node_layout",
                            "as": "error"
                        },
                        {
                            "from": "display_graph",
                            "to": "node_layout",
                            "as": "display_graph"
                        },
                        {
                            "from": "node_el_width",
                            "to": "node_layout",
                            "as": "node_el_width"
                        },
                        {
                            "from": "get_nodes",
                            "to": "node_layout",
                            "as": "nodes"
                        },
                        {
                            "from": "node_el_width",
                            "to": "get_links",
                            "as": "node_el_width"
                        },
                        {
                            "from": "get_links",
                            "to": "duplicate_nodes",
                            "as": "links"
                        },
                        {
                            "from": "get_levels",
                            "to": "duplicate_nodes",
                            "as": "levels"
                        },
                        {
                            "from": "get_levels",
                            "to": "node_layout",
                            "as": "levels"
                        },
                        {
                            "from": "get_graph",
                            "to": "node_layout",
                            "as": "graph"
                        },
                        {
                            "from": "show_all",
                            "to": "link_layout",
                            "as": "show_all"
                        },
                        {
                            "from": "randid",
                            "to": "link_layout",
                            "as": "randid"
                        },
                        {
                            "from": "readonly",
                            "to": "link_layout",
                            "as": "readonly"
                        },
                        {
                            "from": "show_all",
                            "to": "node_layout",
                            "as": "show_all"
                        },
                        {
                            "from": "hide_types",
                            "to": "node_layout",
                            "as": "hide_types"
                        },
                        {
                            "from": "display_graph",
                            "to": "link_layout",
                            "as": "display_graph"
                        },
                        {
                            "from": "get_graph",
                            "to": "link_layout",
                            "as": "graph"
                        },
                        {
                            "from": "get_selected",
                            "to": "node_layout",
                            "as": "selected"
                        },
                        {
                            "from": "get_links",
                            "to": "link_selected_distance",
                            "as": "link"
                        },
                        {
                            "from": "get_selected_edge",
                            "to": "filter_links",
                            "as": "selected_edge"
                        },
                        {
                            "from": "get_selected_edge",
                            "to": "node_layout",
                            "as": "selected_edge"
                        },
                        {
                            "from": "get_selected_edge",
                            "to": "link_layout",
                            "as": "selected_edge"
                        },
                        {
                            "from": "link_selected_distance",
                            "to": "filter_links",
                            "as": "keep"
                        },
                        {
                            "from": "get_links",
                            "to": "filter_links"
                        },
                        {
                            "from": "get_links",
                            "to": "link_layout",
                            "as": "links"
                        },
                        {
                            "from": "get_levels",
                            "to": "link_layout",
                            "as": "levels"
                        },
                        {
                            "from": "link_layout_map",
                            "to": "link_layout",
                            "as": "link_layout_map",
                            "type": "ref"
                        },
                        {
                            "from": "in",
                            "to": "node_editor_props"
                        },
                        {
                            "from": "html_id",
                            "to": "node_editor_props",
                            "as": "html_id"
                        },
                        {
                            "from": "readonly",
                            "to": "node_editor_props",
                            "as": "readonly"
                        },
                        {
                            "from": "hash",
                            "to": "node_editor_props",
                            "as": "hash"
                        },
                        {
                            "from": "html_id",
                            "to": "panzoom_box_props",
                            "as": "html_id"
                        },
                        {
                            "from": "get_selected",
                            "to": "get_selected_node",
                            "as": "selected"
                        },
                        {
                            "from": "node_el_width",
                            "to": "node_editor_props",
                            "as": "node_el_width"
                        },
                        {
                            "from": "dimensions",
                            "to": "node_editor_props",
                            "as": "dimensions"
                        },
                        {
                            "from": "get_nodes",
                            "to": "get_selected_node",
                            "as": "nodes"
                        },
                        {
                            "from": "get_selected_node",
                            "to": "node_editor_props",
                            "as": "selected"
                        },
                        {
                            "from": "onclick_graph",
                            "to": "node_editor_props",
                            "as": "onclick_graph"
                        },
                        {
                            "from": "node_editor_props",
                            "to": "out",
                            "as": "props"
                        },
                        {
                            "from": "node_editor_dom_type",
                            "to": "out",
                            "as": "dom_type"
                        },
                        {
                            "from": "node_layout_map",
                            "to": "node_layout",
                            "as": "node_layout_map",
                            "type": "ref"
                        },
                        {
                            "from": "node_layout",
                            "to": "node_editor_children",
                            "as": "nodes"
                        },
                        {
                            "from": "get_nodes",
                            "to": "node_editor_children_inputs",
                            "as": "nodes"
                        },
                        {
                            "from": "link_layout",
                            "to": "node_editor_children",
                            "as": "links"
                        },
                        {
                            "from": "get_links",
                            "to": "node_editor_children_inputs",
                            "as": "links"
                        },
                        {
                            "from": "defs",
                            "to": "node_editor_children",
                            "as": "defs"
                        },
                        {
                            "from": "marker",
                            "to": "line_end",
                            "as": "dom_type"
                        },
                        {
                            "from": "arrow_path_props",
                            "to": "arrow_path",
                            "as": "props"
                        },
                        {
                            "from": "arrow_path_dom_type",
                            "to": "arrow_path",
                            "as": "dom_type"
                        },
                        {
                            "from": "arrow_path",
                            "to": "line_end",
                            "as": "children"
                        },
                        {
                            "from": "line_end_props",
                            "to": "line_end",
                            "as": "props"
                        },
                        {
                            "from": "line_end",
                            "to": "defs_children",
                            "as": "arrow"
                        },
                        {
                            "from": "fill_filter_flood_props",
                            "to": "fill_filter_flood",
                            "as": "props"
                        },
                        {
                            "from": "fill_filter_flood_dom_type",
                            "to": "fill_filter_flood",
                            "as": "dom_type"
                        },
                        {
                            "from": "fill_filter_flood",
                            "to": "fill_filter_children",
                            "as": "flood"
                        },
                        {
                            "from": "fill_filter_flood_selected_props",
                            "to": "fill_filter_flood_selected",
                            "as": "props"
                        },
                        {
                            "from": "fill_filter_flood_selected_dom_type",
                            "to": "fill_filter_flood_selected",
                            "as": "dom_type"
                        },
                        {
                            "from": "fill_filter_flood_selected",
                            "to": "fill_filter_selected_children",
                            "as": "flood"
                        },
                        {
                            "from": "fill_filter_composite_props",
                            "to": "fill_filter_composite",
                            "as": "props"
                        },
                        {
                            "from": "fill_filter_composite_dom_type",
                            "to": "fill_filter_composite",
                            "as": "dom_type"
                        },
                        {
                            "from": "fill_filter_composite",
                            "to": "fill_filter_children",
                            "as": "comp"
                        },
                        {
                            "from": "fill_filter_children",
                            "to": "fill_filter",
                            "as": "children"
                        },
                        {
                            "from": "fill_filter_props",
                            "to": "fill_filter",
                            "as": "props"
                        },
                        {
                            "from": "fill_filter_composite",
                            "to": "fill_filter_selected_children",
                            "as": "comp"
                        },
                        {
                            "from": "fill_filter_selected_children",
                            "to": "fill_filter_selected",
                            "as": "children"
                        },
                        {
                            "from": "fill_filter_selected_props",
                            "to": "fill_filter_selected",
                            "as": "props"
                        },
                        {
                            "from": "fill_filter_dom_type",
                            "to": "fill_filter",
                            "as": "dom_type"
                        },
                        {
                            "from": "fill_filter_dom_type",
                            "to": "fill_filter_selected",
                            "as": "dom_type"
                        },
                        {
                            "from": "fill_filter",
                            "to": "defs_children",
                            "as": "bg_color"
                        },
                        {
                            "from": "fill_filter_selected",
                            "to": "defs_children",
                            "as": "bg_color_selected"
                        },
                        {
                            "from": "defs_dom_type",
                            "to": "defs",
                            "as": "dom_type"
                        },
                        {
                            "from": "defs_props",
                            "to": "defs",
                            "as": "props"
                        },
                        {
                            "from": "defs_children",
                            "to": "defs",
                            "as": "children"
                        },
                        {
                            "from": "node_editor_children",
                            "to": "panzoom_box",
                            "as": "children"
                        },
                        {"from": "panzoom_box_dom_type", "to": "panzoom_box", "as": "dom_type"},
                        {"from": "panzoom_box_props", "to": "panzoom_box", "as": "props"},
                        {"from": "panzoom_box", "to": "out", "as": "children"},
                        {"from": "panzoom_box_arr", "to": "node_editor", "as": "children"}
                    ]
                },
                {
                    "id": "error_display",
                    "script": "return {el: {dom_type: 'div', props: {class:{error: true, main: true}, key: `${html_id}-error_display`}, children: [{dom_type: 'text_value', text: error instanceof AggregateError ? error.errors.map(e => e.toString()).join(\" \") : error?.toString()}]}}"
                },
                {
                    "id": "noop",
                    "script": "return {el: _lib.ha.h.fn('div', {key: 'loading'}, _lib.ha.text.fn('loading...'))}"
                },
                {
                    "id": "out_input",
                    "script": "return display_graph && graph ? 'hel' : 'noop'"
                },
                {
                    "id": "out",
                    "ref": "switch"
                }
            ],
            "edges": [
                {
                    "from": "graph",
                    "to": "wrapper",
                    "as": "graph"
                },
                {
                    "from": "graph",
                    "to": "out_input",
                    "as": "graph"
                },
                {
                    "from": "display_graph",
                    "to": "out_input",
                    "as": "display_graph"
                },
                {
                    "from": "error",
                    "to": "error_display",
                    "as": "error"
                },
                {
                    "from": "html_id",
                    "to": "error_display",
                    "as": "html_id"
                },
                {
                    "from": "error",
                    "to": "wrapper_children",
                    "as": "error"
                },
                {
                    "from": "search",
                    "to": "wrapper_children",
                    "as": "search"
                },
                {
                    "from": "error_display",
                    "to": "wrapper_children",
                    "as": "error_display"
                },
                {
                    "from": "readonly",
                    "to": "wrapper_children",
                    "as": "readonly"
                },
                {
                    "from": "show_result",
                    "to": "wrapper_children",
                    "as": "show_result"
                },
                {
                    "from": "editing",
                    "to": "wrapper_children",
                    "as": "editing"
                },
                {
                    "from": "popover_graph",
                    "to": "wrapper_children",
                    "as": "popover_graph"
                },
                {
                    "from": "args_display",
                    "to": "wrapper_children",
                    "as": "args_display"
                },
                {
                    "from": "readonly",
                    "to": "node_editor",
                    "as": "readonly"
                },
                {
                    "from": "graph",
                    "to": "node_editor",
                    "as": "graph"
                },
                {
                    "from": "node_editor",
                    "to": "wrapper_children",
                    "as": "node_editor"
                },
                {
                    "from": "edit_text",
                    "to": "wrapper_children",
                    "as": "edit_text"
                },
                {
                    "from": "menu",
                    "to": "wrapper_children",
                    "as": "menu"
                },
                {
                    "from": "result_display",
                    "to": "result_wrapper",
                    "as": "run"
                },
                {
                    "from": "result_display",
                    "to": "wrapper_children",
                    "as": "result_display"
                },
                {
                    "from": "show_all",
                    "to": "wrapper_children",
                    "as": "show_all"
                },
                {
                    "from": "styles",
                    "to": "wrapper_children",
                    "as": "styles"
                },
                {
                    "from": "popover_graph_h",
                    "to": "popover_graph_h_wrapper",
                    "as": "el"
                },
                {
                    "from": "popover_graph_h_wrapper",
                    "to": "wrapper_children",
                    "as": "popover_graph_h"
                },
                {
                    "from": "wrapper_children",
                    "to": "wrapper",
                    "as": "children",
                    "type": "resolve"
                },
                {
                    "from": "wrapper_dom_type",
                    "to": "wrapper",
                    "as": "dom_type"
                },
                {
                    "from": "wrapper_props",
                    "to": "wrapper",
                    "as": "props",
                    "type": "resolve"
                },
                {
                    "from": "out_input",
                    "to": "out",
                    "as": "input"
                },
                {
                    "from": "noop",
                    "to": "out",
                    "as": "noop",
                    "type": "resolve"
                },
                {
                    "from": "wrapper",
                    "to": "out",
                    "as": "hel"
                }
            ]
        }
    ],
    "edges": [
        {
            "from": "editor",
            "to": "hyperapp_view",
            "type": "ref",
            "as": "fn"
        },
        {
            "from": "get_graph",
            "to": "update_sim_fn",
            "as": "graph"
        },
        {
            "from": "error_nodes",
            "to": "hyperapp_init_state",
            "as": "error_nodes"
        },
        {
            "from": "static",
            "to": "hyperapp_init_state",
            "as": "static"
        },
        {
            "from": "readonly",
            "to": "hyperapp_init_state",
            "as": "readonly"
        },
        {
            "from": "hash",
            "to": "hyperapp_init_state",
            "as": "hash"
        },
        {
            "from": "hide_types",
            "to": "hyperapp_init_state",
            "as": "hide_types"
        },
        {
            "from": "dimensions",
            "to": "hyperapp_init_state",
            "as": "dimensions"
        },
        {
            "from": "html_id",
            "to": "hyperapp_init_state",
            "as": "html_id"
        },
        {
            "from": "examples",
            "to": "hyperapp_init_state",
            "as": "examples"
        },
        {
            "from": "display_graph_out",
            "to": "init_selected",
            "as": "a0"
        },
        {
            "from": "init_selected",
            "to": "hyperapp_init_state",
            "as": "selected"
        },
        {
            "from": "update_sim_effect",
            "to": "hyperapp_init_state",
            "as": "update_sim_effect"
        },
        {
            "from": "sim_to_hyperapp_fn",
            "to": "hyperapp_init_state",
            "as": "sim_to_hyperapp"
        },
        {
            "from": "get_graph",
            "to": "onkey_fn",
            "as": "graph"
        },
        {
            "from": "onkey_fn",
            "to": "initialize_hyperapp_app",
            "as": "onkey_fn"
        },
        {
            "from": "onkey_fn_body",
            "to": "onkey_fn",
            "as": "fn",
            "type": "ref"
        },
        {
            "from": "html_id",
            "to": "render_graph_effect",
            "as": "html_id"
        },
        {
            "from": "update_sim_effect",
            "to": "render_graph_effect",
            "as": "update_sim"
        },
        {
            "from": "dummy_graph",
            "to": "render_graph_effect",
            "as": "display_graph"
        },
        {
            "from": "popover_dimensions",
            "to": "render_graph_effect",
            "as": "dimensions"
        },
        {
            "from": "get_graph",
            "to": "render_graph_effect",
            "as": "graph"
        },
        {
            "from": "html_id",
            "to": "initialize_hyperapp_app",
            "as": "html_id"
        },
        {
            "from": "render_graph_effect",
            "to": "_initialize_hyperapp_app",
            "as": "render_graph_effect"
        },
        {
            "from": "hyperapp_view",
            "to": "initialize_hyperapp_app",
            "as": "view"
        },
        {
            "from": "update_hyperapp",
            "to": "update_hyperapp_action",
            "as": "fn",
            "type": "ref"
        },
        {
            "from": "update_hyperapp_action",
            "to": "update_hyperapp_effect",
            "as": "fn"
        },
        {
            "from": "update_hyperapp_effect",
            "to": "initialize_hyperapp_app",
            "as": "update_hyperapp"
        },
        {
            "from": "update_hyperapp_effect",
            "to": "hyperapp_init_state",
            "as": "update_hyperapp"
        },
        {
            "from": "hyperapp_init_state",
            "to": "initialize_hyperapp_app",
            "as": "init"
        },
        {
            "from": "get_graph",
            "to": "hyperapp_view",
            "as": "graph"
        },
        {
            "from": "get_graph",
            "to": "hyperapp_init_state",
            "as": "graph"
        },
        {
            "from": "get_graph",
            "to": "update_nodes",
            "as": "graph"
        },
        {
            "from": "get_display_graph",
            "to": "update_nodes",
            "as": "display_graph"
        },
        {
            "from": "get_display_graph",
            "to": "hyperapp_init_state",
            "as": "display_graph"
        },
        {
            "from": "display_graph_out",
            "to": "calculate_levels",
            "as": "selected"
        },
        {
            "from": "get_display_graph",
            "to": "calculate_levels",
            "as": "display_graph"
        },
        {
            "from": "calculate_levels",
            "to": "hyperapp_init_state",
            "as": "levels"
        },
        {
            "from": "initial_state",
            "to": "hyperapp_init_state"
        },
        {
            "from": "nodes",
            "to": "graph_to_simulation",
            "as": "nodes"
        },
        {
            "from": "links",
            "to": "graph_to_simulation",
            "as": "links"
        },
        {
            "from": "graph_to_simulation",
            "to": "graph_to_sim_action",
            "as": "fn",
            "type": "ref"
        },
        {
            "from": "sim_to_hyperapp",
            "to": "sim_to_hyperapp_fn",
            "as": "fn",
            "type": "ref"
        },
        {
            "from": "sim_to_hyperapp_fn",
            "to": "initialize_hyperapp_app",
            "as": "sim_to_hyperapp_action"
        },
        {
            "from": "graph_to_sim_action",
            "to": "initialize_hyperapp_app",
            "as": "graph_to_sim_action"
        },
        {
            "from": "update_sim_in",
            "to": "update_sim_fn",
            "as": "in_node",
            "type": "ref"
        },
        {
            "from": "update_sim_fn",
            "to": "update_sim_effect",
            "as": "fn"
        },
        {
            "from": "update_sim_effect",
            "to": "editor",
            "as": "update_sim"
        },
        {
            "from": "update_sim_effect",
            "to": "initialize_hyperapp_app",
            "as": "update_sim"
        },
        {
            "from": "initialize_hyperapp_app",
            "to": "out",
            "type": "resolve"
        },
        {"from": "get", "to": "object"},
        {"from": "set", "to": "object"},
        {"from": "delete", "to": "object"},
        {"from": "switch", "to": "flow"},
        {"from": "if", "to": "flow"},
        {"from": "html_element", "to": "html"},
        {"from": "toggle", "to": "html"},
        {"from": "input", "to": "html"},
        {"from": "css_styles", "to": "html"},
        {"from": "modify_state_runnable", "to": "state"},
        {"from": "set_display", "to": "state"},
        {"from": "new_array", "to": "array"},
        {"from": "filter", "to": "array"},
        {"from": "append", "to": "array"},
        {"from": "map", "to": "array"},
        {"from": "log", "to": "utility"},
        {"from": "execute_graph", "to": "utility"},
        {"from": "arg", "to": "utility"},
        {"from": "partial", "to": "utility"},
        {"from": "apply", "to": "utility"},
        {"from": "fetch", "to": "utility"},
        {"from": "merge_objects", "to": "utility"},
        {"from": "stringify", "to": "JSON"}
    ]
}