{"state":{"threejs_deptree/63ao0j1@html.slider/gvk9hec":1.04,"threejs_deptree/6p9mx6e@html.slider/gvk9hec":0.39,"threejs_deptree/d1vzsv5@html.slider/gvk9hec":0.66,"threejs_deptree/johior6@html.slider/gvk9hec":0.75,"threejs_deptree/johior6@html.slider_noloop/gvk9hec":0.5,"threejs_deptree/obvc5t3@html.slider/gvk9hec":0.43,"threejs_deptree/obvc5t3@html.slider_noloop/gvk9hec":1.52,"threejs_deptree/rqwtbpj@html.slider/gvk9hec":0.49},"graphs":[{"edges":{"4n3yk4e":{"as":"value","from":"4n3yk4e","to":"tkxqh5a"},"zlyzyjv":{"as":"args","from":"zlyzyjv","to":"tkxqh5a"},"a23wspb":{"as":"parent","from":"a23wspb","to":"4n3yk4e"},"pnszphc":{"as":"argobjnames","from":"pnszphc","to":"4n3yk4e"},"1kzsgi4":{"as":"array","from":"1kzsgi4","to":"pnszphc"},"grsb8qa":{"as":"fn","from":"grsb8qa","to":"pnszphc"},"49o12hh":{"as":"fn","from":"49o12hh","to":"grsb8qa"},"5ljysw7":{"as":"parameters","from":"5ljysw7","to":"grsb8qa"},"0zs05z2":{"as":"element","from":"0zs05z2","to":"5ljysw7"},"ad6qpuc":{"as":"parent","from":"ad6qpuc","to":"49o12hh"},"b3j4v9i":{"as":"obj","from":"b3j4v9i","to":"49o12hh"},"qjadhr5":{"as":"children","from":"qjadhr5","to":"1kzsgi4"}},"id":"@three.update_children","name":"@three.update_children","nodes":{"tkxqh5a":{"id":"tkxqh5a","name":"@three.update_children","ref":"return"},"zlyzyjv":{"id":"zlyzyjv"},"4n3yk4e":{"id":"4n3yk4e","ref":"@js.script","value":"parent.children.forEach(c => {\n  if(!argobjnames.includes(c.name)){\n    parent.remove(c);\n  }\n})\n\nreturn parent;"},"pnszphc":{"id":"pnszphc","ref":"@data.map"},"grsb8qa":{"id":"grsb8qa","ref":"@flow.runnable"},"5ljysw7":{"id":"5ljysw7","ref":"extern","value":"extern.data"},"0zs05z2":{"id":"0zs05z2"},"49o12hh":{"id":"49o12hh","name":"","ref":"@js.script","value":"const existingObj = parent.getObjectByName(obj.name);\nif(obj && existingObj !== obj){\n  if(existingObj) {\n    parent.remove(existingObj);\n    existingObj.geometry?.dispose();\n    existingObj.material?.dispose();\n  }\n  console.log(\"adding\", obj)\n  parent.add(obj); \n}\nreturn obj.name;"},"b3j4v9i":{"id":"b3j4v9i","ref":"arg","value":"element"},"ad6qpuc":{"id":"ad6qpuc","ref":"arg","value":"parent"},"1kzsgi4":{"id":"1kzsgi4","ref":"@js.script","value":"return children.flat()"},"qjadhr5":{"id":"qjadhr5","ref":"arg","value":"children"},"a23wspb":{"id":"a23wspb","ref":"arg","value":"parent"}},"out":"tkxqh5a"},{"edges":{"lihjkfp":{"as":"value","from":"lihjkfp","to":"main/out"},"x4zdk2w":{"as":"true","from":"x4zdk2w","to":"lihjkfp"},"xsjuu4i":{"as":"pred","from":"xsjuu4i","to":"lihjkfp"},"eyftv46":{"as":"canvas","from":"eyftv46","to":"xsjuu4i"},"cwl59lh":{"as":"canvas","from":"cwl59lh","to":"x4zdk2w"}},"id":"@three.renderer","nodes":{"main/out":{"__isnodysseus":true,"id":"main/out","name":"@three.renderer","ref":"return"},"lihjkfp":{"id":"lihjkfp","ref":"@flow.if"},"xsjuu4i":{"id":"xsjuu4i","ref":"@js.script","value":"console.log(\"three check lib\", _lib)\nreturn _lib.THREE && canvas;"},"eyftv46":{"id":"eyftv46","ref":"arg","value":"canvas"},"x4zdk2w":{"id":"x4zdk2w","ref":"@js.script","value":"const renderer = new _lib.THREE.WebGLRenderer({canvas});\nconsole.log(\"creating renderer\", renderer)\nreturn renderer"},"cwl59lh":{"id":"cwl59lh","name":"","ref":"arg","value":"canvas"}},"out":"main/out"},{"edges":{"5eegbyt":{"as":"lib","from":"5eegbyt","to":"main/out"},"mau19q3":{"as":"value","from":"mau19q3","to":"main/out"},"x4zdk2w":{"as":"value","from":"x4zdk2w","to":"mau19q3"},"glh8wzi":{"as":"THREE","from":"glh8wzi","to":"5eegbyt"},"hqgwi6x":{"as":"value","from":"hqgwi6x","to":"glh8wzi"}},"id":"@three.scene","nodes":{"main/out":{"__isnodysseus":true,"id":"main/out","name":"@three.scene","ref":"return"},"mau19q3":{"id":"mau19q3","ref":"@debug.log","value":"outscene"},"x4zdk2w":{"id":"x4zdk2w","ref":"@js.script","value":"return new _lib.THREE.Scene();"},"5eegbyt":{"id":"5eegbyt"},"glh8wzi":{"id":"glh8wzi","ref":"@memory.cache"},"hqgwi6x":{"id":"hqgwi6x","ref":"@js.import_module","value":"https://cdn.jsdelivr.net/npm/three/build/three.module.js"}},"out":"main/out"},{"description":"A three.js [PerspectiveCamera](https://threejs.org/docs/?q=camera#api/en/cameras/PerspectiveCamera)","edges":{"args":{"as":"args","from":"args","to":"main/out"},"on0gkah":{"as":"lib","from":"on0gkah","to":"main/out"},"x4zdk2w":{"as":"value","from":"x4zdk2w","to":"main/out"},"11u8kd6":{"as":"height","from":"11u8kd6","to":"x4zdk2w"},"qvf3y0y":{"as":"width","from":"qvf3y0y","to":"x4zdk2w"},"dln8uxf":{"as":"THREE","from":"dln8uxf","to":"on0gkah"},"h1x8bxs":{"as":"value","from":"h1x8bxs","to":"dln8uxf"},"n79e1ca":{"as":"THREE","from":"n79e1ca","to":"args"},"vjfgmrl":{"as":"value","from":"vjfgmrl","to":"n79e1ca"}},"id":"@three.camera","nodes":{"main/out":{"__isnodysseus":true,"id":"main/out","name":"@three.camera","ref":"return"},"x4zdk2w":{"id":"x4zdk2w","ref":"@js.script","value":"return new _lib.THREE.PerspectiveCamera( 75, width / height, 0.1, 1000 );"},"qvf3y0y":{"id":"qvf3y0y","ref":"arg","value":"canvas.width"},"11u8kd6":{"id":"11u8kd6","ref":"arg","value":"canvas.height"},"on0gkah":{"id":"on0gkah","ref":"extern","value":"extern.data"},"dln8uxf":{"id":"dln8uxf","ref":"@memory.cache"},"h1x8bxs":{"id":"h1x8bxs","ref":"@js.import_module","value":"https://cdn.jsdelivr.net/npm/three/build/three.module.js"},"args":{"id":"args","ref":"extern","value":"extern.data"},"n79e1ca":{"id":"n79e1ca","ref":"@memory.cache"},"vjfgmrl":{"id":"vjfgmrl","ref":"@js.import_module","value":"https://cdn.jsdelivr.net/npm/three/build/three.module.js"}},"out":"main/out"},{"description":"Creates a basic three.js scene with a camera, renderer, and scene. The `objects` input has the objects of the scene, evaluated every frame - make sure to cache. The `onupdate` input is a runnable with parameters `objects`, `camera`, and `scene` which is run every frame - keep. The `fx` input has effects for an EffectComposer.","edges":{"8m5muxn/39ivise":{"as":"args","from":"8m5muxn/39ivise","to":"8m5muxn/8m5muxn"},"8m5muxn/njzfcz8":{"as":"value","from":"8m5muxn/njzfcz8","to":"8m5muxn/8m5muxn"},"qioaglu":{"as":"lib","from":"qioaglu","to":"8m5muxn/8m5muxn"},"yg3wpau":{"as":"metadata","from":"yg3wpau","to":"8m5muxn/8m5muxn"},"0hdpvrw":{"as":"parameters","from":"0hdpvrw","to":"yg3wpau"},"t3nkm46":{"as":"onupdate","from":"t3nkm46","to":"0hdpvrw"},"y7wb70a":{"as":"runnableParameters","from":"y7wb70a","to":"t3nkm46"},"yb47doj":{"as":"type","from":"yb47doj","to":"t3nkm46"},"kipwn58":{"as":"EffectComposer","from":"kipwn58","to":"qioaglu"},"vl4foaa":{"as":"RenderPass","from":"vl4foaa","to":"qioaglu"},"yt5ewda":{"as":"nodeFrame","from":"yt5ewda","to":"qioaglu"},"dt9q1m5":{"as":"value","from":"dt9q1m5","to":"yt5ewda"},"bqpkucx":{"as":"target","from":"bqpkucx","to":"dt9q1m5"},"7peak26":{"as":"value","from":"7peak26","to":"vl4foaa"},"slle0cq":{"as":"target","from":"slle0cq","to":"7peak26"},"4a9zo9a":{"as":"value","from":"4a9zo9a","to":"kipwn58"},"i39y0i3":{"as":"target","from":"i39y0i3","to":"4a9zo9a"},"8m5muxn/hlqmo48":{"as":"args","from":"8m5muxn/hlqmo48","to":"8m5muxn/njzfcz8"},"8m5muxn/vyr07ts":{"as":"subscribe","from":"8m5muxn/vyr07ts","to":"8m5muxn/njzfcz8"},"jiobf52":{"as":"value","from":"jiobf52","to":"8m5muxn/njzfcz8"},"bolfyb6":{"as":"renderer","from":"bolfyb6","to":"jiobf52"},"vbytevd":{"as":"objects","from":"vbytevd","to":"jiobf52"},"5izf471":{"as":"arg0","from":"5izf471","to":"vbytevd"},"93zbauo":{"as":"arg1","from":"93zbauo","to":"vbytevd"},"jlt4j7w":{"as":"true","from":"jlt4j7w","to":"5izf471"},"vtg79yy":{"as":"pred","from":"vtg79yy","to":"5izf471"},"3azmpq8":{"as":"children","from":"3azmpq8","to":"jlt4j7w"},"gsjsnq6":{"as":"parent","from":"gsjsnq6","to":"jlt4j7w"},"4b08vk7":{"as":"fn","from":"4b08vk7","to":"3azmpq8"},"68gerc9":{"as":"array","from":"68gerc9","to":"3azmpq8"},"b10ohnk":{"as":"false","from":"b10ohnk","to":"68gerc9"},"nxy186l":{"as":"pred","from":"nxy186l","to":"68gerc9"},"vbr6bfa":{"as":"true","from":"vbr6bfa","to":"68gerc9"},"cuqczbo":{"as":"pred","from":"cuqczbo","to":"vbr6bfa"},"cvvim9o":{"as":"true","from":"cvvim9o","to":"vbr6bfa"},"r7h1ra6":{"as":"false","from":"r7h1ra6","to":"vbr6bfa"},"simk3kf":{"as":"entries","from":"simk3kf","to":"r7h1ra6"},"pem42eq":{"as":"object","from":"pem42eq","to":"simk3kf"},"fsculei":{"as":"otherwise","from":"fsculei","to":"pem42eq"},"iass7nj":{"as":"value","from":"iass7nj","to":"pem42eq"},"v3dcfpc":{"as":"value","from":"v3dcfpc","to":"iass7nj"},"1iad2e6":{"as":"obj","from":"1iad2e6","to":"cvvim9o"},"1gxmhg0":{"as":"objs","from":"1gxmhg0","to":"cuqczbo"},"60subyt":{"as":"parameters","from":"60subyt","to":"4b08vk7"},"pv3ip30":{"as":"fn","from":"pv3ip30","to":"4b08vk7"},"dipv2w0":{"as":"value","from":"dipv2w0","to":"pv3ip30"},"ibgd3fg":{"as":"target","from":"ibgd3fg","to":"pv3ip30"},"z7toomi":{"as":"target","from":"z7toomi","to":"ibgd3fg"},"4j1cb5p":{"as":"target","from":"4j1cb5p","to":"dipv2w0"},"xxcz1u7":{"as":"element","from":"xxcz1u7","to":"60subyt"},"slwyovm":{"as":"reference","from":"slwyovm","to":"bolfyb6"},"ptak9t2":{"as":"animationframe","from":"ptak9t2","to":"8m5muxn/vyr07ts"},"c6eig78":{"as":"fn","from":"c6eig78","to":"ptak9t2"},"7c7zppx":{"as":"arg2","from":"7c7zppx","to":"c6eig78"},"rmqxb31":{"as":"arg4","from":"rmqxb31","to":"c6eig78"},"z552097":{"as":"arg5","from":"z552097","to":"c6eig78"},"dyst9ju":{"as":"fn","from":"dyst9ju","to":"z552097"},"1js087x":{"as":"camera","from":"1js087x","to":"dyst9ju"},"cha35wd":{"as":"scene","from":"cha35wd","to":"dyst9ju"},"cvop6x9":{"as":"renderer","from":"cvop6x9","to":"dyst9ju"},"3jbd385":{"as":"value","from":"3jbd385","to":"cvop6x9"},"e9d6mmx":{"as":"otherwise","from":"e9d6mmx","to":"cvop6x9"},"0wp18c9":{"as":"args","from":"0wp18c9","to":"e9d6mmx"},"cwrlosg":{"as":"run","from":"cwrlosg","to":"e9d6mmx"},"jjmvxjj":{"as":"fn","from":"jjmvxjj","to":"e9d6mmx"},"vc0quhz":{"as":"value","from":"vc0quhz","to":"0wp18c9"},"lugpx4o":{"as":"value","from":"lugpx4o","to":"vc0quhz"},"6s18wo7":{"as":"camera","from":"6s18wo7","to":"lugpx4o"},"eamyj81":{"as":"scene","from":"eamyj81","to":"lugpx4o"},"svcshll":{"as":"canvas","from":"svcshll","to":"lugpx4o"},"tgacxe5":{"as":"renderer","from":"tgacxe5","to":"lugpx4o"},"vwa13pj":{"as":"fx","from":"vwa13pj","to":"lugpx4o"},"vzmvbqh":{"as":"MotionBlur","from":"vzmvbqh","to":"lugpx4o"},"23ppkmp":{"as":"pred","from":"23ppkmp","to":"vzmvbqh"},"3876w2f":{"as":"true","from":"3876w2f","to":"vzmvbqh"},"ya36a1r":{"as":"module","from":"ya36a1r","to":"3876w2f"},"fzf3k5e":{"as":"RenderPass","from":"fzf3k5e","to":"vwa13pj"},"gap7au7":{"as":"EffectComposer","from":"gap7au7","to":"vwa13pj"},"hsytqp3":{"as":"value","from":"hsytqp3","to":"tgacxe5"},"1j95u16":{"as":"canvas","from":"1j95u16","to":"hsytqp3"},"zs7iowa":{"as":"reference","from":"zs7iowa","to":"3jbd385"},"b2z2580":{"as":"true","from":"b2z2580","to":"rmqxb31"},"mh5ikoc":{"as":"pred","from":"mh5ikoc","to":"rmqxb31"},"m291v0o":{"as":"args","from":"m291v0o","to":"b2z2580"},"wcnk2sw":{"as":"fn","from":"wcnk2sw","to":"b2z2580"},"2veqlq1":{"as":"scene","from":"2veqlq1","to":"m291v0o"},"y2f8gog":{"as":"camera","from":"y2f8gog","to":"m291v0o"},"aqfc51v":{"as":"fn","from":"aqfc51v","to":"7c7zppx"},"5m99dxg":{"as":"true","from":"5m99dxg","to":"aqfc51v"},"x638fhv":{"as":"pred","from":"x638fhv","to":"aqfc51v"},"tfl58nu":{"as":"arg0","from":"tfl58nu","to":"x638fhv"},"xmd2fqb":{"as":"arg1","from":"xmd2fqb","to":"x638fhv"},"xel6go6":{"as":"reference","from":"xel6go6","to":"tfl58nu"},"fznso76":{"as":"fx","from":"fznso76","to":"5m99dxg"},"t181hfh":{"as":"renderer","from":"t181hfh","to":"5m99dxg"},"4fxcgml":{"as":"reference","from":"4fxcgml","to":"t181hfh"},"8m5muxn/7in78pu":{"as":"_camera","from":"8m5muxn/7in78pu","to":"8m5muxn/hlqmo48"},"8m5muxn/inq87j9":{"as":"_scene","from":"8m5muxn/inq87j9","to":"8m5muxn/hlqmo48"},"8m5muxn/gwavfrm":{"as":"value","from":"8m5muxn/gwavfrm","to":"8m5muxn/inq87j9"},"8m5muxn/33kmaec":{"as":"target","from":"8m5muxn/33kmaec","to":"8m5muxn/7in78pu"},"8m5muxn/v1nqvl7":{"as":"value","from":"8m5muxn/v1nqvl7","to":"8m5muxn/7in78pu"},"8m5muxn/zci8apj":{"as":"value","from":"8m5muxn/zci8apj","to":"8m5muxn/33kmaec"},"t8adnxm":{"as":"canvas","from":"t8adnxm","to":"8m5muxn/zci8apj"},"40aw44l":{"as":"_renderer","from":"40aw44l","to":"8m5muxn/39ivise"}},"id":"@three.setup","name":"three.setup","nodes":{"8m5muxn/8m5muxn":{"id":"8m5muxn/8m5muxn","name":"@three.setup","ref":"return"},"yg3wpau":{"id":"yg3wpau"},"0hdpvrw":{"id":"0hdpvrw"},"t3nkm46":{"id":"t3nkm46"},"yb47doj":{"id":"yb47doj","value":"@flow.runnable"},"y7wb70a":{"id":"y7wb70a","ref":"@data.array","value":"objects, camera"},"qioaglu":{"id":"qioaglu"},"yt5ewda":{"id":"yt5ewda","ref":"@memory.cache"},"dt9q1m5":{"id":"dt9q1m5","ref":"@data.get","value":"nodeFrame"},"bqpkucx":{"id":"bqpkucx","ref":"@js.import_module","value":"https://cdn.jsdelivr.net/npm/three/examples/jsm/renderers/webgl/nodes/WebGLNodes.js"},"vl4foaa":{"id":"vl4foaa","ref":"@memory.cache"},"7peak26":{"id":"7peak26","ref":"@data.get","value":"RenderPass"},"slle0cq":{"id":"slle0cq","ref":"@js.import_module","value":"https://cdn.jsdelivr.net/npm/three/examples/jsm/postprocessing/RenderPass.js"},"kipwn58":{"id":"kipwn58","ref":"@memory.cache"},"4a9zo9a":{"id":"4a9zo9a","ref":"@data.get","value":"EffectComposer"},"i39y0i3":{"id":"i39y0i3","ref":"@js.import_module","value":"https://cdn.jsdelivr.net/npm/three/examples/jsm/postprocessing/EffectComposer.js"},"8m5muxn/njzfcz8":{"id":"8m5muxn/njzfcz8","name":"","ref":"return"},"jiobf52":{"id":"jiobf52"},"vbytevd":{"id":"vbytevd","ref":"@js.script","value":"return arg0;"},"93zbauo":{"id":"93zbauo","ref":"arg","value":"objects"},"5izf471":{"id":"5izf471","ref":"@flow.if"},"vtg79yy":{"id":"vtg79yy","ref":"arg","value":"_scene"},"jlt4j7w":{"id":"jlt4j7w","ref":"@three.update_children"},"gsjsnq6":{"id":"gsjsnq6","ref":"arg","value":"_scene"},"3azmpq8":{"id":"3azmpq8","ref":"@data.map"},"68gerc9":{"id":"68gerc9","ref":"@flow.if"},"vbr6bfa":{"id":"vbr6bfa","ref":"@flow.if"},"r7h1ra6":{"id":"r7h1ra6","ref":"@js.script","value":"return entries.flatMap(e => e?.[1] && Array.isArray(e[1]) ? e[1].map((c, i) => [e[0] + i, c]) : [e]).filter(e => e[1]);"},"simk3kf":{"id":"simk3kf","ref":"@data.object_entries"},"pem42eq":{"id":"pem42eq","ref":"@flow.default"},"iass7nj":{"id":"iass7nj","ref":"@debug.log","value":"innerobjs"},"v3dcfpc":{"id":"v3dcfpc","ref":"arg","value":"objects"},"fsculei":{"id":"fsculei","value":"{}"},"cvvim9o":{"id":"cvvim9o","ref":"@js.script","value":"// compensate for automatic passthrough\nreturn [[\"arg0\", obj]]"},"1iad2e6":{"id":"1iad2e6","ref":"arg","value":"objects"},"cuqczbo":{"id":"cuqczbo","ref":"@js.script","value":"return objs instanceof _lib.THREE.Object3D"},"1gxmhg0":{"id":"1gxmhg0","ref":"arg","value":"objects"},"nxy186l":{"id":"nxy186l","ref":"arg","value":"objects"},"b10ohnk":{"id":"b10ohnk","ref":"@data.array"},"4b08vk7":{"id":"4b08vk7","ref":"@flow.runnable"},"pv3ip30":{"id":"pv3ip30","ref":"@data.set_mutable","value":"name"},"ibgd3fg":{"id":"ibgd3fg","ref":"@data.get","value":"1"},"z7toomi":{"id":"z7toomi","ref":"arg","value":"element"},"dipv2w0":{"id":"dipv2w0","ref":"@data.get","value":"0"},"4j1cb5p":{"id":"4j1cb5p","ref":"arg","value":"element"},"60subyt":{"id":"60subyt"},"xxcz1u7":{"id":"xxcz1u7"},"bolfyb6":{"id":"bolfyb6","ref":"@memory.readReference"},"slwyovm":{"id":"slwyovm","ref":"arg","value":"_renderer"},"8m5muxn/vyr07ts":{"id":"8m5muxn/vyr07ts","name":""},"ptak9t2":{"id":"ptak9t2","name":"","ref":"@flow.ap"},"c6eig78":{"id":"c6eig78","ref":"@data.array"},"z552097":{"id":"z552097","ref":"@flow.runnable"},"dyst9ju":{"id":"dyst9ju","ref":"@js.script","value":"if(renderer) {\n  //renderer.render(scene, camera);\n  _lib.nodeFrame.update();\n  renderer.render();\n}"},"cvop6x9":{"id":"cvop6x9","ref":"@flow.default"},"e9d6mmx":{"id":"e9d6mmx","ref":"@flow.ap"},"jjmvxjj":{"id":"jjmvxjj","ref":"arg","value":"_renderer.set"},"cwrlosg":{"id":"cwrlosg","value":"true"},"0wp18c9":{"id":"0wp18c9"},"vc0quhz":{"id":"vc0quhz","ref":"@memory.cache"},"lugpx4o":{"id":"lugpx4o","ref":"@js.script","value":"console.log(\"top renderer\", renderer, canvas)\nif(!renderer){\n  return;\n}\nconst fxcomposer = new fx.EffectComposer(renderer)\nconst renderpass = new fx.RenderPass(scene, camera);\nfxcomposer.setSize(canvas.width, canvas.height);\nfxcomposer.addPass(renderpass);\nif(MotionBlur) {\n  const pass = new MotionBlur(scene, camera, { samples: 32, expandgeometry: 0.4 });\n  fxcomposer.addPass(pass);\n  pass.renderToScreen = true;\n}\nreturn fxcomposer;"},"vzmvbqh":{"id":"vzmvbqh","ref":"@flow.if"},"3876w2f":{"id":"3876w2f","ref":"@js.script","value":"return module.MotionBlurPass;"},"ya36a1r":{"id":"ya36a1r","ref":"@js.import_module","value":"https://cdn.jsdelivr.net/gh/ulyssesdotcodes/threejs-sandbox@94c68f4/motionBlurPass/src/MotionBlurPass.js"},"23ppkmp":{"id":"23ppkmp","ref":"arg","value":"motionBlur"},"vwa13pj":{"id":"vwa13pj"},"gap7au7":{"id":"gap7au7","ref":"arg","value":"_lib.EffectComposer"},"fzf3k5e":{"id":"fzf3k5e","ref":"arg","value":"_lib.RenderPass"},"tgacxe5":{"id":"tgacxe5","ref":"@memory.cache"},"hsytqp3":{"id":"hsytqp3","name":"","ref":"@three.renderer"},"1j95u16":{"id":"1j95u16","ref":"arg","value":"canvas"},"svcshll":{"id":"svcshll","ref":"arg","value":"canvas"},"eamyj81":{"id":"eamyj81","ref":"arg","value":"_scene: internal"},"6s18wo7":{"id":"6s18wo7","ref":"arg","value":"_camera: internal"},"3jbd385":{"id":"3jbd385","ref":"@memory.readReference"},"zs7iowa":{"id":"zs7iowa","ref":"arg","value":"_renderer"},"cha35wd":{"id":"cha35wd","ref":"arg","value":"_scene: internal"},"1js087x":{"id":"1js087x","ref":"arg","value":"_camera: internal"},"rmqxb31":{"id":"rmqxb31","ref":"@flow.if"},"mh5ikoc":{"id":"mh5ikoc","ref":"arg","value":"onupdate"},"b2z2580":{"id":"b2z2580","ref":"@flow.ap"},"wcnk2sw":{"id":"wcnk2sw","ref":"arg","value":"onupdate"},"m291v0o":{"id":"m291v0o"},"y2f8gog":{"id":"y2f8gog","ref":"arg","value":"_camera: internal"},"2veqlq1":{"id":"2veqlq1","ref":"arg","value":"_scene"},"7c7zppx":{"id":"7c7zppx","ref":"@flow.runnable"},"aqfc51v":{"id":"aqfc51v","ref":"@flow.if"},"x638fhv":{"id":"x638fhv","ref":"@js.script","value":"\nreturn arg1 && arg0"},"xmd2fqb":{"id":"xmd2fqb","ref":"arg","value":"fx"},"tfl58nu":{"id":"tfl58nu","ref":"@memory.readReference"},"xel6go6":{"id":"xel6go6","ref":"arg","value":"_renderer"},"5m99dxg":{"id":"5m99dxg","ref":"@js.script","value":"fx?.forEach((pass, idx) => {\n  // +1 for renderpass\n  if(renderer.passes[idx + 1] !== pass) {\n    if(renderer.passes.length > idx + 1) {\n      console.log(\"removing\", idx)  \n      renderer.removePass(renderer.passes[idx + 1]);\n    }\n    console.log(\"adding fx \", pass)\n    renderer.insertPass(pass, idx + 1);\n  }\n});\n\nif(fx && renderer.passes.length > fx?.length + 1) {\n  renderer.passes.splice(fx.length, renderer.passes.length)\n}"},"t181hfh":{"id":"t181hfh","ref":"@memory.readReference"},"4fxcgml":{"id":"4fxcgml","ref":"arg","value":"_renderer"},"fznso76":{"id":"fznso76","ref":"arg","value":"fx"},"8m5muxn/hlqmo48":{"id":"8m5muxn/hlqmo48"},"8m5muxn/inq87j9":{"id":"8m5muxn/inq87j9","name":"","ref":"@memory.cache"},"8m5muxn/gwavfrm":{"__isnodysseus":true,"id":"8m5muxn/gwavfrm","ref":"@three.scene","value":""},"8m5muxn/7in78pu":{"id":"8m5muxn/7in78pu","ref":"@data.set_mutable","value":"position.z"},"8m5muxn/v1nqvl7":{"id":"8m5muxn/v1nqvl7","value":"5"},"8m5muxn/33kmaec":{"id":"8m5muxn/33kmaec","ref":"@memory.cache"},"8m5muxn/zci8apj":{"__isnodysseus":true,"id":"8m5muxn/zci8apj","ref":"@three.camera","value":""},"t8adnxm":{"id":"t8adnxm","ref":"arg","value":"canvas"},"8m5muxn/39ivise":{"id":"8m5muxn/39ivise"},"40aw44l":{"id":"40aw44l","ref":"@memory.reference"}},"out":"8m5muxn/8m5muxn"},{"edges":{"0i85qjj":{"as":"args","from":"0i85qjj","to":"out"},"y407zfo":{"as":"display","from":"y407zfo","to":"out"},"a6rdag9":{"as":"props","from":"a6rdag9","to":"y407zfo"},"av63lw9":{"as":"value","from":"av63lw9","to":"y407zfo"},"sb9qdgy":{"as":"children","from":"sb9qdgy","to":"y407zfo"},"5mog0bc":{"as":"arg1","from":"5mog0bc","to":"sb9qdgy"},"doz740g":{"as":"arg0","from":"doz740g","to":"sb9qdgy"},"kyu6h8m":{"as":"arg2","from":"kyu6h8m","to":"sb9qdgy"},"ewycyaq":{"as":"text","from":"ewycyaq","to":"kyu6h8m"},"g1g0g8v":{"as":"value","from":"g1g0g8v","to":"ewycyaq"},"kemzelr":{"as":"otherwise","from":"kemzelr","to":"ewycyaq"},"bts7694":{"as":"reference","from":"bts7694","to":"kemzelr"},"vgishln":{"as":"reference","from":"vgishln","to":"g1g0g8v"},"racg3p7":{"as":"text","from":"racg3p7","to":"doz740g"},"24q0egm":{"as":"props","from":"24q0egm","to":"5mog0bc"},"1dhoyv2":{"as":"max","from":"1dhoyv2","to":"24q0egm"},"7c2vt3d":{"as":"min","from":"7c2vt3d","to":"24q0egm"},"mpbvtrq":{"as":"type","from":"mpbvtrq","to":"24q0egm"},"old0t0c":{"as":"oninput","from":"old0t0c","to":"24q0egm"},"tksk4wc":{"as":"value","from":"tksk4wc","to":"24q0egm"},"v0qabyr":{"as":"onchange","from":"v0qabyr","to":"24q0egm"},"yv0o41n":{"as":"step","from":"yv0o41n","to":"24q0egm"},"q09a315":{"as":"otherwise","from":"q09a315","to":"yv0o41n"},"z3jopgg":{"as":"value","from":"z3jopgg","to":"yv0o41n"},"d86emo2":{"as":"fn","from":"d86emo2","to":"v0qabyr"},"oqbuspj":{"as":"args","from":"oqbuspj","to":"v0qabyr"},"nrhhdip":{"as":"value","from":"nrhhdip","to":"oqbuspj"},"z8c7kcy":{"as":"val","from":"z8c7kcy","to":"nrhhdip"},"8f3izp7":{"as":"arg1","from":"8f3izp7","to":"d86emo2"},"gtpf6x9":{"as":"arg0","from":"gtpf6x9","to":"d86emo2"},"mj95l7h":{"as":"value","from":"mj95l7h","to":"tksk4wc"},"p47rqct":{"as":"otherwise","from":"p47rqct","to":"tksk4wc"},"d1wcpk1":{"as":"reference","from":"d1wcpk1","to":"p47rqct"},"sv49nso":{"as":"reference","from":"sv49nso","to":"mj95l7h"},"2wp8ffd":{"as":"fn","from":"2wp8ffd","to":"old0t0c"},"ezx9hxj":{"as":"args","from":"ezx9hxj","to":"old0t0c"},"parseval":{"as":"value","from":"parseval","to":"ezx9hxj"},"gibdj45":{"as":"val","from":"gibdj45","to":"parseval"},"4dh6wzn":{"as":"arg1","from":"4dh6wzn","to":"2wp8ffd"},"l5bzesi":{"as":"arg0","from":"l5bzesi","to":"2wp8ffd"},"fd7yax9":{"as":"value","from":"fd7yax9","to":"7c2vt3d"},"r1ah7g2":{"as":"otherwise","from":"r1ah7g2","to":"7c2vt3d"},"4subc0j":{"as":"graphval","from":"4subc0j","to":"1dhoyv2"},"x4vnm62":{"as":"argmax","from":"x4vnm62","to":"1dhoyv2"},"94ihn5j":{"as":"sliderval","from":"94ihn5j","to":"av63lw9"},"pwjs1oz":{"as":"state","from":"pwjs1oz","to":"av63lw9"},"wef3bm9":{"as":"value","from":"wef3bm9","to":"av63lw9"},"n4i4t17":{"as":"reference","from":"n4i4t17","to":"94ihn5j"},"sxjhepz":{"as":"style","from":"sxjhepz","to":"a6rdag9"},"93rx3ru":{"as":"display","from":"93rx3ru","to":"sxjhepz"},"q8ugbch":{"as":"flex-direction","from":"q8ugbch","to":"sxjhepz"},"gvk9hec":{"as":"_sliderstate","from":"gvk9hec","to":"0i85qjj"},"t1deznd":{"as":"_sliderval","from":"t1deznd","to":"0i85qjj"},"u4k2auv":{"as":"label","from":"u4k2auv","to":"0i85qjj"},"slidervalpublish":{"as":"publish","from":"slidervalpublish","to":"t1deznd"},"fgmcy0x":{"as":"publish","from":"fgmcy0x","to":"gvk9hec"},"h19qe28":{"as":"persist","from":"h19qe28","to":"gvk9hec"},"r0fsdrm":{"as":"value","from":"r0fsdrm","to":"gvk9hec"},"34k9xvb":{"as":"max","from":"34k9xvb","to":"r0fsdrm"},"e996mm5":{"as":"min","from":"e996mm5","to":"r0fsdrm"},"on0cfjb":{"as":"graphval","from":"on0cfjb","to":"34k9xvb"},"x4fmyaa":{"as":"argmax","from":"x4fmyaa","to":"34k9xvb"}},"id":"@html.slider_noloop","nodes":{"out":{"id":"out","name":"@html.slider_noloop","ref":"return"},"y407zfo":{"id":"y407zfo","ref":"@html.html_element"},"sb9qdgy":{"id":"sb9qdgy","ref":"@data.array"},"kyu6h8m":{"id":"kyu6h8m","ref":"@html.html_text"},"ewycyaq":{"id":"ewycyaq","ref":"@flow.default","value":"console.log(\"text val\", value);\nreturn value"},"kemzelr":{"id":"kemzelr","ref":"@memory.readReference"},"bts7694":{"id":"bts7694","ref":"arg","value":"_sliderstate"},"g1g0g8v":{"id":"g1g0g8v","ref":"@memory.readReference"},"vgishln":{"id":"vgishln","ref":"arg","value":"_sliderval"},"doz740g":{"id":"doz740g","ref":"@html.html_text"},"racg3p7":{"id":"racg3p7","ref":"arg","value":"label"},"5mog0bc":{"id":"5mog0bc","ref":"@html.html_element","value":"input"},"24q0egm":{"id":"24q0egm"},"yv0o41n":{"id":"yv0o41n","ref":"@flow.default"},"z3jopgg":{"id":"z3jopgg","ref":"arg","value":"step"},"q09a315":{"id":"q09a315","ref":"","value":"0.01"},"v0qabyr":{"id":"v0qabyr","ref":"@flow.ap"},"oqbuspj":{"id":"oqbuspj"},"nrhhdip":{"id":"nrhhdip","ref":"@js.script","value":"return parseFloat(val)"},"z8c7kcy":{"id":"z8c7kcy","ref":"arg","value":"event.target.value"},"d86emo2":{"id":"d86emo2","ref":"@data.array"},"gtpf6x9":{"id":"gtpf6x9","ref":"arg","value":"_sliderstate.set"},"8f3izp7":{"id":"8f3izp7","ref":"arg","value":"onchange"},"tksk4wc":{"id":"tksk4wc","ref":"@flow.default"},"p47rqct":{"id":"p47rqct","ref":"@memory.readReference"},"d1wcpk1":{"id":"d1wcpk1","ref":"arg","value":"_sliderstate"},"mj95l7h":{"id":"mj95l7h","ref":"@memory.readReference"},"sv49nso":{"id":"sv49nso","ref":"arg","value":"_sliderval"},"old0t0c":{"id":"old0t0c","ref":"@flow.ap"},"ezx9hxj":{"id":"ezx9hxj"},"parseval":{"id":"parseval","ref":"@js.script","value":"return parseFloat(val)"},"gibdj45":{"id":"gibdj45","ref":"arg","value":"event.target.value"},"2wp8ffd":{"id":"2wp8ffd","ref":"@data.array"},"l5bzesi":{"id":"l5bzesi","ref":"arg","value":"_sliderval.set"},"4dh6wzn":{"id":"4dh6wzn","ref":"arg","value":"oninput"},"mpbvtrq":{"id":"mpbvtrq","value":"range"},"7c2vt3d":{"id":"7c2vt3d","ref":"@flow.default"},"r1ah7g2":{"id":"r1ah7g2","value":"0.0"},"fd7yax9":{"id":"fd7yax9","ref":"arg","value":"min"},"1dhoyv2":{"id":"1dhoyv2","ref":"@js.script","value":"return !isNaN(argmax) ? argmax : !isNaN(graphval) ? graphval : 1.0"},"x4vnm62":{"id":"x4vnm62","ref":"arg","value":"max"},"4subc0j":{"id":"4subc0j","ref":"arg","value":"__graph_value"},"av63lw9":{"id":"av63lw9","ref":"@js.script","value":"return sliderval !== undefined && sliderval?.__kind !== \"nothing\" ? value : state"},"wef3bm9":{"id":"wef3bm9","ref":"arg","value":"_sliderval"},"pwjs1oz":{"id":"pwjs1oz","ref":"arg","value":"_sliderstate"},"94ihn5j":{"id":"94ihn5j","ref":"@memory.readReference"},"n4i4t17":{"id":"n4i4t17","ref":"arg","value":"_sliderval"},"a6rdag9":{"id":"a6rdag9"},"sxjhepz":{"id":"sxjhepz"},"q8ugbch":{"id":"q8ugbch","value":"row"},"93rx3ru":{"id":"93rx3ru","value":"flex"},"0i85qjj":{"id":"0i85qjj"},"u4k2auv":{"id":"u4k2auv","value":"Slider"},"t1deznd":{"id":"t1deznd","ref":"@memory.reference"},"slidervalpublish":{"id":"slidervalpublish","value":"true"},"gvk9hec":{"id":"gvk9hec","ref":"@memory.state"},"r0fsdrm":{"id":"r0fsdrm","ref":"@js.script","value":"return 0.5 * ((max ?? 1) - (min ?? 0)) + (min ?? 0)"},"e996mm5":{"id":"e996mm5","ref":"arg","value":"min"},"34k9xvb":{"id":"34k9xvb","ref":"@js.script","value":"return !isNaN(argmax) ? argmax : !isNaN(graphval) ? graphval : 1.0"},"x4fmyaa":{"id":"x4fmyaa","ref":"arg","value":"max"},"on0cfjb":{"id":"on0cfjb","ref":"arg","value":"__graph_value"},"h19qe28":{"id":"h19qe28","value":"true"},"fgmcy0x":{"id":"fgmcy0x","value":"true"}},"out":"out"},{"description":"Creates a mesh with the `geometry` and `material` inputs","edges":{"6mh34xg":{"as":"metadata","from":"6mh34xg","to":"out"},"azms2lq":{"as":"dependencies","from":"azms2lq","to":"out"},"output_val":{"as":"value","from":"output_val","to":"out"},"tarqdum":{"as":"args","from":"tarqdum","to":"out"},"5nudo40":{"as":"true","from":"5nudo40","to":"output_val"},"euzoog2":{"as":"pred","from":"euzoog2","to":"output_val"},"h9a5ot3":{"as":"args","from":"h9a5ot3","to":"5nudo40"},"ij95dcr":{"as":"arg0","from":"ij95dcr","to":"5nudo40"},"w20zv3g":{"as":"value","from":"w20zv3g","to":"ij95dcr"},"1eeluqm":{"as":"value","from":"1eeluqm","to":"w20zv3g"},"bj8452k":{"as":"value","from":"bj8452k","to":"1eeluqm"},"r9ngnn4":{"as":"arg0","from":"r9ngnn4","to":"h9a5ot3"},"xuoy9bd":{"as":"arg1","from":"xuoy9bd","to":"h9a5ot3"},"fh81etg":{"as":"geo","from":"fh81etg","to":"azms2lq"},"wezuyts":{"as":"material","from":"wezuyts","to":"azms2lq"},"0pm0fel":{"as":"parameters","from":"0pm0fel","to":"6mh34xg"},"bf9pe5s":{"as":"geometry","from":"bf9pe5s","to":"0pm0fel"},"yp7zxat":{"as":"material","from":"yp7zxat","to":"0pm0fel"}},"id":"@three.mesh","nodes":{"out":{"id":"out","name":"@three.mesh","ref":"return"},"tarqdum":{"id":"tarqdum"},"output_val":{"id":"output_val","ref":"@flow.if"},"euzoog2":{"id":"euzoog2","ref":"arg","value":"geometry"},"5nudo40":{"id":"5nudo40","ref":"@js.script","value":"return new _lib.THREE.Mesh(...args);"},"ij95dcr":{"id":"ij95dcr","ref":"@debug.log","value":"scriptgeoischanged"},"w20zv3g":{"id":"w20zv3g","ref":"@data.ischanged"},"1eeluqm":{"id":"1eeluqm","ref":"@debug.log","value":"scripgeoinput"},"bj8452k":{"id":"bj8452k","ref":"arg","value":"geo"},"h9a5ot3":{"id":"h9a5ot3","ref":"@data.array"},"xuoy9bd":{"id":"xuoy9bd","ref":"arg","value":"material"},"r9ngnn4":{"id":"r9ngnn4","ref":"arg","value":"geometry"},"azms2lq":{"id":"azms2lq"},"wezuyts":{"id":"wezuyts","ref":"arg","value":"material"},"fh81etg":{"id":"fh81etg","ref":"arg","value":"geometry"},"6mh34xg":{"id":"6mh34xg"},"0pm0fel":{"id":"0pm0fel"},"yp7zxat":{"id":"yp7zxat","value":"@three.node"},"bf9pe5s":{"id":"bf9pe5s","value":"@three.geometry"}},"out":"out"},{"edges":{"8dy573e":{"as":"display","from":"8dy573e","to":"out"},"args":{"as":"args","from":"args","to":"out"},"splq7ug":{"as":"value","from":"splq7ug","to":"out"},"oh2v6pq":{"as":"pred","from":"oh2v6pq","to":"splq7ug"},"vn2sh9e":{"as":"true","from":"vn2sh9e","to":"splq7ug"},"y4gwi1o":{"as":"false","from":"y4gwi1o","to":"splq7ug"},"84lpyxq":{"as":"value","from":"84lpyxq","to":"vn2sh9e"},"ohrirfq":{"as":"args","from":"ohrirfq","to":"vn2sh9e"},"a10w5r5":{"as":"_initgeo","from":"a10w5r5","to":"ohrirfq"},"vlxve1t":{"as":"value","from":"vlxve1t","to":"a10w5r5"},"5m7ypog":{"as":"pred","from":"5m7ypog","to":"84lpyxq"},"8itq35i":{"as":"true","from":"8itq35i","to":"84lpyxq"},"90q41gu":{"as":"update","from":"90q41gu","to":"8itq35i"},"y31kzli":{"as":"geo","from":"y31kzli","to":"8itq35i"},"9sqfffy":{"as":"value","from":"9sqfffy","to":"90q41gu"},"uplws96":{"as":"recache","from":"uplws96","to":"90q41gu"},"1gvyfv3":{"as":"arg1","from":"1gvyfv3","to":"uplws96"},"1x4br4o":{"as":"values","from":"1x4br4o","to":"uplws96"},"gvhqdhu":{"as":"arg0","from":"gvhqdhu","to":"uplws96"},"c4rxcjv":{"as":"arg1","from":"c4rxcjv","to":"1x4br4o"},"wvj1p1r":{"as":"arg0","from":"wvj1p1r","to":"1x4br4o"},"k5f4hu0":{"as":"value","from":"k5f4hu0","to":"wvj1p1r"},"rd10d2x":{"as":"value","from":"rd10d2x","to":"c4rxcjv"},"8g09muv":{"as":"value","from":"8g09muv","to":"9sqfffy"},"rguemo9":{"as":"args","from":"rguemo9","to":"9sqfffy"},"3hu1ap0":{"as":"_fn","from":"3hu1ap0","to":"rguemo9"},"9xa3tmr":{"as":"_initbuffer","from":"9xa3tmr","to":"rguemo9"},"asaag3y":{"as":"_inputgeofn","from":"asaag3y","to":"rguemo9"},"fasv291":{"as":"_attributes","from":"fasv291","to":"rguemo9"},"gu5lz7s":{"as":"_lag","from":"gu5lz7s","to":"rguemo9"},"ufnr75u":{"as":"_fb","from":"ufnr75u","to":"rguemo9"},"x0s5rek":{"as":"_initgeofn","from":"x0s5rek","to":"rguemo9"},"r094qmn":{"as":"value","from":"r094qmn","to":"ufnr75u"},"w2blnji":{"as":"otherwise","from":"w2blnji","to":"ufnr75u"},"vwfrg0o":{"as":"reference","from":"vwfrg0o","to":"w2blnji"},"03sh3lc":{"as":"value","from":"03sh3lc","to":"r094qmn"},"uf0wi9m":{"as":"attr","from":"uf0wi9m","to":"fasv291"},"3h860a0":{"as":"value","from":"3h860a0","to":"uf0wi9m"},"jnmh0h3":{"as":"otherwise","from":"jnmh0h3","to":"uf0wi9m"},"euaw78z":{"as":"otherwise","from":"euaw78z","to":"jnmh0h3"},"qzupnpg":{"as":"value","from":"qzupnpg","to":"jnmh0h3"},"osma418":{"as":"value","from":"osma418","to":"9xa3tmr"},"1p3zq1m":{"as":"buffer","from":"1p3zq1m","to":"osma418"},"7twfyoe":{"as":"false","from":"7twfyoe","to":"3hu1ap0"},"jcuffnj":{"as":"pred","from":"jcuffnj","to":"3hu1ap0"},"k1k5w8g":{"as":"true","from":"k1k5w8g","to":"3hu1ap0"},"8ri2ijg":{"as":"fn","from":"8ri2ijg","to":"jcuffnj"},"dza658p":{"as":"runnable","from":"dza658p","to":"7twfyoe"},"l63qymv":{"as":"runnable","from":"l63qymv","to":"8g09muv"},"wwnvi83":{"as":"fn","from":"wwnvi83","to":"l63qymv"},"3w2rmuu":{"as":"lag","from":"3w2rmuu","to":"wwnvi83"},"cfg6cwi":{"as":"feedback","from":"cfg6cwi","to":"wwnvi83"},"hyvpcan":{"as":"initbuffer","from":"hyvpcan","to":"wwnvi83"},"ron9hq7":{"as":"fn","from":"ron9hq7","to":"wwnvi83"},"s61o3sv":{"as":"inputgeo","from":"s61o3sv","to":"wwnvi83"},"x210zde":{"as":"initgeo","from":"x210zde","to":"wwnvi83"},"zwgcvcc":{"as":"attributes","from":"zwgcvcc","to":"wwnvi83"},"d16msy7":{"as":"fn","from":"d16msy7","to":"5m7ypog"},"pgjrhjg":{"as":"geo","from":"pgjrhjg","to":"5m7ypog"},"c272oro":{"as":"values","from":"c272oro","to":"oh2v6pq"},"paerv24":{"as":"fn","from":"paerv24","to":"oh2v6pq"},"c2cadg0":{"as":"arg1","from":"c2cadg0","to":"c272oro"},"tc49gqg":{"as":"arg0","from":"tc49gqg","to":"c272oro"},"1huvnux":{"as":"otherwise","from":"1huvnux","to":"tc49gqg"},"v2pdw1m":{"as":"value","from":"v2pdw1m","to":"tc49gqg"},"lsmnhra":{"as":"_animframe","from":"lsmnhra","to":"args"},"st1qot0":{"as":"_feedback","from":"st1qot0","to":"args"},"ril0xrx":{"as":"children","from":"ril0xrx","to":"8dy573e"},"16s251p":{"as":"arg0","from":"16s251p","to":"ril0xrx"},"apdh5jc":{"as":"arg1","from":"apdh5jc","to":"ril0xrx"},"aygb0oi":{"as":"children","from":"aygb0oi","to":"apdh5jc"},"1tx5wnh":{"as":"arg1","from":"1tx5wnh","to":"aygb0oi"},"302jicy":{"as":"arg0","from":"302jicy","to":"aygb0oi"},"pk1bbc4":{"as":"props","from":"pk1bbc4","to":"302jicy"},"0tgg4sp":{"as":"onchange","from":"0tgg4sp","to":"pk1bbc4"},"aj17mw0":{"as":"type","from":"aj17mw0","to":"pk1bbc4"},"t9zciub":{"as":"checked","from":"t9zciub","to":"pk1bbc4"},"43bg3g9":{"as":"args","from":"43bg3g9","to":"0tgg4sp"},"5bfpjjf":{"as":"fn","from":"5bfpjjf","to":"0tgg4sp"},"nxcfe4q":{"as":"value","from":"nxcfe4q","to":"43bg3g9"},"yai4q6q":{"as":"children","from":"yai4q6q","to":"16s251p"},"ha9sbe6":{"as":"arg0","from":"ha9sbe6","to":"yai4q6q"},"y6jnnhr":{"as":"arg1","from":"y6jnnhr","to":"yai4q6q"},"1oskoai":{"as":"props","from":"1oskoai","to":"ha9sbe6"},"dtp36mu":{"as":"onchange","from":"dtp36mu","to":"1oskoai"},"qapcl0i":{"as":"type","from":"qapcl0i","to":"1oskoai"},"vkwxqas":{"as":"checked","from":"vkwxqas","to":"1oskoai"},"1eft9yl":{"as":"args","from":"1eft9yl","to":"dtp36mu"},"8uiwk65":{"as":"fn","from":"8uiwk65","to":"dtp36mu"},"mrpotq6":{"as":"value","from":"mrpotq6","to":"1eft9yl"}},"id":"@three.modify_attribute","nodes":{"out":{"id":"out","name":"@three.modify_attribute","ref":"return"},"splq7ug":{"id":"splq7ug","ref":"@flow.if"},"y4gwi1o":{"id":"y4gwi1o","ref":"arg","value":"geo"},"vn2sh9e":{"id":"vn2sh9e","ref":"return"},"ohrirfq":{"id":"ohrirfq"},"a10w5r5":{"id":"a10w5r5","ref":"@memory.cache"},"vlxve1t":{"id":"vlxve1t","ref":"@js.script","value":"const geo = new _lib.THREE.BufferGeometry();\ngeo.setAttribute('position', new _lib.THREE.BufferAttribute( new Float32Array( [] ), 3));\ngeo.computeVertexNormals();\n\nreturn geo"},"84lpyxq":{"id":"84lpyxq","ref":"@flow.if"},"8itq35i":{"id":"8itq35i","ref":"@js.script","value":"update();\nconsole.log(\"update\", update)\nreturn geo;"},"y31kzli":{"id":"y31kzli","ref":"arg","value":"_initgeo"},"90q41gu":{"id":"90q41gu","ref":"@js.script","value":"return value"},"uplws96":{"id":"uplws96","ref":"@js.script","value":"return true;\nreturn !values.every(v => !v);"},"gvhqdhu":{"id":"gvhqdhu","ref":"arg","value":"geo"},"1x4br4o":{"id":"1x4br4o","ref":"@data.array"},"wvj1p1r":{"id":"wvj1p1r","ref":"@data.ischanged"},"k5f4hu0":{"id":"k5f4hu0","ref":"arg","value":"geo"},"c4rxcjv":{"id":"c4rxcjv","ref":"@data.ischanged"},"rd10d2x":{"id":"rd10d2x","ref":"arg","value":"fn"},"1gvyfv3":{"id":"1gvyfv3","ref":"arg","value":"fn"},"9sqfffy":{"id":"9sqfffy","ref":"return"},"rguemo9":{"id":"rguemo9"},"x0s5rek":{"id":"x0s5rek","ref":"arg","value":"_initgeo"},"ufnr75u":{"id":"ufnr75u","ref":"@flow.default"},"w2blnji":{"id":"w2blnji","ref":"@memory.readReference"},"vwfrg0o":{"id":"vwfrg0o","ref":"arg","value":"_feedback"},"r094qmn":{"id":"r094qmn","ref":"@memory.unwrap"},"03sh3lc":{"id":"03sh3lc","ref":"arg","value":"feedback"},"gu5lz7s":{"id":"gu5lz7s","ref":"arg","value":"lag"},"fasv291":{"id":"fasv291","ref":"@js.script","value":"\nreturn typeof attr === \"string\" ? attr.split(\",\") : attr;"},"uf0wi9m":{"id":"uf0wi9m","ref":"@flow.default"},"jnmh0h3":{"id":"jnmh0h3","ref":"@flow.default"},"qzupnpg":{"id":"qzupnpg","ref":"arg","value":"__graph_value"},"euaw78z":{"id":"euaw78z","value":"position"},"3h860a0":{"id":"3h860a0","ref":"arg","value":"attribute"},"asaag3y":{"id":"asaag3y","ref":"arg","value":"geo"},"9xa3tmr":{"id":"9xa3tmr","ref":"@memory.cache"},"osma418":{"id":"osma418"},"1p3zq1m":{"id":"1p3zq1m"},"3hu1ap0":{"id":"3hu1ap0","ref":"@flow.if"},"k1k5w8g":{"id":"k1k5w8g","ref":"arg","value":"fn"},"jcuffnj":{"id":"jcuffnj","ref":"@js.script","value":"console.log(\"got fn\", fn)\nreturn typeof fn === \"function\";"},"8ri2ijg":{"id":"8ri2ijg","ref":"arg","value":"fn"},"7twfyoe":{"id":"7twfyoe","ref":"@js.create_fn"},"dza658p":{"id":"dza658p","ref":"arg","value":"fn"},"8g09muv":{"id":"8g09muv","ref":"@js.create_fn"},"l63qymv":{"id":"l63qymv","ref":"@flow.runnable"},"wwnvi83":{"id":"wwnvi83","ref":"@js.script","value":"const item_size = 3;\n\nconst count = inputgeo.getAttribute(\"position\").count;\n\nif(!feedback || initgeo.getAttribute(\"position\")?.count === 0) {\n  initgeo.copy(inputgeo);\n}\n\nif(!initbuffer?.buffer?.array || initbuffer.buffer.array.length !== count * item_size) {\n  initbuffer.buffer = new _lib.THREE.BufferAttribute(new Float32Array(count * item_size), item_size);\n}\n\nfor(let attribute of attributes) {\n  if((feedback ?  !initgeo.hasAttribute(attribute) : !inputgeo.hasAttribute(attribute)) || initgeo.getAttribute(attribute)?.count !== count) {\n    initgeo.setAttribute(attribute, new _lib.THREE.BufferAttribute(new Float32Array(count * item_size), item_size));\n  }\n}\n\n\nconst attrs = Object.keys(initgeo.attributes);\n\nif (feedback) {\n  attrs.forEach(attr => {\n    if (!attributes.includes(attr) && inputgeo.hasAttribute(attr)) {\n      initgeo.getAttribute(attr)\n          .copy(inputgeo.getAttribute(attr))\n    }\n  })\n}\n\nconst currentAttrs = {};\nattributes.forEach(attribute => {\n  currentAttrs[attribute] = (feedback || !inputgeo.hasAttribute(attribute) ? initgeo : inputgeo).getAttribute(attribute)\n});\nconst targetAttrs = {};\nattributes.forEach(attribute => {\n  targetAttrs[attribute] = \ninitgeo.getAttribute(attribute);\n})\nconst point_data = {};\n\n\nconst newVals = {};\nattributes.forEach(attribute => {\n  newVals[attribute] = new Float32Array(item_size).fill(0);\n});\n\nconsole.log(fn);\n\nfor(let i = 0; i < count; i++){\n  attributes.forEach(attribute => {\n    newVals[attribute].set(currentAttrs[attribute].array\n    .subarray(i * item_size, (i + 1) * item_size));\n  })\n  \n  attrs.forEach(attr => {\n    point_data[attr] = attributes.includes(attr) ? newVals[attr] : initgeo.getAttribute(attr).array\n    .subarray(i * item_size, (i + 1) * item_size)\n  })\n  \n  fn({point_data, index: i})\n  \n  if(lag) {\n    attributes.forEach(attribute => {\n    if(newVals[attribute][0] !== undefined) {\n    newVals[attribute][0] *= (1 - lag)\n    newVals[attribute][0] += lag * targetAttr.getX(i);\n    }\n    if(newVal[attribute][1] !== undefined) {\n    newVals[attribute][1] *= (1 - lag)\n    newVals[attribute][1] += lag * targetAttr.getY(i);\n    }\n    if(newVals[attribute][2] !== undefined) {\n    newVals[attribute][2] *= (1 - lag)\n    newVals[attribute][2] += lag * targetAttr.getZ(i);\n    }\n    })\n  }\n  attributes.map(attribute => {\ntargetAttrs[attribute].array.set(newVals[attribute], i * item_size)\n  })\n}\nattributes.forEach(attribute => {\ntargetAttrs[attribute].needsUpdate = true;\n})\n\nreturn initgeo;"},"zwgcvcc":{"id":"zwgcvcc","ref":"arg","value":"_attributes"},"x210zde":{"id":"x210zde","ref":"arg","value":"_initgeofn"},"s61o3sv":{"id":"s61o3sv","ref":"arg","value":"_inputgeofn"},"ron9hq7":{"id":"ron9hq7","ref":"arg","value":"_fn"},"hyvpcan":{"id":"hyvpcan","ref":"arg","value":"_initbuffer"},"cfg6cwi":{"id":"cfg6cwi","ref":"arg","value":"_fb"},"3w2rmuu":{"id":"3w2rmuu","ref":"arg","value":"_lag"},"5m7ypog":{"id":"5m7ypog","ref":"@js.script","value":"return geo && fn"},"pgjrhjg":{"id":"pgjrhjg","ref":"arg","value":"geo"},"d16msy7":{"id":"d16msy7","ref":"arg","value":"fn"},"oh2v6pq":{"id":"oh2v6pq","ref":"@js.script","value":"console.log(\"got fn 2\", fn)\nreturn values.every(v => v);"},"paerv24":{"id":"paerv24","ref":"arg","value":"fn"},"c272oro":{"id":"c272oro","ref":"@data.array"},"tc49gqg":{"id":"tc49gqg","ref":"@flow.default"},"v2pdw1m":{"id":"v2pdw1m","ref":"arg","value":"__graph_value"},"1huvnux":{"id":"1huvnux","ref":"arg","value":"attribute"},"c2cadg0":{"id":"c2cadg0","ref":"arg","value":"fn"},"args":{"id":"args","ref":"extern","value":"extern.data"},"st1qot0":{"id":"st1qot0","ref":"@memory.state"},"lsmnhra":{"id":"lsmnhra","ref":"@memory.state"},"8dy573e":{"id":"8dy573e","ref":"@html.html_element"},"ril0xrx":{"id":"ril0xrx","ref":"@data.array"},"apdh5jc":{"id":"apdh5jc","ref":"@html.html_element"},"aygb0oi":{"id":"aygb0oi","ref":"@data.array"},"302jicy":{"id":"302jicy","ref":"@html.html_element","value":"input"},"pk1bbc4":{"id":"pk1bbc4"},"t9zciub":{"id":"t9zciub","ref":"arg","value":"_animframe.state"},"aj17mw0":{"id":"aj17mw0","value":"checkbox"},"0tgg4sp":{"id":"0tgg4sp","ref":"@flow.ap"},"5bfpjjf":{"id":"5bfpjjf","ref":"arg","value":"_animframe.set"},"43bg3g9":{"id":"43bg3g9"},"nxcfe4q":{"id":"nxcfe4q","ref":"arg","value":"event.target.checked"},"1tx5wnh":{"id":"1tx5wnh","ref":"@html.html_text","value":"update"},"16s251p":{"id":"16s251p","ref":"@html.html_element"},"yai4q6q":{"id":"yai4q6q","ref":"@data.array"},"y6jnnhr":{"id":"y6jnnhr","ref":"@html.html_text","value":"feedback"},"ha9sbe6":{"id":"ha9sbe6","ref":"@html.html_element","value":"input"},"1oskoai":{"id":"1oskoai"},"vkwxqas":{"id":"vkwxqas","ref":"arg","value":"_feedback.state"},"qapcl0i":{"id":"qapcl0i","value":"checkbox"},"dtp36mu":{"id":"dtp36mu","ref":"@flow.ap"},"8uiwk65":{"id":"8uiwk65","ref":"arg","value":"_feedback.set"},"1eft9yl":{"id":"1eft9yl"},"mrpotq6":{"id":"mrpotq6","ref":"arg","value":"event.target.checked"}},"out":"out"},{"description":"Creates a BufferGeometry using the specified constructor and input nodes as arguments.","edges":{"7vhuixq":{"as":"metadata","from":"7vhuixq","to":"out"},"e08m3vg":{"as":"args","from":"e08m3vg","to":"out"},"output_val":{"as":"value","from":"output_val","to":"out"},"wl24jbc":{"as":"lib","from":"wl24jbc","to":"out"},"tsd4zz1":{"as":"THREE","from":"tsd4zz1","to":"wl24jbc"},"kphtl0m":{"as":"_geometry","from":"kphtl0m","to":"e08m3vg"},"j819k9c":{"as":"true","from":"j819k9c","to":"kphtl0m"},"z82dq3u":{"as":"pred","from":"z82dq3u","to":"kphtl0m"},"7jw4lsu":{"as":"args","from":"7jw4lsu","to":"j819k9c"},"g2xpahw":{"as":"name","from":"g2xpahw","to":"j819k9c"},"8w8gfzn":{"as":"target","from":"8w8gfzn","to":"7jw4lsu"},"mrevz1i":{"as":"arg0","from":"mrevz1i","to":"7jw4lsu"},"4or2htn":{"as":"values","from":"4or2htn","to":"7vhuixq"},"ccmvwyl":{"as":"parameters","from":"ccmvwyl","to":"7vhuixq"},"a3ljk0v":{"as":"true","from":"a3ljk0v","to":"ccmvwyl"},"es3j1s8":{"as":"pred","from":"es3j1s8","to":"ccmvwyl"},"r8fus3z":{"as":"geometry","from":"r8fus3z","to":"a3ljk0v"},"gl3wugl":{"as":"value","from":"gl3wugl","to":"r8fus3z"},"nyv9f1b":{"as":"recache","from":"nyv9f1b","to":"r8fus3z"},"86qm2fw":{"as":"value","from":"86qm2fw","to":"nyv9f1b"}},"id":"@three.geometry","nodes":{"out":{"id":"out","name":"@three.geometry","ref":"return"},"wl24jbc":{"id":"wl24jbc"},"tsd4zz1":{"id":"tsd4zz1","ref":"@js.import_module","value":"https://cdn.jsdelivr.net/npm/three/build/three.module.js"},"output_val":{"id":"output_val","ref":"arg","value":"_geometry"},"e08m3vg":{"id":"e08m3vg"},"kphtl0m":{"id":"kphtl0m","ref":"@flow.if"},"z82dq3u":{"id":"z82dq3u","ref":"arg","value":"__graph_value"},"j819k9c":{"id":"j819k9c","ref":"@js.script","value":"return _lib.THREE[name].fromJSON?.(args ?? {}) ?? new _lib.THREE[name](Object.values(args ?? {}));"},"g2xpahw":{"id":"g2xpahw","ref":"arg","value":"__graph_value"},"7jw4lsu":{"id":"7jw4lsu","ref":"@data.merge_objects_mutable"},"mrevz1i":{"id":"mrevz1i","ref":"arg","value":"_argsdata"},"8w8gfzn":{"id":"8w8gfzn","value":"{}"},"7vhuixq":{"id":"7vhuixq"},"ccmvwyl":{"id":"ccmvwyl","ref":"@flow.if"},"es3j1s8":{"id":"es3j1s8","ref":"arg","value":"__graph_value"},"a3ljk0v":{"id":"a3ljk0v","ref":"@js.script","value":"const keys = Array.from(Object.keys(geometry.parameters))\nreturn Object.fromEntries(keys.map(k => [k, \"any\"]));"},"r8fus3z":{"id":"r8fus3z","ref":"@memory.cache"},"nyv9f1b":{"id":"nyv9f1b","ref":"@data.ischanged"},"86qm2fw":{"id":"86qm2fw","ref":"arg","value":"__graph_value"},"gl3wugl":{"id":"gl3wugl","ref":"arg","value":"_geometry"},"4or2htn":{"id":"4or2htn","ref":"@js.script","value":"return _lib.THREE && Object.keys(_lib.THREE).filter(k => k.endsWith(\"Geometry\"))"}},"out":"out"},{"edges":{"q4hk4bw":{"as":"value","from":"q4hk4bw","to":"t2wl30j"},"q4tskdl":{"as":"args","from":"q4tskdl","to":"t2wl30j"},"r1c4ero":{"as":"metadata","from":"r1c4ero","to":"t2wl30j"},"0e52p8o":{"as":"values","from":"0e52p8o","to":"r1c4ero"},"1twurrd":{"as":"parameters","from":"1twurrd","to":"r1c4ero"},"gj47dqe":{"as":"false","from":"gj47dqe","to":"1twurrd"},"ra5i4nx":{"as":"true","from":"ra5i4nx","to":"1twurrd"},"vu259vf":{"as":"pred","from":"vu259vf","to":"1twurrd"},"cib8xiy":{"as":"path","from":"cib8xiy","to":"vu259vf"},"e1fmps2":{"as":"nodes","from":"e1fmps2","to":"vu259vf"},"3rdanfa":{"as":"node","from":"3rdanfa","to":"ra5i4nx"},"4rmlryt":{"as":"fnparms","from":"4rmlryt","to":"ra5i4nx"},"g8i9gix":{"as":"name","from":"g8i9gix","to":"ra5i4nx"},"qdvndwx":{"as":"nodes","from":"qdvndwx","to":"ra5i4nx"},"595ceg1":{"as":"fn","from":"595ceg1","to":"4rmlryt"},"60htowa":{"as":"path","from":"60htowa","to":"595ceg1"},"tc71fq0":{"as":"target","from":"tc71fq0","to":"595ceg1"},"mbjab0h":{"as":"nodes","from":"mbjab0h","to":"0e52p8o"},"hafko00":{"as":"_threenode","from":"hafko00","to":"q4tskdl"},"o5sgysd":{"as":"_nodes","from":"o5sgysd","to":"q4tskdl"},"m77x5cf":{"as":"url","from":"m77x5cf","to":"o5sgysd"},"63itvqs":{"as":"value","from":"63itvqs","to":"hafko00"},"wkm9i8b":{"as":"args","from":"wkm9i8b","to":"hafko00"},"3gnkfqm":{"as":"_name","from":"3gnkfqm","to":"wkm9i8b"},"6mna45b":{"as":"value","from":"6mna45b","to":"63itvqs"},"ahfnizi":{"as":"recache","from":"ahfnizi","to":"63itvqs"},"r63ulo9":{"as":"value","from":"r63ulo9","to":"ahfnizi"},"eac03sk":{"as":"true","from":"eac03sk","to":"6mna45b"},"tjn10xk":{"as":"pred","from":"tjn10xk","to":"6mna45b"},"cb8yguh":{"as":"value","from":"cb8yguh","to":"eac03sk"},"e4rdngl":{"as":"args","from":"e4rdngl","to":"eac03sk"},"4skly0x":{"as":"_nodeinstance","from":"4skly0x","to":"e4rdngl"},"cxmm7kf":{"as":"nodeArgs","from":"cxmm7kf","to":"4skly0x"},"ey5xe1p":{"as":"nodes","from":"ey5xe1p","to":"4skly0x"},"f1wqp7p":{"as":"args","from":"f1wqp7p","to":"4skly0x"},"qc5yhrk":{"as":"Node","from":"qc5yhrk","to":"4skly0x"},"t90v2ws":{"as":"returnFn","from":"t90v2ws","to":"4skly0x"},"tj0ue40":{"as":"name","from":"tj0ue40","to":"4skly0x"},"xntibr1":{"as":"fnparms","from":"xntibr1","to":"4skly0x"},"l31buvo":{"as":"fn","from":"l31buvo","to":"xntibr1"},"asa6egn":{"as":"path","from":"asa6egn","to":"l31buvo"},"m4euspc":{"as":"target","from":"m4euspc","to":"l31buvo"},"zg12st9":{"as":"url","from":"zg12st9","to":"m4euspc"},"6dpj05t":{"as":"path","from":"6dpj05t","to":"qc5yhrk"},"fzpv502":{"as":"target","from":"fzpv502","to":"qc5yhrk"},"20zj22n":{"as":"url","from":"20zj22n","to":"fzpv502"},"1vdqyt6":{"as":"value","from":"1vdqyt6","to":"f1wqp7p"},"wm6hu13":{"as":"otherwise","from":"wm6hu13","to":"f1wqp7p"},"qbshzkl":{"as":"url","from":"qbshzkl","to":"ey5xe1p"},"g2ai982":{"as":"arg0","from":"g2ai982","to":"cxmm7kf"},"g7jjpiy":{"as":"target","from":"g7jjpiy","to":"cxmm7kf"},"68j6hjq":{"as":"true","from":"68j6hjq","to":"cb8yguh"},"txmw3pd":{"as":"pred","from":"txmw3pd","to":"cb8yguh"},"an8n9z9":{"as":"arg0","from":"an8n9z9","to":"68j6hjq"},"homn2x7":{"as":"target","from":"homn2x7","to":"68j6hjq"},"okhx7t6":{"as":"fnparms","from":"okhx7t6","to":"an8n9z9"},"xsnh3pb":{"as":"args","from":"xsnh3pb","to":"an8n9z9"},"uobnyvk":{"as":"fn","from":"uobnyvk","to":"okhx7t6"},"m4yoq67":{"as":"target","from":"m4yoq67","to":"uobnyvk"},"pw73t77":{"as":"path","from":"pw73t77","to":"uobnyvk"},"t9olptl":{"as":"url","from":"t9olptl","to":"m4yoq67"}},"id":"@three.node","name":"@three.node","nodes":{"t2wl30j":{"id":"t2wl30j","name":"@three.node","ref":"return"},"r1c4ero":{"id":"r1c4ero"},"1twurrd":{"id":"1twurrd","ref":"@flow.if"},"vu259vf":{"id":"vu259vf","ref":"@js.script","value":"return path && nodes && nodes[path];"},"e1fmps2":{"id":"e1fmps2","ref":"arg","value":"_nodes"},"cib8xiy":{"id":"cib8xiy","ref":"arg","value":"__graph_value"},"ra5i4nx":{"id":"ra5i4nx","ref":"@js.script","value":"const nodeKeys = node && Array.from(Object.keys(node)).filter(k => !k.startsWith(\"_\") && !k.startsWith(\"is\") && k.endsWith(\"Node\"));\nconst parms =  Object.fromEntries(nodeKeys.map(k => [k, {type: \"@three.node\"}])\n                                  .concat(fnparms?.filter(p => p !== 'params' && p !== 'parameters').map(p => [p, {type: 'any'}]) ?? [])\n.concat(name && nodes[name].toString() === nodes.float.toString() ? [['value', {type: 'any'}]] : [] ));\n\nreturn parms;"},"qdvndwx":{"id":"qdvndwx","ref":"arg","value":"_nodes"},"g8i9gix":{"id":"g8i9gix","ref":"arg","value":"__graph_value"},"4rmlryt":{"id":"4rmlryt","ref":"extern","value":"extern.functionParameters"},"595ceg1":{"id":"595ceg1","ref":"@data.get"},"tc71fq0":{"id":"tc71fq0","ref":"arg","value":"_nodes"},"60htowa":{"id":"60htowa","ref":"arg","value":"__graph_value"},"3rdanfa":{"id":"3rdanfa","ref":"arg","value":"_threenode"},"gj47dqe":{"id":"gj47dqe","value":"[]"},"0e52p8o":{"id":"0e52p8o","ref":"@js.script","value":"return Object.keys(nodes);"},"mbjab0h":{"id":"mbjab0h","ref":"arg","value":"_nodes"},"q4tskdl":{"id":"q4tskdl"},"o5sgysd":{"hafko00":"8f5duig","id":"o5sgysd","ref":"@js.import_module"},"m77x5cf":{"id":"m77x5cf","ref":"@js.script","value":"\nreturn `https://cdn.jsdelivr.net/npm/three/examples/jsm/nodes/Nodes.js`"},"hafko00":{"id":"hafko00","ref":"return"},"wkm9i8b":{"id":"wkm9i8b"},"3gnkfqm":{"id":"3gnkfqm","ref":"arg","value":"__graph_value"},"63itvqs":{"id":"63itvqs","ref":"@memory.cache"},"ahfnizi":{"id":"ahfnizi","ref":"@data.ischanged"},"r63ulo9":{"id":"r63ulo9","ref":"arg","value":"_name"},"6mna45b":{"id":"6mna45b","ref":"@flow.if"},"tjn10xk":{"id":"tjn10xk","ref":"arg","value":"_name"},"eac03sk":{"id":"eac03sk","ref":"return"},"e4rdngl":{"id":"e4rdngl","ref":"extern","value":"extern.data"},"4skly0x":{"id":"4skly0x","ref":"@js.script","value":"if(returnFn) return Node;\n\nlet created;\n\nconst isConst = Node.toString() == nodes.float.toString();\nif(isConst) {\n  const parms = nodeArgs[\"value\"] ?? args;\n  return Node(...(Array.isArray(parms) ? parms : [parms]));\n}\nconst argArr = [];\nfnparms?.forEach(p => p !== 'params' && p !== 'parameters' && argArr.push(nodeArgs[p]));\n(Array.isArray(args) ? args : [args]).forEach(v => argArr.push(v));\n\ntry {\n  created = new Node(...argArr)\n}catch(e){\n  created = typeof Node === \"function\" ?  Node(...argArr) : Node;\n}\n\nreturn created"},"xntibr1":{"id":"xntibr1","ref":"extern","value":"extern.functionParameters"},"l31buvo":{"id":"l31buvo","ref":"@data.get"},"m4euspc":{"hafko00":"8f5duig","id":"m4euspc","ref":"@js.import_module"},"zg12st9":{"id":"zg12st9","ref":"@js.script","value":"\nreturn `https://cdn.jsdelivr.net/npm/three/examples/jsm/nodes/Nodes.js`"},"asa6egn":{"id":"asa6egn","ref":"arg","value":"_name"},"tj0ue40":{"id":"tj0ue40","ref":"arg","value":"__graph_value"},"t90v2ws":{"id":"t90v2ws","ref":"arg","value":"returnFn"},"qc5yhrk":{"id":"qc5yhrk","ref":"@data.get"},"fzpv502":{"hafko00":"8f5duig","id":"fzpv502","ref":"@js.import_module"},"20zj22n":{"id":"20zj22n","ref":"@js.script","value":"\nreturn `https://cdn.jsdelivr.net/npm/three/examples/jsm/nodes/Nodes.js`"},"6dpj05t":{"id":"6dpj05t","ref":"arg","value":"_name"},"f1wqp7p":{"id":"f1wqp7p","ref":"@flow.default"},"wm6hu13":{"id":"wm6hu13","value":"[]"},"1vdqyt6":{"id":"1vdqyt6","ref":"arg","value":"args"},"ey5xe1p":{"hafko00":"8f5duig","id":"ey5xe1p","ref":"@js.import_module"},"qbshzkl":{"id":"qbshzkl","ref":"@js.script","value":"\nreturn `https://cdn.jsdelivr.net/npm/three/examples/jsm/nodes/Nodes.js`"},"cxmm7kf":{"id":"cxmm7kf","ref":"@data.merge_objects_mutable"},"g7jjpiy":{"id":"g7jjpiy","value":"{}"},"g2ai982":{"id":"g2ai982","ref":"arg","value":"_argsdata"},"cb8yguh":{"id":"cb8yguh","ref":"@flow.if"},"txmw3pd":{"id":"txmw3pd","ref":"arg","value":"_nodeinstance"},"68j6hjq":{"id":"68j6hjq","ref":"@data.merge_objects_mutable"},"homn2x7":{"id":"homn2x7","ref":"arg","value":"_nodeinstance"},"an8n9z9":{"id":"an8n9z9","ref":"@js.script","value":"for(let parm of fnparms) {\n  delete args[parm]\n}\ndelete args[\"args\"];\ndelete args[\"_nodeinstance\"]\nconsole.log(\"args\", args)\nreturn args;"},"xsnh3pb":{"id":"xsnh3pb","ref":"arg","value":"_argsdata"},"okhx7t6":{"id":"okhx7t6","ref":"extern","value":"extern.functionParameters"},"uobnyvk":{"id":"uobnyvk","ref":"@data.get"},"pw73t77":{"id":"pw73t77","ref":"arg","value":"_name"},"m4yoq67":{"hafko00":"8f5duig","id":"m4yoq67","ref":"@js.import_module"},"t9olptl":{"id":"t9olptl","ref":"@js.script","value":"\nreturn `https://cdn.jsdelivr.net/npm/three/examples/jsm/nodes/Nodes.js`"},"q4hk4bw":{"id":"q4hk4bw","ref":"arg","value":"_threenode"}},"out":"t2wl30j"},{"description":"Create a [Light](https://threejs.org/docs/?q=light#api/en/lights/Light) of the type specified in the dropdown. The `intensity` input is the light's intensity","edges":{"38zagsq":{"as":"metadata","from":"38zagsq","to":"out"},"output_val":{"as":"value","from":"output_val","to":"out"},"rgpu8gc":{"as":"lib","from":"rgpu8gc","to":"out"},"dn5axhu":{"as":"THREE","from":"dn5axhu","to":"rgpu8gc"},"6c3y90j":{"as":"args","from":"6c3y90j","to":"output_val"},"urjyf2e":{"as":"intensity","from":"urjyf2e","to":"output_val"},"vhuv19u":{"as":"selected","from":"vhuv19u","to":"output_val"},"vgloog2":{"as":"values","from":"vgloog2","to":"38zagsq"}},"id":"@three.light","nodes":{"out":{"id":"out","name":"@three.light","ref":"return"},"rgpu8gc":{"id":"rgpu8gc"},"dn5axhu":{"id":"dn5axhu","ref":"@js.import_module","value":"https://cdn.jsdelivr.net/npm/three/build/three.module.js"},"output_val":{"id":"output_val","ref":"@js.script","value":"args = args ?? [];\nconst light = selected && new _lib.THREE[selected](...args);\nif(light) {\n  if(intensity) light.intensity = intensity;\n}\n\nreturn light"},"vhuv19u":{"id":"vhuv19u","ref":"arg","value":"__graph_value"},"urjyf2e":{"id":"urjyf2e","ref":"arg","value":"intensity"},"6c3y90j":{"id":"6c3y90j","ref":"arg","value":"args"},"38zagsq":{"id":"38zagsq"},"vgloog2":{"id":"vgloog2","ref":"@js.script","value":"return _lib.THREE ? Object.keys(_lib.THREE).filter(k => k.endsWith(\"Light\")) : []"}},"out":"out"},{"edges":{"0209mcq":{"as":"subscribe","from":"0209mcq","to":"out"},"3wnevku":{"as":"lib","from":"3wnevku","to":"out"},"j9ryrf2":{"as":"args","from":"j9ryrf2","to":"out"},"k30x2hp":{"as":"value","from":"k30x2hp","to":"out"},"mu0then":{"as":"display","from":"mu0then","to":"out"},"7301d8k":{"as":"background","from":"7301d8k","to":"mu0then"},"8dy573e":{"as":"resultPanel","from":"8dy573e","to":"mu0then"},"mj5a33h":{"as":"props","from":"mj5a33h","to":"7301d8k"},"4597zph":{"as":"id","from":"4597zph","to":"mj5a33h"},"m9gy23g":{"as":"style","from":"m9gy23g","to":"mj5a33h"},"rcodn7b":{"as":"height","from":"rcodn7b","to":"mj5a33h"},"w6r5m0k":{"as":"width","from":"w6r5m0k","to":"mj5a33h"},"1wil42w":{"as":"height","from":"1wil42w","to":"m9gy23g"},"sgmm2eq":{"as":"width","from":"sgmm2eq","to":"m9gy23g"},"72wzn5d":{"as":"true","from":"72wzn5d","to":"k30x2hp"},"efvhz2z":{"as":"pred","from":"efvhz2z","to":"k30x2hp"},"em7kgrn":{"as":"reference","from":"em7kgrn","to":"efvhz2z"},"0r7134k":{"as":"onupdate","from":"0r7134k","to":"72wzn5d"},"dbxyytc":{"as":"objects","from":"dbxyytc","to":"72wzn5d"},"ulmar21":{"as":"canvas","from":"ulmar21","to":"72wzn5d"},"2acdour":{"as":"reference","from":"2acdour","to":"ulmar21"},"5oxzqna":{"as":"arg1","from":"5oxzqna","to":"dbxyytc"},"us11he6":{"as":"arg4","from":"us11he6","to":"dbxyytc"},"q9zistc":{"as":"value","from":"q9zistc","to":"us11he6"},"0947jp7":{"as":"target","from":"0947jp7","to":"q9zistc"},"xf381u8":{"as":"value","from":"xf381u8","to":"q9zistc"},"ooq4zdk":{"as":"value","from":"ooq4zdk","to":"xf381u8"},"lwv375w":{"as":"reference","from":"lwv375w","to":"ooq4zdk"},"ydvyfol":{"as":"value","from":"ydvyfol","to":"lwv375w"},"obvc5t3":{"as":"value","from":"obvc5t3","to":"ydvyfol"},"be41aqr":{"as":"material","from":"be41aqr","to":"0947jp7"},"otfru3a":{"as":"geometry","from":"otfru3a","to":"0947jp7"},"88odah0":{"as":"value","from":"88odah0","to":"otfru3a"},"6oxa4iv":{"as":"fn","from":"6oxa4iv","to":"88odah0"},"dqwauxq":{"as":"min","from":"dqwauxq","to":"88odah0"},"liysp0q":{"as":"geo","from":"liysp0q","to":"88odah0"},"p8fm64s":{"as":"max","from":"p8fm64s","to":"88odah0"},"wui41hq":{"as":"value","from":"wui41hq","to":"liysp0q"},"5d2hlxd":{"as":"value","from":"5d2hlxd","to":"6oxa4iv"},"4ko2o5o":{"as":"x","from":"4ko2o5o","to":"5d2hlxd"},"2k6rjvz":{"as":"otherwise","from":"2k6rjvz","to":"4ko2o5o"},"v2xfx09":{"as":"value","from":"v2xfx09","to":"4ko2o5o"},"63ao0j1":{"as":"target","from":"63ao0j1","to":"v2xfx09"},"dh0kzgj":{"as":"value","from":"dh0kzgj","to":"be41aqr"},"9kub5n6":{"as":"colorNode","from":"9kub5n6","to":"dh0kzgj"},"4kqd8au":{"as":"fn","from":"4kqd8au","to":"0r7134k"},"crys2ve":{"as":"parameters","from":"crys2ve","to":"0r7134k"},"3p1cxio":{"as":"camera","from":"3p1cxio","to":"crys2ve"},"hq8y4zl":{"as":"objects","from":"hq8y4zl","to":"crys2ve"},"2t1bca9":{"as":"canvas","from":"2t1bca9","to":"j9ryrf2"},"4d0h7cj":{"as":"THREE","from":"4d0h7cj","to":"3wnevku"},"8ke4eq0":{"as":"domnodeadded","from":"8ke4eq0","to":"0209mcq"},"lzeqibk":{"as":"fn","from":"lzeqibk","to":"8ke4eq0"},"vf6901s":{"as":"args","from":"vf6901s","to":"8ke4eq0"},"vymi9dp":{"as":"value","from":"vymi9dp","to":"vf6901s"},"fp5dv7m":{"as":"canvas_id","from":"fp5dv7m","to":"vymi9dp"}},"id":"threejs_deptree","nodes":{"out":{"id":"out","name":"threejs_deptree","ref":"return"},"mu0then":{"id":"mu0then"},"8dy573e":{"id":"8dy573e","ref":"@html.html_element"},"7301d8k":{"id":"7301d8k","ref":"@html.html_element","value":"canvas"},"mj5a33h":{"id":"mj5a33h"},"w6r5m0k":{"id":"w6r5m0k","ref":"@js.script","value":"return window.innerWidth"},"rcodn7b":{"id":"rcodn7b","ref":"@js.script","value":"return window.innerHeight"},"m9gy23g":{"id":"m9gy23g"},"sgmm2eq":{"id":"sgmm2eq","value":"100vw"},"1wil42w":{"id":"1wil42w","value":"100vh"},"4597zph":{"id":"4597zph","value":"threejsrender"},"k30x2hp":{"id":"k30x2hp","ref":"@flow.if"},"efvhz2z":{"id":"efvhz2z","ref":"@memory.readReference"},"em7kgrn":{"id":"em7kgrn","ref":"arg","value":"canvas"},"72wzn5d":{"id":"72wzn5d","ref":"@three.setup"},"ulmar21":{"id":"ulmar21","ref":"@memory.readReference"},"2acdour":{"id":"2acdour","ref":"arg","value":"canvas"},"dbxyytc":{"id":"dbxyytc"},"us11he6":{"id":"us11he6","ref":"@debug.log","value":"newmesh"},"q9zistc":{"id":"q9zistc","ref":"@data.set_mutable","value":"position.x"},"xf381u8":{"id":"xf381u8","ref":"@debug.log","value":"val?"},"ooq4zdk":{"id":"ooq4zdk","ref":"@memory.readReference"},"lwv375w":{"id":"lwv375w","ref":"@js.script","value":"return value.value"},"ydvyfol":{"id":"ydvyfol","ref":"@debug.log","value":"slider"},"obvc5t3":{"id":"obvc5t3","ref":"@html.slider_noloop","value":"3"},"0947jp7":{"id":"0947jp7","ref":"@three.mesh"},"otfru3a":{"id":"otfru3a","ref":"@debug.log","value":"newpointgeo"},"88odah0":{"id":"88odah0","ref":"@three.modify_attribute","value":"position"},"p8fm64s":{"id":"p8fm64s","value":"2"},"liysp0q":{"id":"liysp0q","ref":"@debug.log","value":"newgeo"},"wui41hq":{"id":"wui41hq","ref":"@three.geometry","value":"TorusGeometry"},"dqwauxq":{"id":"dqwauxq","value":"1"},"6oxa4iv":{"id":"6oxa4iv","ref":"@debug.log","value":"fn"},"5d2hlxd":{"id":"5d2hlxd","ref":"@js.script","value":"return ({point_data}) => { point_data.position[0] = x * 1; }"},"4ko2o5o":{"id":"4ko2o5o","ref":"@flow.default"},"v2xfx09":{"id":"v2xfx09","ref":"@data.get","value":"value"},"63ao0j1":{"id":"63ao0j1","ref":"@html.slider","value":"4"},"2k6rjvz":{"id":"2k6rjvz","value":"-0.1"},"be41aqr":{"id":"be41aqr","ref":"@debug.log","value":"newmat"},"dh0kzgj":{"id":"dh0kzgj","ref":"@three.node","value":"MeshStandardNodeMaterial"},"9kub5n6":{"id":"9kub5n6","ref":"@three.node","value":"mx_noise_vec3"},"5oxzqna":{"id":"5oxzqna","ref":"@three.light","value":"HemisphereLight"},"0r7134k":{"id":"0r7134k","ref":"@flow.runnable"},"crys2ve":{"id":"crys2ve"},"hq8y4zl":{"id":"hq8y4zl"},"3p1cxio":{"id":"3p1cxio"},"4kqd8au":{"id":"4kqd8au"},"j9ryrf2":{"id":"j9ryrf2"},"2t1bca9":{"id":"2t1bca9","ref":"@memory.reference"},"3wnevku":{"id":"3wnevku"},"4d0h7cj":{"id":"4d0h7cj","ref":"@js.import_module","value":"https://cdn.jsdelivr.net/npm/three/build/three.module.js"},"0209mcq":{"id":"0209mcq"},"8ke4eq0":{"id":"8ke4eq0","ref":"@flow.ap"},"vf6901s":{"id":"vf6901s"},"vymi9dp":{"id":"vymi9dp","ref":"@js.script","value":"const canvas = document.getElementById(canvas_id);\nreturn canvas"},"fp5dv7m":{"id":"fp5dv7m","value":"threejsrender"},"lzeqibk":{"id":"lzeqibk","ref":"arg","value":"canvas.set"}},"out":"out"}]}