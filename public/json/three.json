[
  {
    "id": "@three.renderer",
    "nodes": [
      {
        "id": "e84dum1",
        "ref": "return"
      },
      {
        "id": "f4fwiru",
        "ref": "if"
      },
      {
        "id": "gkf0vld"
      },
      {
        "id": "mqyloha",
        "value": "return  document.getElementById(canvas_id);",
        "ref": "script"
      },
      {
        "id": "1433a1o",
        "value": "canvas",
        "name": "",
        "ref": "arg"
      },
      {
        "id": "cwl59lh",
        "value": "canvas",
        "name": "",
        "ref": "arg"
      },
      {
        "id": "92odlmk",
        "value": "rendererid",
        "ref": "log"
      },
      {
        "id": "sqan3fs",
        "value": "canvas_id",
        "ref": "arg"
      },
      {
        "id": "bfr8z38",
        "value": "_lib.THREE",
        "ref": "arg"
      },
      {
        "id": "main/out",
        "name": "@three.renderer",
        "ref": "return",
        "__isnodysseus": true
      },
      {
        "id": "x4zdk2w",
        "value": "console.log(\"creating renderer\")\nconsole.log(canvas)\nreturn new THREE.WebGLRenderer({canvas})",
        "ref": "script"
      }
    ],
    "edges": [
      {
        "from": "bfr8z38",
        "to": "x4zdk2w",
        "as": "THREE"
      },
      {
        "from": "1433a1o",
        "to": "f4fwiru",
        "as": "pred"
      },
      {
        "from": "cwl59lh",
        "to": "x4zdk2w",
        "as": "canvas"
      },
      {
        "from": "x4zdk2w",
        "to": "f4fwiru",
        "as": "true"
      },
      {
        "from": "gkf0vld",
        "to": "e84dum1",
        "as": "args"
      },
      {
        "from": "92odlmk",
        "to": "mqyloha",
        "as": "canvas_id"
      },
      {
        "from": "sqan3fs",
        "to": "92odlmk",
        "as": "value"
      },
      {
        "from": "mqyloha",
        "to": "gkf0vld",
        "as": "canvas"
      },
      {
        "from": "e84dum1",
        "to": "main/out",
        "as": "value"
      },
      {
        "from": "f4fwiru",
        "to": "e84dum1",
        "as": "value"
      }
    ],
    "out": "main/out"
  },
  {
    "id": "@three.camera",
    "nodes": [
      {
        "id": "args"
      },
      {
        "id": "vjfgmrl",
        "value": "return import(\"https://unpkg.com/three@latest/build/three.module.js\")",
        "ref": "script"
      },
      {
        "id": "n79e1ca",
        "ref": "cache"
      },
      {
        "id": "qvf3y0y",
        "value": "return window.innerWidth",
        "ref": "script"
      },
      {
        "id": "11u8kd6",
        "value": "return window.innerHeight",
        "ref": "script"
      },
      {
        "id": "ojdupq6",
        "value": "camera",
        "ref": "log"
      },
      {
        "id": "x4zdk2w",
        "value": "return new THREE.PerspectiveCamera( 75, width / height, 0.1, 1000 );",
        "ref": "script"
      },
      {
        "id": "bfr8z38",
        "value": "_lib.THREE",
        "ref": "arg",
        "__isnodysseus": true
      },
      {
        "id": "main/out",
        "name": "@three.camera",
        "ref": "return",
        "__isnodysseus": true
      }
    ],
    "edges": [
      {
        "from": "args",
        "to": "main/out",
        "as": "args"
      },
      {
        "from": "vjfgmrl",
        "to": "n79e1ca",
        "as": "value"
      },
      {
        "from": "x4zdk2w",
        "to": "ojdupq6",
        "as": "value"
      },
      {
        "from": "qvf3y0y",
        "to": "x4zdk2w",
        "as": "width"
      },
      {
        "from": "11u8kd6",
        "to": "x4zdk2w",
        "as": "height"
      },
      {
        "from": "n79e1ca",
        "to": "args",
        "as": "THREE"
      },
      {
        "from": "bfr8z38",
        "to": "x4zdk2w",
        "as": "THREE"
      },
      {
        "from": "ojdupq6",
        "to": "main/out",
        "as": "value"
      }
    ],
    "out": "main/out"
  },
  {
    "id": "@three.hemispherelight",
    "nodes": [
      {
        "id": "x4zdk2w",
        "value": "return new THREE.HemisphereLight( 0x443333, 0x222233, 4 );",
        "ref": "script"
      },
      {
        "id": "ojdupq6",
        "value": "light",
        "ref": "log"
      },
      {
        "id": "bfr8z38",
        "value": "_lib.THREE",
        "ref": "arg"
      },
      {
        "id": "main/out",
        "name": "@three.hemispherelight",
        "ref": "return",
        "__isnodysseus": true
      }
    ],
    "edges": [
      {
        "from": "x4zdk2w",
        "to": "ojdupq6",
        "as": "value"
      },
      {
        "from": "bfr8z38",
        "to": "x4zdk2w",
        "as": "THREE"
      },
      {
        "from": "ojdupq6",
        "to": "main/out",
        "as": "value"
      }
    ],
    "out": "main/out"
  },
  {
    "id": "@three.scene",
    "nodes": [
      {
        "id": "x4zdk2w",
        "value": "return new THREE.Scene()",
        "ref": "script"
      },
      {
        "id": "ojdupq6",
        "value": "scene",
        "ref": "log"
      },
      {
        "id": "bfr8z38",
        "value": "_lib.THREE",
        "ref": "arg"
      },
      {
        "id": "main/out",
        "name": "@three.scene",
        "ref": "return",
        "__isnodysseus": true
      }
    ],
    "edges": [
      {
        "from": "x4zdk2w",
        "to": "ojdupq6",
        "as": "value"
      },
      {
        "from": "bfr8z38",
        "to": "x4zdk2w",
        "as": "THREE"
      },
      {
        "from": "ojdupq6",
        "to": "main/out",
        "as": "value"
      }
    ],
    "out": "main/out"
  },
  {
    "id": "@three.setup",
    "name": "three.setup",
    "nodes": [
      {
        "id": "8m5muxn/njzfcz8",
        "name": "",
        "ref": "return"
      },
      {
        "id": "8m5muxn/39ivise"
      },
      {
        "id": "8m5muxn/hlqmo48"
      },
      {
        "id": "8m5muxn/vyr07ts",
        "name": ""
      },
      {
        "id": "m4cr3fk",
        "ref": "map"
      },
      {
        "id": "8m5muxn/83bu48f",
        "ref": "cache"
      },
      {
        "id": "8m5muxn/inq87j9",
        "name": "",
        "ref": "cache"
      },
      {
        "id": "8m5muxn/7in78pu",
        "value": "position.z",
        "ref": "set_mutable"
      },
      {
        "id": "ptak9t2",
        "name": "",
        "ref": "sequence"
      },
      {
        "id": "sq9t0ix",
        "ref": "runnable"
      },
      {
        "id": "vrevjmh",
        "ref": "object_entries"
      },
      {
        "id": "8m5muxn/33kmaec",
        "ref": "cache"
      },
      {
        "id": "8m5muxn/v1nqvl7",
        "value": "5"
      },
      {
        "id": "8m5muxn/qro9awp",
        "ref": "runnable"
      },
      {
        "id": "f7krd8u",
        "value": "objs",
        "ref": "arg"
      },
      {
        "id": "6l87a9y",
        "ref": "if"
      },
      {
        "id": "wcnk2sw",
        "value": "onupdate",
        "ref": "arg"
      },
      {
        "id": "elimy7s",
        "value": "element.1",
        "ref": "arg"
      },
      {
        "id": "httv0fw",
        "value": "renderer",
        "ref": "arg"
      },
      {
        "id": "kgvzbaz",
        "value": "element.0",
        "ref": "arg"
      },
      {
        "id": "b2z2580",
        "ref": "ap"
      },
      {
        "id": "m291v0o"
      },
      {
        "id": "nmx3h5j",
        "value": "renderer",
        "ref": "log",
        "__isnodysseus": true
      },
      {
        "id": "c229fdg",
        "value": "canvas_id",
        "ref": "arg",
        "__isnodysseus": true
      },
      {
        "id": "ngjogsk",
        "value": "setupcanvas_id",
        "ref": "log",
        "__isnodysseus": true
      },
      {
        "id": "8m5muxn/8m5muxn",
        "name": "@three.setup",
        "ref": "return",
        "__isnodysseus": true
      },
      {
        "id": "8m5muxn/p7pzcqi",
        "name": "",
        "ref": "@three.renderer",
        "__isnodysseus": true
      },
      {
        "id": "8m5muxn/gwavfrm",
        "value": "",
        "ref": "@three.scene",
        "__isnodysseus": true
      },
      {
        "id": "8m5muxn/zci8apj",
        "value": "",
        "ref": "@three.camera",
        "__isnodysseus": true
      },
      {
        "id": "8m5muxn/0v7x4xs",
        "value": "camera: internal",
        "ref": "arg"
      },
      {
        "id": "8m5muxn/hs1z581",
        "value": "scene: internal",
        "ref": "arg"
      },
      {
        "id": "8m5muxn/13mcd2m",
        "value": "renderer: internal",
        "ref": "arg"
      },
      {
        "id": "y2f8gog",
        "value": "camera: internal",
        "ref": "arg"
      },
      {
        "id": "xgl6r05",
        "value": "objs: internal",
        "ref": "arg"
      },
      {
        "id": "8m5muxn/8p7y4uk",
        "value": "scene: internal",
        "ref": "arg"
      },
      {
        "id": "8m5muxn/ud4p5ey",
        "value": "if(name !== '_needsresolve' && obj){ scene.add( obj ); }\nconsole.log(obj);\nreturn scene;",
        "name": "",
        "ref": "script"
      },
      {
        "id": "8m5muxn/crb3hd2",
        "value": "renderer.render(scene, camera);",
        "ref": "script"
      },
      {
        "id": "zfeakzj",
        "value": "console.log(value.position.z);\n  return value;",
        "ref": "script"
      }
    ],
    "edges": [
      {
        "from": "8m5muxn/39ivise",
        "to": "8m5muxn/8m5muxn",
        "as": "args"
      },
      {
        "from": "8m5muxn/hlqmo48",
        "to": "8m5muxn/njzfcz8",
        "as": "args"
      },
      {
        "from": "8m5muxn/vyr07ts",
        "to": "8m5muxn/njzfcz8",
        "as": "subscribe"
      },
      {
        "from": "8m5muxn/83bu48f",
        "to": "8m5muxn/hlqmo48",
        "as": "renderer"
      },
      {
        "from": "8m5muxn/inq87j9",
        "to": "8m5muxn/hlqmo48",
        "as": "scene"
      },
      {
        "from": "ptak9t2",
        "to": "8m5muxn/vyr07ts",
        "as": "animationframe"
      },
      {
        "from": "sq9t0ix",
        "to": "m4cr3fk",
        "as": "fn"
      },
      {
        "from": "vrevjmh",
        "to": "m4cr3fk",
        "as": "array"
      },
      {
        "from": "8m5muxn/gwavfrm",
        "to": "8m5muxn/inq87j9",
        "as": "value"
      },
      {
        "from": "8m5muxn/33kmaec",
        "to": "8m5muxn/7in78pu",
        "as": "target"
      },
      {
        "from": "8m5muxn/v1nqvl7",
        "to": "8m5muxn/7in78pu",
        "as": "value"
      },
      {
        "from": "8m5muxn/qro9awp",
        "to": "ptak9t2",
        "as": "arg0"
      },
      {
        "from": "b2z2580",
        "to": "ptak9t2",
        "as": "arg1"
      },
      {
        "from": "8m5muxn/ud4p5ey",
        "to": "sq9t0ix",
        "as": "fn"
      },
      {
        "from": "8m5muxn/zci8apj",
        "to": "8m5muxn/33kmaec",
        "as": "value"
      },
      {
        "from": "6l87a9y",
        "to": "8m5muxn/qro9awp",
        "as": "fn"
      },
      {
        "from": "8m5muxn/8p7y4uk",
        "to": "8m5muxn/ud4p5ey",
        "as": "scene"
      },
      {
        "from": "elimy7s",
        "to": "8m5muxn/ud4p5ey",
        "as": "obj"
      },
      {
        "from": "httv0fw",
        "to": "6l87a9y",
        "as": "pred"
      },
      {
        "from": "8m5muxn/crb3hd2",
        "to": "6l87a9y",
        "as": "true"
      },
      {
        "from": "8m5muxn/13mcd2m",
        "to": "8m5muxn/crb3hd2",
        "as": "renderer"
      },
      {
        "from": "8m5muxn/hs1z581",
        "to": "8m5muxn/crb3hd2",
        "as": "scene"
      },
      {
        "from": "8m5muxn/0v7x4xs",
        "to": "8m5muxn/crb3hd2",
        "as": "camera"
      },
      {
        "from": "kgvzbaz",
        "to": "8m5muxn/ud4p5ey",
        "as": "name"
      },
      {
        "from": "8m5muxn/njzfcz8",
        "to": "8m5muxn/8m5muxn",
        "as": "value"
      },
      {
        "from": "m4cr3fk",
        "to": "8m5muxn/njzfcz8",
        "as": "value"
      },
      {
        "from": "wcnk2sw",
        "to": "b2z2580",
        "as": "fn"
      },
      {
        "from": "m291v0o",
        "to": "b2z2580",
        "as": "args"
      },
      {
        "from": "xgl6r05",
        "to": "m291v0o",
        "as": "objs"
      },
      {
        "from": "nmx3h5j",
        "to": "8m5muxn/83bu48f",
        "as": "value"
      },
      {
        "from": "ngjogsk",
        "to": "8m5muxn/p7pzcqi",
        "as": "canvas_id"
      },
      {
        "from": "c229fdg",
        "to": "ngjogsk",
        "as": "value"
      },
      {
        "from": "8m5muxn/p7pzcqi",
        "to": "nmx3h5j",
        "as": "value"
      },
      {
        "from": "y2f8gog",
        "to": "m291v0o",
        "as": "camera"
      },
      {
        "from": "f7krd8u",
        "to": "vrevjmh",
        "as": "object"
      },
      {
        "from": "zfeakzj",
        "to": "8m5muxn/hlqmo48",
        "as": "camera"
      },
      {
        "from": "8m5muxn/7in78pu",
        "to": "zfeakzj",
        "as": "value"
      }
    ],
    "out": "8m5muxn/8m5muxn"
  },
  {
    "id": "@three.modify_attribute",
    "nodes": [
      {
        "id": "args"
      },
      {
        "id": "8dy573e",
        "ref": "html_element"
      },
      {
        "id": "wc64ttm",
        "value": "testing.state",
        "ref": "arg"
      },
      {
        "id": "p9plj5n",
        "ref": "html_text"
      },
      {
        "id": "yai4q6q",
        "ref": "array"
      },
      {
        "id": "ffp87am",
        "ref": "slider"
      },
      {
        "id": "cgtq1da",
        "ref": "ap"
      },
      {
        "id": "rr0o319",
        "value": "testing.set",
        "ref": "arg"
      },
      {
        "id": "o47d2kv"
      },
      {
        "id": "gljdsjo",
        "value": "event.target.value",
        "ref": "arg"
      },
      {
        "id": "out",
        "name": "@three.modify_attribute",
        "ref": "return"
      },
      {
        "id": "u36qh21",
        "ref": "cache"
      },
      {
        "id": "scte9zo"
      },
      {
        "id": "cisb6j6",
        "value": "return {};",
        "ref": "script"
      },
      {
        "id": "my9677p",
        "ref": "create_fn"
      },
      {
        "id": "gjr14z1",
        "value": "fn",
        "ref": "arg"
      },
      {
        "id": "3viy8mt",
        "ref": "cache"
      },
      {
        "id": "orkrdzx",
        "value": "attribute",
        "ref": "arg"
      },
      {
        "id": "buoyv1q",
        "value": "geo",
        "ref": "arg"
      },
      {
        "id": "nd6zslm",
        "value": "initgeo: internal",
        "ref": "arg"
      },
      {
        "id": "ay1mgi1",
        "ref": "default"
      },
      {
        "id": "vio1bz1",
        "ref": "default"
      },
      {
        "id": "y2ley4r",
        "value": "__graph_value",
        "ref": "arg"
      },
      {
        "id": "b9gexfo",
        "value": "position"
      },
      {
        "id": "e7gu67v",
        "value": "const geo = new _lib.THREE.BufferGeometry();\ngeo.setAttribute('position', new _lib.THREE.BufferAttribute( new Float32Array( [\n] ), 3));\ngeo.computeVertexNormals();\n\nreturn geo",
        "ref": "script"
      },
      {
        "id": "iwzvdj8",
        "value": "const item_size = 3;\n\n\n// Object.entries(inputgeo.attributes)\n//   .forEach(kv => {\n//     initgeo.setAttribute(kv[0], kv[0] === attribute ? inputgeo.getAttribute(kv[0]).clone() : inputgeo.getAttribute(kv[0]));\n//     });\n\ninitgeo.copy(inputgeo);\n\nif(!initgeo.hasAttribute(attribute) || initgeo.getAttribute(attribute)?.count !== inputgeo.getAttribute(\"position\")?.count) {\n  initbuffer.buffer = new _lib.THREE.BufferAttribute(new Float32Array(inputgeo.getAttribute(\"position\").count * item_size), item_size);\n}\n\nif(!inputgeo.hasAttribute(attribute)) {\n  initgeo.setAttribute(attribute, initbuffer.buffer.clone());\n}\n\nconst attrs = Object.keys(initgeo.attributes);\nconst count = initgeo.getAttribute(\"position\").count;\nconst point_data = {};\n\nfor(let i = 0; i < count; i++){\n  attrs.map(attr => {\n  point_data[attr] = initgeo.getAttribute(attr).array.subarray(i * item_size, (i + 1) * item_size);\n    })\n  fn({point_data, index: i})\n}\n\ninitgeo.getAttribute(attribute).needsUpdate = true;\n\n//console.log(inputgeo);\n//console.log(initgeo);\n\nreturn initgeo;",
        "ref": "script"
      },
      {
        "id": "ph7ugf6",
        "ref": "if"
      },
      {
        "id": "9nre5m4",
        "value": "fn",
        "ref": "arg"
      },
      {
        "id": "ai1ckv5",
        "value": "return typeof fn === \"function\";",
        "ref": "script"
      },
      {
        "id": "h923zl1",
        "value": "fn",
        "ref": "arg"
      }
    ],
    "edges": [
      {
        "from": "8dy573e",
        "to": "out",
        "as": "display"
      },
      {
        "from": "args",
        "to": "out",
        "as": "args"
      },
      {
        "from": "wc64ttm",
        "to": "p9plj5n",
        "as": "text"
      },
      {
        "from": "p9plj5n",
        "to": "yai4q6q",
        "as": "arg0"
      },
      {
        "from": "ffp87am",
        "to": "yai4q6q",
        "as": "arg1"
      },
      {
        "from": "yai4q6q",
        "to": "8dy573e",
        "as": "children"
      },
      {
        "from": "cgtq1da",
        "to": "ffp87am",
        "as": "onchange"
      },
      {
        "from": "rr0o319",
        "to": "cgtq1da",
        "as": "fn"
      },
      {
        "from": "o47d2kv",
        "to": "cgtq1da",
        "as": "args"
      },
      {
        "from": "gljdsjo",
        "to": "o47d2kv",
        "as": "value"
      },
      {
        "from": "nd6zslm",
        "to": "iwzvdj8",
        "as": "initgeo"
      },
      {
        "from": "u36qh21",
        "to": "iwzvdj8",
        "as": "initbuffer"
      },
      {
        "from": "scte9zo",
        "to": "u36qh21",
        "as": "value"
      },
      {
        "from": "cisb6j6",
        "to": "scte9zo",
        "as": "buffer"
      },
      {
        "from": "gjr14z1",
        "to": "my9677p",
        "as": "runnable"
      },
      {
        "from": "e7gu67v",
        "to": "3viy8mt",
        "as": "value"
      },
      {
        "from": "3viy8mt",
        "to": "args",
        "as": "initgeo"
      },
      {
        "from": "iwzvdj8",
        "to": "out",
        "as": "value"
      },
      {
        "from": "buoyv1q",
        "to": "iwzvdj8",
        "as": "inputgeo"
      },
      {
        "from": "ay1mgi1",
        "to": "iwzvdj8",
        "as": "attribute"
      },
      {
        "from": "vio1bz1",
        "to": "ay1mgi1",
        "as": "otherwise"
      },
      {
        "from": "orkrdzx",
        "to": "ay1mgi1",
        "as": "value"
      },
      {
        "from": "y2ley4r",
        "to": "vio1bz1",
        "as": "value"
      },
      {
        "from": "b9gexfo",
        "to": "vio1bz1",
        "as": "otherwise"
      },
      {
        "from": "ph7ugf6",
        "to": "iwzvdj8",
        "as": "fn"
      },
      {
        "from": "ai1ckv5",
        "to": "ph7ugf6",
        "as": "pred"
      },
      {
        "from": "9nre5m4",
        "to": "ai1ckv5",
        "as": "fn"
      },
      {
        "from": "my9677p",
        "to": "ph7ugf6",
        "as": "false"
      },
      {
        "from": "h923zl1",
        "to": "ph7ugf6",
        "as": "true"
      }
    ],
    "out": "out"
  }
]
