{"state":{"threejs_example_randomize/2bikafa/gvk9hec":1.55,"threejs_example_randomize/cie2or6/i22whll/65wrg0t":"add","threejs_example_randomize/cie2or6/zrczkpf":[0,1],"threejs_example_randomize/cie2or6@three.randomizeAttributelocal/i22whll@flow.switchInputslocal/65wrg0t":"set","threejs_example_randomize/lmnmexr/ik23m2u":false},"graphs":[{"edges":{"4n3yk4e":{"as":"value","from":"4n3yk4e","to":"tkxqh5a"},"zlyzyjv":{"as":"args","from":"zlyzyjv","to":"tkxqh5a"},"a23wspb":{"as":"parent","from":"a23wspb","to":"4n3yk4e"},"twtvjxk":{"as":"argobjnames","from":"twtvjxk","to":"4n3yk4e"},"brxx2zn":{"as":"args","from":"brxx2zn","to":"twtvjxk"},"pnszphc":{"as":"value","from":"pnszphc","to":"twtvjxk"},"1kzsgi4":{"as":"array","from":"1kzsgi4","to":"pnszphc"},"grsb8qa":{"as":"fn","from":"grsb8qa","to":"pnszphc"},"49o12hh":{"as":"fn","from":"49o12hh","to":"grsb8qa"},"5ljysw7":{"as":"parameters","from":"5ljysw7","to":"grsb8qa"},"0zs05z2":{"as":"element","from":"0zs05z2","to":"5ljysw7"},"ad6qpuc":{"as":"parent","from":"ad6qpuc","to":"49o12hh"},"b3j4v9i":{"as":"obj","from":"b3j4v9i","to":"49o12hh"},"qjadhr5":{"as":"children","from":"qjadhr5","to":"1kzsgi4"},"man8k6c":{"as":"_parent","from":"man8k6c","to":"brxx2zn"}},"id":"@three.update_children","name":"@three.update_children","nodes":{"tkxqh5a":{"id":"tkxqh5a","name":"@three.update_children","ref":"return"},"zlyzyjv":{"id":"zlyzyjv"},"4n3yk4e":{"id":"4n3yk4e","ref":"@js.script","value":"parent.children.forEach(c => {\n  if(!argobjnames.includes(c.name)){\n    parent.remove(c);\n  }\n})\n\nreturn parent;"},"twtvjxk":{"id":"twtvjxk","ref":"return"},"pnszphc":{"id":"pnszphc","ref":"@data.map"},"grsb8qa":{"id":"grsb8qa","ref":"@flow.runnable"},"5ljysw7":{"id":"5ljysw7"},"0zs05z2":{"id":"0zs05z2"},"49o12hh":{"id":"49o12hh","name":"","ref":"@js.script","value":"const existingObj = parent.getObjectByName(obj.name);\nif(obj && existingObj !== obj){\n  if(existingObj) {\n    parent.remove(existingObj);\n    existingObj.geometry?.dispose();\n    existingObj.material?.dispose();\n  }\n  console.log(\"adding\", obj)\n  parent.add(obj); \n}\nreturn obj.name;"},"b3j4v9i":{"id":"b3j4v9i","ref":"arg","value":"element"},"ad6qpuc":{"id":"ad6qpuc","ref":"arg","value":"_parent"},"1kzsgi4":{"id":"1kzsgi4","ref":"@js.script","value":"return children.flat()"},"qjadhr5":{"id":"qjadhr5","ref":"arg","value":"children"},"brxx2zn":{"id":"brxx2zn"},"man8k6c":{"id":"man8k6c","ref":"arg","value":"parent"},"a23wspb":{"id":"a23wspb","ref":"arg","value":"parent"}},"out":"tkxqh5a"},{"edges":{"lihjkfp":{"as":"value","from":"lihjkfp","to":"main/out"},"x4zdk2w":{"as":"true","from":"x4zdk2w","to":"lihjkfp"},"xsjuu4i":{"as":"pred","from":"xsjuu4i","to":"lihjkfp"},"eyftv46":{"as":"canvas","from":"eyftv46","to":"xsjuu4i"},"cwl59lh":{"as":"canvas","from":"cwl59lh","to":"x4zdk2w"}},"id":"@three.renderer","nodes":{"main/out":{"__isnodysseus":true,"id":"main/out","name":"@three.renderer","ref":"return"},"lihjkfp":{"id":"lihjkfp","ref":"@flow.if"},"xsjuu4i":{"id":"xsjuu4i","ref":"@js.script","value":"console.log(\"three check lib\", _lib)\nreturn _lib.THREE && canvas;"},"eyftv46":{"id":"eyftv46","ref":"arg","value":"canvas"},"x4zdk2w":{"id":"x4zdk2w","ref":"@js.script","value":"const renderer = new _lib.THREE.WebGLRenderer({canvas});\nconsole.log(\"creating renderer\", renderer)\nreturn renderer"},"cwl59lh":{"id":"cwl59lh","name":"","ref":"arg","value":"canvas"}},"out":"main/out"},{"edges":{"5eegbyt":{"as":"lib","from":"5eegbyt","to":"main/out"},"mau19q3":{"as":"value","from":"mau19q3","to":"main/out"},"x4zdk2w":{"as":"value","from":"x4zdk2w","to":"mau19q3"},"glh8wzi":{"as":"THREE","from":"glh8wzi","to":"5eegbyt"},"hqgwi6x":{"as":"value","from":"hqgwi6x","to":"glh8wzi"}},"id":"@three.scene","nodes":{"main/out":{"__isnodysseus":true,"id":"main/out","name":"@three.scene","ref":"return"},"mau19q3":{"id":"mau19q3","ref":"@debug.log","value":"outscene"},"x4zdk2w":{"id":"x4zdk2w","ref":"@js.script","value":"return new _lib.THREE.Scene();"},"5eegbyt":{"id":"5eegbyt"},"glh8wzi":{"id":"glh8wzi","ref":"@memory.cache"},"hqgwi6x":{"id":"hqgwi6x","ref":"@js.import_module","value":"https://cdn.jsdelivr.net/npm/three/build/three.module.js"}},"out":"main/out"},{"description":"A three.js [PerspectiveCamera](https://threejs.org/docs/?q=camera#api/en/cameras/PerspectiveCamera)","edges":{"args":{"as":"args","from":"args","to":"main/out"},"on0gkah":{"as":"lib","from":"on0gkah","to":"main/out"},"x4zdk2w":{"as":"value","from":"x4zdk2w","to":"main/out"},"11u8kd6":{"as":"height","from":"11u8kd6","to":"x4zdk2w"},"qvf3y0y":{"as":"width","from":"qvf3y0y","to":"x4zdk2w"},"dln8uxf":{"as":"THREE","from":"dln8uxf","to":"on0gkah"},"h1x8bxs":{"as":"value","from":"h1x8bxs","to":"dln8uxf"},"n79e1ca":{"as":"THREE","from":"n79e1ca","to":"args"},"vjfgmrl":{"as":"value","from":"vjfgmrl","to":"n79e1ca"}},"id":"@three.camera","nodes":{"main/out":{"__isnodysseus":true,"id":"main/out","name":"@three.camera","ref":"return"},"x4zdk2w":{"id":"x4zdk2w","ref":"@js.script","value":"return new _lib.THREE.PerspectiveCamera( 75, width / height, 0.1, 1000 );"},"qvf3y0y":{"id":"qvf3y0y","ref":"arg","value":"canvas.width"},"11u8kd6":{"id":"11u8kd6","ref":"arg","value":"canvas.height"},"on0gkah":{"id":"on0gkah","ref":"extern","value":"extern.data"},"dln8uxf":{"id":"dln8uxf","ref":"@memory.cache"},"h1x8bxs":{"id":"h1x8bxs","ref":"@js.import_module","value":"https://cdn.jsdelivr.net/npm/three/build/three.module.js"},"args":{"id":"args","ref":"extern","value":"extern.data"},"n79e1ca":{"id":"n79e1ca","ref":"@memory.cache"},"vjfgmrl":{"id":"vjfgmrl","ref":"@js.import_module","value":"https://cdn.jsdelivr.net/npm/three/build/three.module.js"}},"out":"main/out"},{"description":"Creates a basic three.js scene with a camera, renderer, and scene. The `objects` input has the objects of the scene, evaluated every frame - make sure to cache. The `onupdate` input is a runnable with parameters `objects`, `camera`, and `scene` which is run every frame - keep. The `fx` input has effects for an EffectComposer.","edges":{"8m5muxn/39ivise":{"as":"args","from":"8m5muxn/39ivise","to":"8m5muxn/8m5muxn"},"8m5muxn/njzfcz8":{"as":"value","from":"8m5muxn/njzfcz8","to":"8m5muxn/8m5muxn"},"qioaglu":{"as":"lib","from":"qioaglu","to":"8m5muxn/8m5muxn"},"yg3wpau":{"as":"metadata","from":"yg3wpau","to":"8m5muxn/8m5muxn"},"0hdpvrw":{"as":"parameters","from":"0hdpvrw","to":"yg3wpau"},"t3nkm46":{"as":"onupdate","from":"t3nkm46","to":"0hdpvrw"},"y7wb70a":{"as":"runnableParameters","from":"y7wb70a","to":"t3nkm46"},"yb47doj":{"as":"type","from":"yb47doj","to":"t3nkm46"},"kipwn58":{"as":"EffectComposer","from":"kipwn58","to":"qioaglu"},"vl4foaa":{"as":"RenderPass","from":"vl4foaa","to":"qioaglu"},"yt5ewda":{"as":"nodeFrame","from":"yt5ewda","to":"qioaglu"},"dt9q1m5":{"as":"value","from":"dt9q1m5","to":"yt5ewda"},"bqpkucx":{"as":"target","from":"bqpkucx","to":"dt9q1m5"},"7peak26":{"as":"value","from":"7peak26","to":"vl4foaa"},"slle0cq":{"as":"target","from":"slle0cq","to":"7peak26"},"4a9zo9a":{"as":"value","from":"4a9zo9a","to":"kipwn58"},"i39y0i3":{"as":"target","from":"i39y0i3","to":"4a9zo9a"},"8m5muxn/hlqmo48":{"as":"args","from":"8m5muxn/hlqmo48","to":"8m5muxn/njzfcz8"},"8m5muxn/vyr07ts":{"as":"subscribe","from":"8m5muxn/vyr07ts","to":"8m5muxn/njzfcz8"},"jiobf52":{"as":"value","from":"jiobf52","to":"8m5muxn/njzfcz8"},"bolfyb6":{"as":"renderer","from":"bolfyb6","to":"jiobf52"},"vbytevd":{"as":"objects","from":"vbytevd","to":"jiobf52"},"5izf471":{"as":"arg0","from":"5izf471","to":"vbytevd"},"93zbauo":{"as":"arg1","from":"93zbauo","to":"vbytevd"},"jlt4j7w":{"as":"true","from":"jlt4j7w","to":"5izf471"},"vtg79yy":{"as":"pred","from":"vtg79yy","to":"5izf471"},"3azmpq8":{"as":"children","from":"3azmpq8","to":"jlt4j7w"},"gsjsnq6":{"as":"parent","from":"gsjsnq6","to":"jlt4j7w"},"4b08vk7":{"as":"fn","from":"4b08vk7","to":"3azmpq8"},"68gerc9":{"as":"array","from":"68gerc9","to":"3azmpq8"},"b10ohnk":{"as":"false","from":"b10ohnk","to":"68gerc9"},"nxy186l":{"as":"pred","from":"nxy186l","to":"68gerc9"},"vbr6bfa":{"as":"true","from":"vbr6bfa","to":"68gerc9"},"cuqczbo":{"as":"pred","from":"cuqczbo","to":"vbr6bfa"},"cvvim9o":{"as":"true","from":"cvvim9o","to":"vbr6bfa"},"r7h1ra6":{"as":"false","from":"r7h1ra6","to":"vbr6bfa"},"simk3kf":{"as":"entries","from":"simk3kf","to":"r7h1ra6"},"pem42eq":{"as":"object","from":"pem42eq","to":"simk3kf"},"fsculei":{"as":"otherwise","from":"fsculei","to":"pem42eq"},"v3dcfpc":{"as":"value","from":"v3dcfpc","to":"pem42eq"},"1iad2e6":{"as":"obj","from":"1iad2e6","to":"cvvim9o"},"1gxmhg0":{"as":"objs","from":"1gxmhg0","to":"cuqczbo"},"60subyt":{"as":"parameters","from":"60subyt","to":"4b08vk7"},"pv3ip30":{"as":"fn","from":"pv3ip30","to":"4b08vk7"},"dipv2w0":{"as":"value","from":"dipv2w0","to":"pv3ip30"},"ibgd3fg":{"as":"target","from":"ibgd3fg","to":"pv3ip30"},"z7toomi":{"as":"target","from":"z7toomi","to":"ibgd3fg"},"4j1cb5p":{"as":"target","from":"4j1cb5p","to":"dipv2w0"},"xxcz1u7":{"as":"element","from":"xxcz1u7","to":"60subyt"},"slwyovm":{"as":"reference","from":"slwyovm","to":"bolfyb6"},"ptak9t2":{"as":"animationframe","from":"ptak9t2","to":"8m5muxn/vyr07ts"},"c6eig78":{"as":"fn","from":"c6eig78","to":"ptak9t2"},"7c7zppx":{"as":"arg2","from":"7c7zppx","to":"c6eig78"},"rmqxb31":{"as":"arg4","from":"rmqxb31","to":"c6eig78"},"z552097":{"as":"arg5","from":"z552097","to":"c6eig78"},"dyst9ju":{"as":"fn","from":"dyst9ju","to":"z552097"},"1js087x":{"as":"camera","from":"1js087x","to":"dyst9ju"},"cha35wd":{"as":"scene","from":"cha35wd","to":"dyst9ju"},"cvop6x9":{"as":"renderer","from":"cvop6x9","to":"dyst9ju"},"3jbd385":{"as":"value","from":"3jbd385","to":"cvop6x9"},"e9d6mmx":{"as":"otherwise","from":"e9d6mmx","to":"cvop6x9"},"0wp18c9":{"as":"args","from":"0wp18c9","to":"e9d6mmx"},"cwrlosg":{"as":"run","from":"cwrlosg","to":"e9d6mmx"},"jjmvxjj":{"as":"fn","from":"jjmvxjj","to":"e9d6mmx"},"vc0quhz":{"as":"value","from":"vc0quhz","to":"0wp18c9"},"lugpx4o":{"as":"value","from":"lugpx4o","to":"vc0quhz"},"6s18wo7":{"as":"camera","from":"6s18wo7","to":"lugpx4o"},"eamyj81":{"as":"scene","from":"eamyj81","to":"lugpx4o"},"svcshll":{"as":"canvas","from":"svcshll","to":"lugpx4o"},"tgacxe5":{"as":"renderer","from":"tgacxe5","to":"lugpx4o"},"vwa13pj":{"as":"fx","from":"vwa13pj","to":"lugpx4o"},"vzmvbqh":{"as":"MotionBlur","from":"vzmvbqh","to":"lugpx4o"},"23ppkmp":{"as":"pred","from":"23ppkmp","to":"vzmvbqh"},"3876w2f":{"as":"true","from":"3876w2f","to":"vzmvbqh"},"ya36a1r":{"as":"module","from":"ya36a1r","to":"3876w2f"},"fzf3k5e":{"as":"RenderPass","from":"fzf3k5e","to":"vwa13pj"},"gap7au7":{"as":"EffectComposer","from":"gap7au7","to":"vwa13pj"},"hsytqp3":{"as":"value","from":"hsytqp3","to":"tgacxe5"},"1j95u16":{"as":"canvas","from":"1j95u16","to":"hsytqp3"},"zs7iowa":{"as":"reference","from":"zs7iowa","to":"3jbd385"},"b2z2580":{"as":"true","from":"b2z2580","to":"rmqxb31"},"mh5ikoc":{"as":"pred","from":"mh5ikoc","to":"rmqxb31"},"m291v0o":{"as":"args","from":"m291v0o","to":"b2z2580"},"wcnk2sw":{"as":"fn","from":"wcnk2sw","to":"b2z2580"},"2veqlq1":{"as":"scene","from":"2veqlq1","to":"m291v0o"},"y2f8gog":{"as":"camera","from":"y2f8gog","to":"m291v0o"},"aqfc51v":{"as":"fn","from":"aqfc51v","to":"7c7zppx"},"5m99dxg":{"as":"true","from":"5m99dxg","to":"aqfc51v"},"x638fhv":{"as":"pred","from":"x638fhv","to":"aqfc51v"},"tfl58nu":{"as":"arg0","from":"tfl58nu","to":"x638fhv"},"xmd2fqb":{"as":"arg1","from":"xmd2fqb","to":"x638fhv"},"xel6go6":{"as":"reference","from":"xel6go6","to":"tfl58nu"},"fznso76":{"as":"fx","from":"fznso76","to":"5m99dxg"},"t181hfh":{"as":"renderer","from":"t181hfh","to":"5m99dxg"},"4fxcgml":{"as":"reference","from":"4fxcgml","to":"t181hfh"},"8m5muxn/7in78pu":{"as":"_camera","from":"8m5muxn/7in78pu","to":"8m5muxn/hlqmo48"},"8m5muxn/inq87j9":{"as":"_scene","from":"8m5muxn/inq87j9","to":"8m5muxn/hlqmo48"},"8m5muxn/gwavfrm":{"as":"value","from":"8m5muxn/gwavfrm","to":"8m5muxn/inq87j9"},"8m5muxn/33kmaec":{"as":"target","from":"8m5muxn/33kmaec","to":"8m5muxn/7in78pu"},"8m5muxn/v1nqvl7":{"as":"value","from":"8m5muxn/v1nqvl7","to":"8m5muxn/7in78pu"},"8m5muxn/zci8apj":{"as":"value","from":"8m5muxn/zci8apj","to":"8m5muxn/33kmaec"},"t8adnxm":{"as":"canvas","from":"t8adnxm","to":"8m5muxn/zci8apj"},"40aw44l":{"as":"_renderer","from":"40aw44l","to":"8m5muxn/39ivise"}},"id":"@three.setup","name":"three.setup","nodes":{"8m5muxn/8m5muxn":{"id":"8m5muxn/8m5muxn","name":"@three.setup","ref":"return"},"yg3wpau":{"id":"yg3wpau"},"0hdpvrw":{"id":"0hdpvrw"},"t3nkm46":{"id":"t3nkm46"},"yb47doj":{"id":"yb47doj","value":"@flow.runnable"},"y7wb70a":{"id":"y7wb70a","ref":"@data.array","value":"objects, camera"},"qioaglu":{"id":"qioaglu"},"yt5ewda":{"id":"yt5ewda","ref":"@memory.cache"},"dt9q1m5":{"id":"dt9q1m5","ref":"@data.get","value":"nodeFrame"},"bqpkucx":{"id":"bqpkucx","ref":"@js.import_module","value":"https://cdn.jsdelivr.net/npm/three/examples/jsm/renderers/webgl/nodes/WebGLNodes.js"},"vl4foaa":{"id":"vl4foaa","ref":"@memory.cache"},"7peak26":{"id":"7peak26","ref":"@data.get","value":"RenderPass"},"slle0cq":{"id":"slle0cq","ref":"@js.import_module","value":"https://cdn.jsdelivr.net/npm/three/examples/jsm/postprocessing/RenderPass.js"},"kipwn58":{"id":"kipwn58","ref":"@memory.cache"},"4a9zo9a":{"id":"4a9zo9a","ref":"@data.get","value":"EffectComposer"},"i39y0i3":{"id":"i39y0i3","ref":"@js.import_module","value":"https://cdn.jsdelivr.net/npm/three/examples/jsm/postprocessing/EffectComposer.js"},"8m5muxn/njzfcz8":{"id":"8m5muxn/njzfcz8","name":"","ref":"return"},"jiobf52":{"id":"jiobf52"},"vbytevd":{"id":"vbytevd","ref":"@js.script","value":"return arg0;"},"93zbauo":{"id":"93zbauo","ref":"arg","value":"objects"},"5izf471":{"id":"5izf471","ref":"@flow.if"},"vtg79yy":{"id":"vtg79yy","ref":"arg","value":"_scene"},"jlt4j7w":{"id":"jlt4j7w","ref":"@three.update_children"},"gsjsnq6":{"id":"gsjsnq6","ref":"arg","value":"_scene"},"3azmpq8":{"id":"3azmpq8","ref":"@data.map"},"68gerc9":{"id":"68gerc9","ref":"@flow.if"},"vbr6bfa":{"id":"vbr6bfa","ref":"@flow.if"},"r7h1ra6":{"id":"r7h1ra6","ref":"@js.script","value":"return entries.flatMap(e => e?.[1] && Array.isArray(e[1]) ? e[1].map((c, i) => [e[0] + i, c]) : [e]).filter(e => e[1]);"},"simk3kf":{"id":"simk3kf","ref":"@data.object_entries"},"pem42eq":{"id":"pem42eq","ref":"@flow.default"},"v3dcfpc":{"id":"v3dcfpc","ref":"arg","value":"objects"},"fsculei":{"id":"fsculei","value":"{}"},"cvvim9o":{"id":"cvvim9o","ref":"@js.script","value":"// compensate for automatic passthrough\nreturn [[\"arg0\", obj]]"},"1iad2e6":{"id":"1iad2e6","ref":"arg","value":"objects"},"cuqczbo":{"id":"cuqczbo","ref":"@js.script","value":"return objs instanceof _lib.THREE.Object3D"},"1gxmhg0":{"id":"1gxmhg0","ref":"arg","value":"objects"},"nxy186l":{"id":"nxy186l","ref":"arg","value":"objects"},"b10ohnk":{"id":"b10ohnk","ref":"@data.array"},"4b08vk7":{"id":"4b08vk7","ref":"@flow.runnable"},"pv3ip30":{"id":"pv3ip30","ref":"@data.set_mutable","value":"name"},"ibgd3fg":{"id":"ibgd3fg","ref":"@data.get","value":"1"},"z7toomi":{"id":"z7toomi","ref":"arg","value":"element"},"dipv2w0":{"id":"dipv2w0","ref":"@data.get","value":"0"},"4j1cb5p":{"id":"4j1cb5p","ref":"arg","value":"element"},"60subyt":{"id":"60subyt"},"xxcz1u7":{"id":"xxcz1u7"},"bolfyb6":{"id":"bolfyb6","ref":"@memory.readReference"},"slwyovm":{"id":"slwyovm","ref":"arg","value":"_renderer"},"8m5muxn/vyr07ts":{"id":"8m5muxn/vyr07ts","name":""},"ptak9t2":{"id":"ptak9t2","name":"","ref":"@flow.ap"},"c6eig78":{"id":"c6eig78","ref":"@data.array"},"z552097":{"id":"z552097","ref":"@flow.runnable"},"dyst9ju":{"id":"dyst9ju","ref":"@js.script","value":"if(renderer) {\n  //renderer.render(scene, camera);\n  _lib.nodeFrame.update();\n  renderer.render();\n}"},"cvop6x9":{"id":"cvop6x9","ref":"@flow.default"},"e9d6mmx":{"id":"e9d6mmx","ref":"@flow.ap"},"jjmvxjj":{"id":"jjmvxjj","ref":"arg","value":"_renderer.set"},"cwrlosg":{"id":"cwrlosg","value":"true"},"0wp18c9":{"id":"0wp18c9"},"vc0quhz":{"id":"vc0quhz","ref":"@memory.cache"},"lugpx4o":{"id":"lugpx4o","ref":"@js.script","value":"console.log(\"top renderer\", renderer, canvas)\nif(!renderer){\n  return;\n}\nconst fxcomposer = new fx.EffectComposer(renderer)\nconst renderpass = new fx.RenderPass(scene, camera);\nfxcomposer.setSize(canvas.width, canvas.height);\nfxcomposer.addPass(renderpass);\nif(MotionBlur) {\n  const pass = new MotionBlur(scene, camera, { samples: 32, expandgeometry: 0.4 });\n  fxcomposer.addPass(pass);\n  pass.renderToScreen = true;\n}\nreturn fxcomposer;"},"vzmvbqh":{"id":"vzmvbqh","ref":"@flow.if"},"3876w2f":{"id":"3876w2f","ref":"@js.script","value":"return module.MotionBlurPass;"},"ya36a1r":{"id":"ya36a1r","ref":"@js.import_module","value":"https://cdn.jsdelivr.net/gh/ulyssesdotcodes/threejs-sandbox@94c68f4/motionBlurPass/src/MotionBlurPass.js"},"23ppkmp":{"id":"23ppkmp","ref":"arg","value":"motionBlur"},"vwa13pj":{"id":"vwa13pj"},"gap7au7":{"id":"gap7au7","ref":"arg","value":"_lib.EffectComposer"},"fzf3k5e":{"id":"fzf3k5e","ref":"arg","value":"_lib.RenderPass"},"tgacxe5":{"id":"tgacxe5","ref":"@memory.cache"},"hsytqp3":{"id":"hsytqp3","name":"","ref":"@three.renderer"},"1j95u16":{"id":"1j95u16","ref":"arg","value":"canvas"},"svcshll":{"id":"svcshll","ref":"arg","value":"canvas"},"eamyj81":{"id":"eamyj81","ref":"arg","value":"_scene: internal"},"6s18wo7":{"id":"6s18wo7","ref":"arg","value":"_camera: internal"},"3jbd385":{"id":"3jbd385","ref":"@memory.readReference"},"zs7iowa":{"id":"zs7iowa","ref":"arg","value":"_renderer"},"cha35wd":{"id":"cha35wd","ref":"arg","value":"_scene: internal"},"1js087x":{"id":"1js087x","ref":"arg","value":"_camera: internal"},"rmqxb31":{"id":"rmqxb31","ref":"@flow.if"},"mh5ikoc":{"id":"mh5ikoc","ref":"arg","value":"onupdate"},"b2z2580":{"id":"b2z2580","ref":"@flow.ap"},"wcnk2sw":{"id":"wcnk2sw","ref":"arg","value":"onupdate"},"m291v0o":{"id":"m291v0o"},"y2f8gog":{"id":"y2f8gog","ref":"arg","value":"_camera: internal"},"2veqlq1":{"id":"2veqlq1","ref":"arg","value":"_scene"},"7c7zppx":{"id":"7c7zppx","ref":"@flow.runnable"},"aqfc51v":{"id":"aqfc51v","ref":"@flow.if"},"x638fhv":{"id":"x638fhv","ref":"@js.script","value":"\nreturn arg1 && arg0"},"xmd2fqb":{"id":"xmd2fqb","ref":"arg","value":"fx"},"tfl58nu":{"id":"tfl58nu","ref":"@memory.readReference"},"xel6go6":{"id":"xel6go6","ref":"arg","value":"_renderer"},"5m99dxg":{"id":"5m99dxg","ref":"@js.script","value":"fx?.forEach((pass, idx) => {\n  // +1 for renderpass\n  if(renderer.passes[idx + 1] !== pass) {\n    if(renderer.passes.length > idx + 1) {\n      console.log(\"removing\", idx)  \n      renderer.removePass(renderer.passes[idx + 1]);\n    }\n    console.log(\"adding fx \", pass)\n    renderer.insertPass(pass, idx + 1);\n  }\n});\n\nif(fx && renderer.passes.length > fx?.length + 1) {\n  renderer.passes.splice(fx.length, renderer.passes.length)\n}"},"t181hfh":{"id":"t181hfh","ref":"@memory.readReference"},"4fxcgml":{"id":"4fxcgml","ref":"arg","value":"_renderer"},"fznso76":{"id":"fznso76","ref":"arg","value":"fx"},"8m5muxn/hlqmo48":{"id":"8m5muxn/hlqmo48"},"8m5muxn/inq87j9":{"id":"8m5muxn/inq87j9","name":"","ref":"@memory.cache"},"8m5muxn/gwavfrm":{"__isnodysseus":true,"id":"8m5muxn/gwavfrm","ref":"@three.scene","value":""},"8m5muxn/7in78pu":{"id":"8m5muxn/7in78pu","ref":"@data.set_mutable","value":"position.z"},"8m5muxn/v1nqvl7":{"id":"8m5muxn/v1nqvl7","value":"5"},"8m5muxn/33kmaec":{"id":"8m5muxn/33kmaec","ref":"@memory.cache"},"8m5muxn/zci8apj":{"__isnodysseus":true,"id":"8m5muxn/zci8apj","ref":"@three.camera","value":""},"t8adnxm":{"id":"t8adnxm","ref":"arg","value":"canvas"},"8m5muxn/39ivise":{"id":"8m5muxn/39ivise"},"40aw44l":{"id":"40aw44l","ref":"@memory.reference"}},"out":"8m5muxn/8m5muxn"},{"description":"Creates a mesh with the `geometry` and `material` inputs","edges":{"6mh34xg":{"as":"metadata","from":"6mh34xg","to":"out"},"azms2lq":{"as":"dependencies","from":"azms2lq","to":"out"},"output_val":{"as":"value","from":"output_val","to":"out"},"tarqdum":{"as":"args","from":"tarqdum","to":"out"},"5nudo40":{"as":"true","from":"5nudo40","to":"output_val"},"euzoog2":{"as":"pred","from":"euzoog2","to":"output_val"},"h9a5ot3":{"as":"args","from":"h9a5ot3","to":"5nudo40"},"ij95dcr":{"as":"arg0","from":"ij95dcr","to":"5nudo40"},"w20zv3g":{"as":"value","from":"w20zv3g","to":"ij95dcr"},"1eeluqm":{"as":"value","from":"1eeluqm","to":"w20zv3g"},"bj8452k":{"as":"value","from":"bj8452k","to":"1eeluqm"},"r9ngnn4":{"as":"arg0","from":"r9ngnn4","to":"h9a5ot3"},"xuoy9bd":{"as":"arg1","from":"xuoy9bd","to":"h9a5ot3"},"fh81etg":{"as":"geo","from":"fh81etg","to":"azms2lq"},"wezuyts":{"as":"material","from":"wezuyts","to":"azms2lq"},"0pm0fel":{"as":"parameters","from":"0pm0fel","to":"6mh34xg"},"bf9pe5s":{"as":"geometry","from":"bf9pe5s","to":"0pm0fel"},"yp7zxat":{"as":"material","from":"yp7zxat","to":"0pm0fel"}},"id":"@three.mesh","nodes":{"out":{"id":"out","name":"@three.mesh","ref":"return"},"tarqdum":{"id":"tarqdum"},"output_val":{"id":"output_val","ref":"@flow.if"},"euzoog2":{"id":"euzoog2","ref":"arg","value":"geometry"},"5nudo40":{"id":"5nudo40","ref":"@js.script","value":"return new _lib.THREE.Mesh(...args);"},"ij95dcr":{"id":"ij95dcr","ref":"@debug.log","value":"scriptgeoischanged"},"w20zv3g":{"id":"w20zv3g","ref":"@data.ischanged"},"1eeluqm":{"id":"1eeluqm","ref":"@debug.log","value":"scripgeoinput"},"bj8452k":{"id":"bj8452k","ref":"arg","value":"geo"},"h9a5ot3":{"id":"h9a5ot3","ref":"@data.array"},"xuoy9bd":{"id":"xuoy9bd","ref":"arg","value":"material"},"r9ngnn4":{"id":"r9ngnn4","ref":"arg","value":"geometry"},"azms2lq":{"id":"azms2lq"},"wezuyts":{"id":"wezuyts","ref":"arg","value":"material"},"fh81etg":{"id":"fh81etg","ref":"arg","value":"geometry"},"6mh34xg":{"id":"6mh34xg"},"0pm0fel":{"id":"0pm0fel"},"yp7zxat":{"id":"yp7zxat","value":"@three.node"},"bf9pe5s":{"id":"bf9pe5s","value":"@three.geometry"}},"out":"out"},{"edges":{"8dy573e":{"as":"display","from":"8dy573e","to":"out"},"args":{"as":"args","from":"args","to":"out"},"nlnzcl9":{"as":"subscribe","from":"nlnzcl9","to":"out"},"splq7ug":{"as":"value","from":"splq7ug","to":"out"},"oh2v6pq":{"as":"pred","from":"oh2v6pq","to":"splq7ug"},"vn2sh9e":{"as":"true","from":"vn2sh9e","to":"splq7ug"},"y4gwi1o":{"as":"false","from":"y4gwi1o","to":"splq7ug"},"84lpyxq":{"as":"value","from":"84lpyxq","to":"vn2sh9e"},"5m7ypog":{"as":"pred","from":"5m7ypog","to":"84lpyxq"},"8itq35i":{"as":"true","from":"8itq35i","to":"84lpyxq"},"90q41gu":{"as":"update","from":"90q41gu","to":"8itq35i"},"r01zuei":{"as":"geo","from":"r01zuei","to":"8itq35i"},"xthz9qz":{"as":"graphid","from":"xthz9qz","to":"8itq35i"},"y31kzli":{"as":"reference","from":"y31kzli","to":"r01zuei"},"9sqfffy":{"as":"value","from":"9sqfffy","to":"90q41gu"},"uplws96":{"as":"recache","from":"uplws96","to":"90q41gu"},"1gvyfv3":{"as":"arg1","from":"1gvyfv3","to":"uplws96"},"1x4br4o":{"as":"values","from":"1x4br4o","to":"uplws96"},"gvhqdhu":{"as":"arg0","from":"gvhqdhu","to":"uplws96"},"c4rxcjv":{"as":"arg1","from":"c4rxcjv","to":"1x4br4o"},"wvj1p1r":{"as":"arg0","from":"wvj1p1r","to":"1x4br4o"},"k5f4hu0":{"as":"value","from":"k5f4hu0","to":"wvj1p1r"},"rd10d2x":{"as":"value","from":"rd10d2x","to":"c4rxcjv"},"8g09muv":{"as":"value","from":"8g09muv","to":"9sqfffy"},"rguemo9":{"as":"args","from":"rguemo9","to":"9sqfffy"},"3hu1ap0":{"as":"_fn","from":"3hu1ap0","to":"rguemo9"},"9xa3tmr":{"as":"_initbuffer","from":"9xa3tmr","to":"rguemo9"},"asaag3y":{"as":"_inputgeofn","from":"asaag3y","to":"rguemo9"},"fasv291":{"as":"_attributes","from":"fasv291","to":"rguemo9"},"gu5lz7s":{"as":"_lag","from":"gu5lz7s","to":"rguemo9"},"pd7i8r1":{"as":"_initgeofn","from":"pd7i8r1","to":"rguemo9"},"ufnr75u":{"as":"_fb","from":"ufnr75u","to":"rguemo9"},"r094qmn":{"as":"value","from":"r094qmn","to":"ufnr75u"},"w2blnji":{"as":"otherwise","from":"w2blnji","to":"ufnr75u"},"vwfrg0o":{"as":"reference","from":"vwfrg0o","to":"w2blnji"},"03sh3lc":{"as":"value","from":"03sh3lc","to":"r094qmn"},"wo2rq9j":{"as":"reference","from":"wo2rq9j","to":"pd7i8r1"},"x0s5rek":{"as":"value","from":"x0s5rek","to":"wo2rq9j"},"uf0wi9m":{"as":"attr","from":"uf0wi9m","to":"fasv291"},"3h860a0":{"as":"value","from":"3h860a0","to":"uf0wi9m"},"jnmh0h3":{"as":"otherwise","from":"jnmh0h3","to":"uf0wi9m"},"euaw78z":{"as":"otherwise","from":"euaw78z","to":"jnmh0h3"},"qzupnpg":{"as":"value","from":"qzupnpg","to":"jnmh0h3"},"osma418":{"as":"value","from":"osma418","to":"9xa3tmr"},"1p3zq1m":{"as":"buffer","from":"1p3zq1m","to":"osma418"},"7twfyoe":{"as":"false","from":"7twfyoe","to":"3hu1ap0"},"jcuffnj":{"as":"pred","from":"jcuffnj","to":"3hu1ap0"},"k1k5w8g":{"as":"true","from":"k1k5w8g","to":"3hu1ap0"},"8ri2ijg":{"as":"fn","from":"8ri2ijg","to":"jcuffnj"},"dza658p":{"as":"runnable","from":"dza658p","to":"7twfyoe"},"l63qymv":{"as":"runnable","from":"l63qymv","to":"8g09muv"},"wwnvi83":{"as":"fn","from":"wwnvi83","to":"l63qymv"},"3w2rmuu":{"as":"lag","from":"3w2rmuu","to":"wwnvi83"},"cfg6cwi":{"as":"feedback","from":"cfg6cwi","to":"wwnvi83"},"hyvpcan":{"as":"initbuffer","from":"hyvpcan","to":"wwnvi83"},"ron9hq7":{"as":"fn","from":"ron9hq7","to":"wwnvi83"},"s61o3sv":{"as":"inputgeo","from":"s61o3sv","to":"wwnvi83"},"x210zde":{"as":"initgeo","from":"x210zde","to":"wwnvi83"},"zwgcvcc":{"as":"attributes","from":"zwgcvcc","to":"wwnvi83"},"d16msy7":{"as":"fn","from":"d16msy7","to":"5m7ypog"},"pgjrhjg":{"as":"geo","from":"pgjrhjg","to":"5m7ypog"},"c272oro":{"as":"values","from":"c272oro","to":"oh2v6pq"},"paerv24":{"as":"fn","from":"paerv24","to":"oh2v6pq"},"c2cadg0":{"as":"arg1","from":"c2cadg0","to":"c272oro"},"tc49gqg":{"as":"arg0","from":"tc49gqg","to":"c272oro"},"1huvnux":{"as":"otherwise","from":"1huvnux","to":"tc49gqg"},"v2pdw1m":{"as":"value","from":"v2pdw1m","to":"tc49gqg"},"umxfvy2":{"as":"domnodeadded","from":"umxfvy2","to":"nlnzcl9"},"0212zv1":{"as":"fn","from":"0212zv1","to":"umxfvy2"},"lpchkdf":{"as":"parameters","from":"lpchkdf","to":"umxfvy2"},"l2zwani":{"as":"id","from":"l2zwani","to":"lpchkdf"},"elqkhth":{"as":"pred","from":"elqkhth","to":"0212zv1"},"uvci9a0":{"as":"true","from":"uvci9a0","to":"0212zv1"},"012hh43":{"as":"initgeo","from":"012hh43","to":"uvci9a0"},"fa8h1tz":{"as":"graphId","from":"fa8h1tz","to":"uvci9a0"},"lpffact":{"as":"reference","from":"lpffact","to":"012hh43"},"mfs5k94":{"as":"value","from":"mfs5k94","to":"lpffact"},"rhn0q0d":{"as":"show","from":"rhn0q0d","to":"elqkhth"},"tlqfxfv":{"as":"elemid","from":"tlqfxfv","to":"elqkhth"},"xesjclz":{"as":"graphid","from":"xesjclz","to":"elqkhth"},"f38tpm3":{"as":"value","from":"f38tpm3","to":"tlqfxfv"},"cw91s3l":{"as":"reference","from":"cw91s3l","to":"rhn0q0d"},"ik23m2u":{"as":"_showAttributes","from":"ik23m2u","to":"args"},"iyzjr0r":{"as":"_initgeo","from":"iyzjr0r","to":"args"},"lsmnhra":{"as":"_animframe","from":"lsmnhra","to":"args"},"st1qot0":{"as":"_feedback","from":"st1qot0","to":"args"},"w2q4qit":{"as":"value","from":"w2q4qit","to":"iyzjr0r"},"wcm8jds":{"as":"initial","from":"wcm8jds","to":"w2q4qit"},"mtczx8t":{"as":"initial","from":"mtczx8t","to":"ik23m2u"},"w7fctfw":{"as":"persist","from":"w7fctfw","to":"ik23m2u"},"ril0xrx":{"as":"children","from":"ril0xrx","to":"8dy573e"},"16s251p":{"as":"arg0","from":"16s251p","to":"ril0xrx"},"apdh5jc":{"as":"arg1","from":"apdh5jc","to":"ril0xrx"},"pffhleb":{"as":"arg2","from":"pffhleb","to":"ril0xrx"},"rw8xo6i":{"as":"arg3","from":"rw8xo6i","to":"ril0xrx"},"u0gr48a":{"as":"props","from":"u0gr48a","to":"rw8xo6i"},"9wq1kkf":{"as":"id","from":"9wq1kkf","to":"u0gr48a"},"d0f48hu":{"as":"graphid","from":"d0f48hu","to":"9wq1kkf"},"obj8jqm":{"as":"children","from":"obj8jqm","to":"pffhleb"},"51oaoog":{"as":"arg0","from":"51oaoog","to":"obj8jqm"},"6j34vj6":{"as":"arg1","from":"6j34vj6","to":"obj8jqm"},"8h9i92n":{"as":"props","from":"8h9i92n","to":"51oaoog"},"bys7wl1":{"as":"type","from":"bys7wl1","to":"8h9i92n"},"etao6op":{"as":"onchange","from":"etao6op","to":"8h9i92n"},"hoocbol":{"as":"checked","from":"hoocbol","to":"8h9i92n"},"b3fn6gb":{"as":"args","from":"b3fn6gb","to":"etao6op"},"pkb85it":{"as":"fn","from":"pkb85it","to":"etao6op"},"uy17n87":{"as":"value","from":"uy17n87","to":"b3fn6gb"},"aygb0oi":{"as":"children","from":"aygb0oi","to":"apdh5jc"},"1tx5wnh":{"as":"arg1","from":"1tx5wnh","to":"aygb0oi"},"302jicy":{"as":"arg0","from":"302jicy","to":"aygb0oi"},"pk1bbc4":{"as":"props","from":"pk1bbc4","to":"302jicy"},"0tgg4sp":{"as":"onchange","from":"0tgg4sp","to":"pk1bbc4"},"aj17mw0":{"as":"type","from":"aj17mw0","to":"pk1bbc4"},"emol4xt":{"as":"checked","from":"emol4xt","to":"pk1bbc4"},"t9zciub":{"as":"reference","from":"t9zciub","to":"emol4xt"},"43bg3g9":{"as":"args","from":"43bg3g9","to":"0tgg4sp"},"5bfpjjf":{"as":"fn","from":"5bfpjjf","to":"0tgg4sp"},"nxcfe4q":{"as":"value","from":"nxcfe4q","to":"43bg3g9"},"yai4q6q":{"as":"children","from":"yai4q6q","to":"16s251p"},"ha9sbe6":{"as":"arg0","from":"ha9sbe6","to":"yai4q6q"},"y6jnnhr":{"as":"arg1","from":"y6jnnhr","to":"yai4q6q"},"1oskoai":{"as":"props","from":"1oskoai","to":"ha9sbe6"},"dtp36mu":{"as":"onchange","from":"dtp36mu","to":"1oskoai"},"qapcl0i":{"as":"type","from":"qapcl0i","to":"1oskoai"},"vkwxqas":{"as":"checked","from":"vkwxqas","to":"1oskoai"},"1eft9yl":{"as":"args","from":"1eft9yl","to":"dtp36mu"},"8uiwk65":{"as":"fn","from":"8uiwk65","to":"dtp36mu"},"mrpotq6":{"as":"value","from":"mrpotq6","to":"1eft9yl"}},"id":"@three.modify_attribute","nodes":{"out":{"id":"out","name":"@three.modify_attribute","ref":"return"},"splq7ug":{"id":"splq7ug","ref":"@flow.if"},"y4gwi1o":{"id":"y4gwi1o","ref":"arg","value":"geo"},"vn2sh9e":{"id":"vn2sh9e","ref":"return"},"84lpyxq":{"id":"84lpyxq","ref":"@flow.if"},"8itq35i":{"id":"8itq35i","ref":"@js.script","value":"update();\nconsole.log(\"update\", update)\nconst elem = document.getElementById(`datagrid-${graphid}`);\nif(elem) {\n  elem.rowData = [{testA: 1, testB: 2}, {testA: 'A', testB: 'B'}]\n}\nreturn geo;"},"xthz9qz":{"id":"xthz9qz","ref":"arg","value":"__graphid"},"r01zuei":{"id":"r01zuei","ref":"@memory.readReference"},"y31kzli":{"id":"y31kzli","ref":"arg","value":"_initgeo"},"90q41gu":{"id":"90q41gu","ref":"@js.script","value":"return value"},"uplws96":{"id":"uplws96","ref":"@js.script","value":"return true;\nreturn !values.every(v => !v);"},"gvhqdhu":{"id":"gvhqdhu","ref":"arg","value":"geo"},"1x4br4o":{"id":"1x4br4o","ref":"@data.array"},"wvj1p1r":{"id":"wvj1p1r","ref":"@data.ischanged"},"k5f4hu0":{"id":"k5f4hu0","ref":"arg","value":"geo"},"c4rxcjv":{"id":"c4rxcjv","ref":"@data.ischanged"},"rd10d2x":{"id":"rd10d2x","ref":"arg","value":"fn"},"1gvyfv3":{"id":"1gvyfv3","ref":"arg","value":"fn"},"9sqfffy":{"id":"9sqfffy","ref":"return"},"rguemo9":{"id":"rguemo9"},"ufnr75u":{"id":"ufnr75u","ref":"@flow.default"},"w2blnji":{"id":"w2blnji","ref":"@memory.readReference"},"vwfrg0o":{"id":"vwfrg0o","ref":"arg","value":"_feedback"},"r094qmn":{"id":"r094qmn","ref":"@memory.unwrap"},"03sh3lc":{"id":"03sh3lc","ref":"arg","value":"feedback"},"pd7i8r1":{"id":"pd7i8r1","ref":"@memory.readReference"},"wo2rq9j":{"id":"wo2rq9j","ref":"@debug.log","value":"initgeofnarg"},"x0s5rek":{"id":"x0s5rek","ref":"arg","value":"_initgeo"},"gu5lz7s":{"id":"gu5lz7s","ref":"arg","value":"lag"},"fasv291":{"id":"fasv291","ref":"@js.script","value":"\nreturn typeof attr === \"string\" ? attr.split(\",\") : attr;"},"uf0wi9m":{"id":"uf0wi9m","ref":"@flow.default"},"jnmh0h3":{"id":"jnmh0h3","ref":"@flow.default"},"qzupnpg":{"id":"qzupnpg","ref":"arg","value":"__graph_value"},"euaw78z":{"id":"euaw78z","value":"position"},"3h860a0":{"id":"3h860a0","ref":"arg","value":"attribute"},"asaag3y":{"id":"asaag3y","ref":"arg","value":"geo"},"9xa3tmr":{"id":"9xa3tmr","ref":"@memory.cache"},"osma418":{"id":"osma418"},"1p3zq1m":{"id":"1p3zq1m"},"3hu1ap0":{"id":"3hu1ap0","ref":"@flow.if"},"k1k5w8g":{"id":"k1k5w8g","ref":"arg","value":"fn"},"jcuffnj":{"id":"jcuffnj","ref":"@js.script","value":"console.log(\"got fn\", fn)\nreturn typeof fn === \"function\";"},"8ri2ijg":{"id":"8ri2ijg","ref":"arg","value":"fn"},"7twfyoe":{"id":"7twfyoe","ref":"@js.create_fn"},"dza658p":{"id":"dza658p","ref":"arg","value":"fn"},"8g09muv":{"id":"8g09muv","ref":"@js.create_fn"},"l63qymv":{"id":"l63qymv","ref":"@flow.runnable"},"wwnvi83":{"id":"wwnvi83","ref":"@js.script","value":"console.log(\"fn initgeo\", initgeo);\nconst item_size = 3;\n\nconst count = inputgeo.getAttribute(\"position\").count;\n\nif(!feedback || initgeo.getAttribute(\"position\")?.count === 0) {\n  initgeo.copy(inputgeo);\n}\n\nif(!initbuffer?.buffer?.array || initbuffer.buffer.array.length !== count * item_size) {\n  initbuffer.buffer = new _lib.THREE.BufferAttribute(new Float32Array(count * item_size), item_size);\n}\n\nfor(let attribute of attributes) {\n  if((feedback ?  !initgeo.hasAttribute(attribute) : !inputgeo.hasAttribute(attribute)) || initgeo.getAttribute(attribute)?.count !== count) {\n    initgeo.setAttribute(attribute, new _lib.THREE.BufferAttribute(new Float32Array(count * item_size), item_size));\n  }\n}\n\n\nconst attrs = Object.keys(initgeo.attributes);\n\nif (feedback) {\n  attrs.forEach(attr => {\n    if (!attributes.includes(attr) && inputgeo.hasAttribute(attr)) {\n      initgeo.getAttribute(attr)\n          .copy(inputgeo.getAttribute(attr))\n    }\n  })\n}\n\nconst currentAttrs = {};\nattributes.forEach(attribute => {\n  currentAttrs[attribute] = (feedback || !inputgeo.hasAttribute(attribute) ? initgeo : inputgeo).getAttribute(attribute)\n});\nconst targetAttrs = {};\nattributes.forEach(attribute => {\n  targetAttrs[attribute] = \ninitgeo.getAttribute(attribute);\n})\nconst point_data = {};\n\n\nconst newVals = {};\nattributes.forEach(attribute => {\n  newVals[attribute] = new Float32Array(item_size).fill(0);\n});\n\nconsole.log(fn);\n\nfor(let i = 0; i < count; i++){\n  attributes.forEach(attribute => {\n    newVals[attribute].set(currentAttrs[attribute].array\n    .subarray(i * item_size, (i + 1) * item_size));\n  })\n  \n  attrs.forEach(attr => {\n    point_data[attr] = attributes.includes(attr) ? newVals[attr] : initgeo.getAttribute(attr).array\n    .subarray(i * item_size, (i + 1) * item_size)\n  })\n  \n  fn({point_data, index: i})\n  \n  if(lag) {\n    attributes.forEach(attribute => {\n    if(newVals[attribute][0] !== undefined) {\n    newVals[attribute][0] *= (1 - lag)\n    newVals[attribute][0] += lag * targetAttr.getX(i);\n    }\n    if(newVal[attribute][1] !== undefined) {\n    newVals[attribute][1] *= (1 - lag)\n    newVals[attribute][1] += lag * targetAttr.getY(i);\n    }\n    if(newVals[attribute][2] !== undefined) {\n    newVals[attribute][2] *= (1 - lag)\n    newVals[attribute][2] += lag * targetAttr.getZ(i);\n    }\n    })\n  }\n  attributes.map(attribute => {\ntargetAttrs[attribute].array.set(newVals[attribute], i * item_size)\n  })\n}\nattributes.forEach(attribute => {\ntargetAttrs[attribute].needsUpdate = true;\n})\n\nreturn initgeo;"},"zwgcvcc":{"id":"zwgcvcc","ref":"arg","value":"_attributes"},"x210zde":{"id":"x210zde","ref":"arg","value":"_initgeofn"},"s61o3sv":{"id":"s61o3sv","ref":"arg","value":"_inputgeofn"},"ron9hq7":{"id":"ron9hq7","ref":"arg","value":"_fn"},"hyvpcan":{"id":"hyvpcan","ref":"arg","value":"_initbuffer"},"cfg6cwi":{"id":"cfg6cwi","ref":"arg","value":"_fb"},"3w2rmuu":{"id":"3w2rmuu","ref":"arg","value":"_lag"},"5m7ypog":{"id":"5m7ypog","ref":"@js.script","value":"return geo && fn"},"pgjrhjg":{"id":"pgjrhjg","ref":"arg","value":"geo"},"d16msy7":{"id":"d16msy7","ref":"arg","value":"fn"},"oh2v6pq":{"id":"oh2v6pq","ref":"@js.script","value":"console.log(\"got fn 2\", fn)\nreturn values.every(v => v);"},"paerv24":{"id":"paerv24","ref":"arg","value":"fn"},"c272oro":{"id":"c272oro","ref":"@data.array"},"tc49gqg":{"id":"tc49gqg","ref":"@flow.default"},"v2pdw1m":{"id":"v2pdw1m","ref":"arg","value":"__graph_value"},"1huvnux":{"id":"1huvnux","ref":"arg","value":"attribute"},"c2cadg0":{"id":"c2cadg0","ref":"arg","value":"fn"},"nlnzcl9":{"id":"nlnzcl9"},"umxfvy2":{"id":"umxfvy2","ref":"@flow.runnable"},"lpchkdf":{"id":"lpchkdf"},"l2zwani":{"id":"l2zwani"},"0212zv1":{"id":"0212zv1","ref":"@flow.if"},"uvci9a0":{"id":"uvci9a0","ref":"@js.script","value":"console.log(\"initgeo dom change\", initgeo, initgeo.getAttribute(\"position\").count);\nconst arr = new Array(initgeo.getAttribute(\"position\").count).fill(0)\n  .map((_, i) => Object.fromEntries(\n  Object.entries(initgeo.attributes)                                                                                                 \n  .flatMap(e =>\n  new Array(e[1].itemSize).fill(0).map((_, ii) => \n  [e[0] + \".\" + ii, e[1].array[i * e[1].itemSize + ii]])\n)));\n\nconst elem = \ndocument.getElementById(`grid-${graphId}`)\n  if(elem) elem.rowsData = arr;"},"fa8h1tz":{"id":"fa8h1tz","ref":"arg","value":"__graphid"},"012hh43":{"id":"012hh43","ref":"@memory.readReference"},"lpffact":{"id":"lpffact","ref":"@debug.log","value":"displayinitgeo"},"mfs5k94":{"id":"mfs5k94","ref":"arg","value":"_initgeo"},"elqkhth":{"id":"elqkhth","ref":"@js.script","value":"console.log(\"elemideq\", elemid, `grid-${graphid}`, show)\nreturn show && (!show.__kind || show.__kind !== \"nothing\") && elemid === `grid-${graphid}`"},"xesjclz":{"id":"xesjclz","ref":"arg","value":"__graphid"},"tlqfxfv":{"id":"tlqfxfv","ref":"@debug.log","value":"elemid"},"f38tpm3":{"id":"f38tpm3","ref":"arg","value":"id"},"rhn0q0d":{"id":"rhn0q0d","ref":"@memory.readReference"},"cw91s3l":{"id":"cw91s3l","ref":"arg","value":"_showAttributes"},"args":{"id":"args","ref":"extern","value":"extern.data"},"st1qot0":{"id":"st1qot0","ref":"@memory.state"},"lsmnhra":{"id":"lsmnhra","ref":"@memory.state"},"iyzjr0r":{"id":"iyzjr0r","ref":"@debug.log","value":"initgeo"},"w2q4qit":{"id":"w2q4qit","ref":"@memory.reference"},"wcm8jds":{"id":"wcm8jds","ref":"@js.script","value":"const geo = new _lib.THREE.BufferGeometry();\ngeo.setAttribute('position', new _lib.THREE.BufferAttribute( new Float32Array( [] ), 3));\ngeo.computeVertexNormals();\n\nreturn geo"},"ik23m2u":{"id":"ik23m2u","ref":"@memory.state"},"w7fctfw":{"id":"w7fctfw","value":"true"},"mtczx8t":{"id":"mtczx8t","value":"false"},"8dy573e":{"id":"8dy573e","ref":"@html.html_element"},"ril0xrx":{"id":"ril0xrx","ref":"@data.array"},"rw8xo6i":{"id":"rw8xo6i","ref":"@html.html_element","value":"fast-data-grid"},"u0gr48a":{"id":"u0gr48a"},"9wq1kkf":{"id":"9wq1kkf","ref":"@js.script","value":"return `grid-${graphid}`"},"d0f48hu":{"id":"d0f48hu","ref":"arg","value":"__graphid"},"pffhleb":{"id":"pffhleb","ref":"@html.html_element"},"obj8jqm":{"id":"obj8jqm","ref":"@data.array"},"6j34vj6":{"id":"6j34vj6","ref":"@html.html_text","value":"feedback"},"51oaoog":{"id":"51oaoog","ref":"@html.html_element","value":"input"},"8h9i92n":{"id":"8h9i92n"},"hoocbol":{"id":"hoocbol","ref":"arg","value":"_feedback.state"},"etao6op":{"id":"etao6op","ref":"@flow.ap"},"pkb85it":{"id":"pkb85it","ref":"arg","value":"_feedback.set"},"b3fn6gb":{"id":"b3fn6gb"},"uy17n87":{"id":"uy17n87","ref":"arg","value":"event.target.checked"},"bys7wl1":{"id":"bys7wl1","value":"checkbox"},"apdh5jc":{"id":"apdh5jc","ref":"@html.html_element"},"aygb0oi":{"id":"aygb0oi","ref":"@data.array"},"302jicy":{"id":"302jicy","ref":"@html.html_element","value":"input"},"pk1bbc4":{"id":"pk1bbc4"},"emol4xt":{"id":"emol4xt","ref":"@memory.readReference"},"t9zciub":{"id":"t9zciub","ref":"arg","value":"_showAttributes"},"aj17mw0":{"id":"aj17mw0","value":"checkbox"},"0tgg4sp":{"id":"0tgg4sp","ref":"@flow.ap"},"5bfpjjf":{"id":"5bfpjjf","ref":"arg","value":"_showAttributes.set"},"43bg3g9":{"id":"43bg3g9"},"nxcfe4q":{"id":"nxcfe4q","ref":"arg","value":"event.target.checked"},"1tx5wnh":{"id":"1tx5wnh","ref":"@html.html_text","value":"show attributes"},"16s251p":{"id":"16s251p","ref":"@html.html_element"},"yai4q6q":{"id":"yai4q6q","ref":"@data.array"},"y6jnnhr":{"id":"y6jnnhr","ref":"@html.html_text","value":"feedback"},"ha9sbe6":{"id":"ha9sbe6","ref":"@html.html_element","value":"input"},"1oskoai":{"id":"1oskoai"},"vkwxqas":{"id":"vkwxqas","ref":"arg","value":"_feedback.state"},"qapcl0i":{"id":"qapcl0i","value":"checkbox"},"dtp36mu":{"id":"dtp36mu","ref":"@flow.ap"},"8uiwk65":{"id":"8uiwk65","ref":"arg","value":"_feedback.set"},"1eft9yl":{"id":"1eft9yl"},"mrpotq6":{"id":"mrpotq6","ref":"arg","value":"event.target.checked"}},"out":"out"},{"category":"flow","edges":{"8dy573e":{"as":"display","from":"8dy573e","to":"out"},"args":{"as":"args","from":"args","to":"out"},"lq069ea":{"as":"value","from":"lq069ea","to":"out"},"6280gtl":{"as":"node","from":"6280gtl","to":"lq069ea"},"meoy2m1":{"as":"path","from":"meoy2m1","to":"6280gtl"},"y5r6re6":{"as":"target","from":"y5r6re6","to":"6280gtl"},"1te3y5h":{"as":"value","from":"1te3y5h","to":"meoy2m1"},"p53f7fz":{"as":"otherwise","from":"p53f7fz","to":"meoy2m1"},"c8500l8":{"as":"args","from":"c8500l8","to":"p53f7fz"},"7uzzghh":{"as":"reference","from":"7uzzghh","to":"1te3y5h"},"65wrg0t":{"as":"_chosen","from":"65wrg0t","to":"args"},"v47w162":{"as":"persist","from":"v47w162","to":"65wrg0t"},"gqi2qi3":{"as":"children","from":"gqi2qi3","to":"8dy573e"},"iqtj72i":{"as":"value","from":"iqtj72i","to":"8dy573e"},"avuxus7":{"as":"reference","from":"avuxus7","to":"iqtj72i"},"3h30jbe":{"as":"children","from":"3h30jbe","to":"gqi2qi3"},"9r6mj9s":{"as":"props","from":"9r6mj9s","to":"gqi2qi3"},"8f9x43u":{"as":"onchange","from":"8f9x43u","to":"9r6mj9s"},"2j5rxq0":{"as":"args","from":"2j5rxq0","to":"8f9x43u"},"hyw65dk":{"as":"fn","from":"hyw65dk","to":"8f9x43u"},"q0h1zer":{"as":"value","from":"q0h1zer","to":"2j5rxq0"},"3jwyuxb":{"as":"args","from":"3jwyuxb","to":"3h30jbe"},"ddhrxjw":{"as":"value","from":"ddhrxjw","to":"3h30jbe"},"4ujfj58":{"as":"array","from":"4ujfj58","to":"ddhrxjw"},"jdajqk3":{"as":"fn","from":"jdajqk3","to":"ddhrxjw"},"0adxu2g":{"as":"parameters","from":"0adxu2g","to":"jdajqk3"},"evpcvvi":{"as":"fn","from":"evpcvvi","to":"jdajqk3"},"7wx3yq9":{"as":"children","from":"7wx3yq9","to":"evpcvvi"},"m24351r":{"as":"props","from":"m24351r","to":"evpcvvi"},"1s77djh":{"as":"value","from":"1s77djh","to":"m24351r"},"vi5hzzc":{"as":"selected","from":"vi5hzzc","to":"m24351r"},"3368hrf":{"as":"element","from":"3368hrf","to":"vi5hzzc"},"ol4vi41":{"as":"chosen","from":"ol4vi41","to":"vi5hzzc"},"86zvrx4":{"as":"text","from":"86zvrx4","to":"7wx3yq9"},"vz8dmxf":{"as":"element","from":"vz8dmxf","to":"0adxu2g"},"s35ms5l":{"as":"object","from":"s35ms5l","to":"4ujfj58"},"vdh9v4c":{"as":"_chosenarg","from":"vdh9v4c","to":"3jwyuxb"},"0lzp88h":{"as":"reference","from":"0lzp88h","to":"vdh9v4c"}},"id":"@flow.switchInputslocal2","nodes":{"out":{"id":"out","name":"@flow.switchInputslocal2","ref":"return"},"lq069ea":{"id":"lq069ea","ref":"extern","value":"extern.runNode"},"6280gtl":{"id":"6280gtl","ref":"@data.get"},"y5r6re6":{"id":"y5r6re6","ref":"arg","value":"_args"},"meoy2m1":{"id":"meoy2m1","ref":"@flow.default"},"p53f7fz":{"id":"p53f7fz","ref":"@js.script","value":"return (args instanceof Map ? [...args.keys()] : Object.keys(args)).filter(k => !k.startsWith(\"_\"))[0];"},"c8500l8":{"id":"c8500l8","ref":"arg","value":"_args"},"1te3y5h":{"id":"1te3y5h","ref":"@memory.readReference"},"7uzzghh":{"id":"7uzzghh","ref":"arg","value":"_chosen"},"args":{"id":"args"},"65wrg0t":{"id":"65wrg0t","ref":"@memory.reference"},"v47w162":{"id":"v47w162","value":"true"},"8dy573e":{"id":"8dy573e","ref":"@html.html_element"},"iqtj72i":{"id":"iqtj72i","ref":"@memory.readReference"},"avuxus7":{"id":"avuxus7","ref":"arg","value":"_chosen"},"gqi2qi3":{"id":"gqi2qi3","ref":"@html.html_element","value":"select"},"9r6mj9s":{"id":"9r6mj9s"},"8f9x43u":{"id":"8f9x43u","ref":"@flow.ap"},"hyw65dk":{"id":"hyw65dk","ref":"arg","value":"_chosen.set"},"2j5rxq0":{"id":"2j5rxq0"},"q0h1zer":{"id":"q0h1zer","ref":"arg","value":"event.target.value"},"3h30jbe":{"id":"3h30jbe","ref":"return"},"ddhrxjw":{"id":"ddhrxjw","ref":"@data.map"},"jdajqk3":{"id":"jdajqk3","ref":"@flow.runnable"},"evpcvvi":{"id":"evpcvvi","ref":"@html.html_element","value":"option"},"m24351r":{"id":"m24351r"},"vi5hzzc":{"id":"vi5hzzc","ref":"@js.script","value":"return chosen === element;"},"ol4vi41":{"id":"ol4vi41","ref":"arg","value":"_chosenarg"},"3368hrf":{"id":"3368hrf","ref":"arg","value":"element"},"1s77djh":{"id":"1s77djh","ref":"arg","value":"element"},"7wx3yq9":{"id":"7wx3yq9","ref":"@html.html_text"},"86zvrx4":{"id":"86zvrx4","ref":"arg","value":"element"},"0adxu2g":{"id":"0adxu2g"},"vz8dmxf":{"id":"vz8dmxf"},"4ujfj58":{"id":"4ujfj58","ref":"@js.script","value":"return (object instanceof Map ? [...object.keys()] : Object.keys(object)).filter(k => !k.startsWith(\"_\"))"},"s35ms5l":{"id":"s35ms5l","ref":"arg","value":"_args"},"3jwyuxb":{"id":"3jwyuxb"},"vdh9v4c":{"id":"vdh9v4c","ref":"@memory.readReference"},"0lzp88h":{"id":"0lzp88h","ref":"arg","value":"_chosen"}},"out":"out"},{"edges":{"7h0jtuu":{"as":"args","from":"7h0jtuu","to":"ojnm60e"},"at13clu":{"as":"display","from":"at13clu","to":"ojnm60e"},"zqoy0ns":{"as":"value","from":"zqoy0ns","to":"ojnm60e"},"7p23im9":{"as":"lag","from":"7p23im9","to":"zqoy0ns"},"8w4dr8z":{"as":"geo","from":"8w4dr8z","to":"zqoy0ns"},"it2r6xy":{"as":"feedback","from":"it2r6xy","to":"zqoy0ns"},"jmrf097":{"as":"fn","from":"jmrf097","to":"zqoy0ns"},"ka9kj3m":{"as":"attribute","from":"ka9kj3m","to":"zqoy0ns"},"3vszavw":{"as":"args","from":"3vszavw","to":"jmrf097"},"ag5avja":{"as":"value","from":"ag5avja","to":"jmrf097"},"rvnx94v":{"as":"dependencies","from":"rvnx94v","to":"jmrf097"},"s0kxct1":{"as":"value","from":"s0kxct1","to":"rvnx94v"},"asz1c13":{"as":"value","from":"asz1c13","to":"s0kxct1"},"j6bpu1t":{"as":"switchvalue","from":"j6bpu1t","to":"s0kxct1"},"o05qwp8":{"as":"attr","from":"o05qwp8","to":"s0kxct1"},"qjrx7kz":{"as":"value","from":"qjrx7kz","to":"s0kxct1"},"tjdzl1p":{"as":"geo","from":"tjdzl1p","to":"s0kxct1"},"y5ii93g":{"as":"dimensions","from":"y5ii93g","to":"s0kxct1"},"eghgdxj":{"as":"reference","from":"eghgdxj","to":"y5ii93g"},"g9rezcl":{"as":"value","from":"g9rezcl","to":"j6bpu1t"},"le2sums":{"as":"target","from":"le2sums","to":"g9rezcl"},"10y942x":{"as":"value","from":"10y942x","to":"ag5avja"},"oy66fad":{"as":"args","from":"oy66fad","to":"ag5avja"},"0eusc11":{"as":"_rand","from":"0eusc11","to":"oy66fad"},"jzq2qbz":{"as":"_test","from":"jzq2qbz","to":"oy66fad"},"10qj010":{"as":"value","from":"10qj010","to":"0eusc11"},"q78g5uu":{"as":"seed","from":"q78g5uu","to":"10qj010"},"i22whll":{"as":"value","from":"i22whll","to":"10y942x"},"bbgzs9c":{"as":"add","from":"bbgzs9c","to":"i22whll"},"fumqk1i":{"as":"set","from":"fumqk1i","to":"i22whll"},"zjbojs3":{"as":"multiply","from":"zjbojs3","to":"i22whll"},"r1nn3n0":{"as":"fn","from":"r1nn3n0","to":"zjbojs3"},"ynewl2m":{"as":"parameters","from":"ynewl2m","to":"zjbojs3"},"sfxa4m8":{"as":"point_data","from":"sfxa4m8","to":"ynewl2m"},"7irt52k":{"as":"attribute","from":"7irt52k","to":"r1nn3n0"},"ikj5mru":{"as":"dimensions","from":"ikj5mru","to":"r1nn3n0"},"iwut5mk":{"as":"pd","from":"iwut5mk","to":"r1nn3n0"},"kvw5r3b":{"as":"min","from":"kvw5r3b","to":"r1nn3n0"},"nhg18uk":{"as":"max","from":"nhg18uk","to":"r1nn3n0"},"sjx6csp":{"as":"rand","from":"sjx6csp","to":"r1nn3n0"},"4oio614":{"as":"reference","from":"4oio614","to":"ikj5mru"},"j7h7k36":{"as":"fn","from":"j7h7k36","to":"fumqk1i"},"speyvvr":{"as":"parameters","from":"speyvvr","to":"fumqk1i"},"7f9x6vd":{"as":"point_data","from":"7f9x6vd","to":"speyvvr"},"4u70a4f":{"as":"pd","from":"4u70a4f","to":"j7h7k36"},"h6zqeuo":{"as":"min","from":"h6zqeuo","to":"j7h7k36"},"hceyhl2":{"as":"max","from":"hceyhl2","to":"j7h7k36"},"qbaq8ld":{"as":"dimensions","from":"qbaq8ld","to":"j7h7k36"},"tfcak1h":{"as":"attribute","from":"tfcak1h","to":"j7h7k36"},"xdx395l":{"as":"rand","from":"xdx395l","to":"j7h7k36"},"qfncz9y":{"as":"reference","from":"qfncz9y","to":"qbaq8ld"},"lsimwhr":{"as":"fn","from":"lsimwhr","to":"bbgzs9c"},"ud93cpg":{"as":"parameters","from":"ud93cpg","to":"bbgzs9c"},"fu1qnlp":{"as":"point_data","from":"fu1qnlp","to":"ud93cpg"},"1t8ah7e":{"as":"dimensions","from":"1t8ah7e","to":"lsimwhr"},"4gamx3p":{"as":"attribute","from":"4gamx3p","to":"lsimwhr"},"d7zk0zl":{"as":"max","from":"d7zk0zl","to":"lsimwhr"},"fo9abvl":{"as":"rand","from":"fo9abvl","to":"lsimwhr"},"k7v8el6":{"as":"min","from":"k7v8el6","to":"lsimwhr"},"xi0e2vh":{"as":"pd","from":"xi0e2vh","to":"lsimwhr"},"d18ipyf":{"as":"reference","from":"d18ipyf","to":"1t8ah7e"},"rgwevoi":{"as":"_rand","from":"rgwevoi","to":"3vszavw"},"wfdhpgz":{"as":"value","from":"wfdhpgz","to":"rgwevoi"},"h5py7qj":{"as":"seed","from":"h5py7qj","to":"wfdhpgz"},"h8q3o2f":{"as":"children","from":"h8q3o2f","to":"at13clu"},"bpebajp":{"as":"arg1","from":"bpebajp","to":"h8q3o2f"},"k1jooym":{"as":"arg0","from":"k1jooym","to":"h8q3o2f"},"wm8onst":{"as":"children","from":"wm8onst","to":"bpebajp"},"yw56u3o":{"as":"props","from":"yw56u3o","to":"bpebajp"},"jewg5d2":{"as":"multiple","from":"jewg5d2","to":"yw56u3o"},"rwk99t6":{"as":"onclick","from":"rwk99t6","to":"yw56u3o"},"dq7ry1g":{"as":"fn","from":"dq7ry1g","to":"rwk99t6"},"r98gtp4":{"as":"parameters","from":"r98gtp4","to":"rwk99t6"},"hxon3xm":{"as":"event","from":"hxon3xm","to":"r98gtp4"},"oeoqg8x":{"as":"listbox","from":"oeoqg8x","to":"dq7ry1g"},"paaukfz":{"as":"dimensions","from":"paaukfz","to":"dq7ry1g"},"fmghr84":{"as":"arg1","from":"fmghr84","to":"wm8onst"},"l4vvoju":{"as":"arg0","from":"l4vvoju","to":"wm8onst"},"qdx5h2w":{"as":"children","from":"qdx5h2w","to":"l4vvoju"},"sflww08":{"as":"props","from":"sflww08","to":"l4vvoju"},"0wh9iso":{"as":"selected","from":"0wh9iso","to":"sflww08"},"cel1dmx":{"as":"value","from":"cel1dmx","to":"sflww08"},"i29gauu":{"as":"dims","from":"i29gauu","to":"0wh9iso"},"xxh8ucx":{"as":"reference","from":"xxh8ucx","to":"i29gauu"},"fmqnra1":{"as":"props","from":"fmqnra1","to":"fmghr84"},"x3dosd1":{"as":"children","from":"x3dosd1","to":"fmghr84"},"74kt3qo":{"as":"selected","from":"74kt3qo","to":"fmqnra1"},"ssio5yl":{"as":"value","from":"ssio5yl","to":"fmqnra1"},"c78xvjr":{"as":"dims","from":"c78xvjr","to":"74kt3qo"},"0thjz95":{"as":"reference","from":"0thjz95","to":"c78xvjr"},"9cqxs2u":{"as":"_min","from":"9cqxs2u","to":"7h0jtuu"},"atl6v0r":{"as":"_dimensions","from":"atl6v0r","to":"7h0jtuu"},"qx2dpec":{"as":"_max","from":"qx2dpec","to":"7h0jtuu"},"tu2qo0y":{"as":"_attribute","from":"tu2qo0y","to":"7h0jtuu"},"au6fgxu":{"as":"value","from":"au6fgxu","to":"tu2qo0y"},"t1a0zc0":{"as":"otherwise","from":"t1a0zc0","to":"tu2qo0y"},"0h50cp9":{"as":"otherwise","from":"0h50cp9","to":"t1a0zc0"},"gvyw0za":{"as":"value","from":"gvyw0za","to":"t1a0zc0"},"nefgxpk":{"as":"value","from":"nefgxpk","to":"qx2dpec"},"wtjjxd9":{"as":"otherwise","from":"wtjjxd9","to":"qx2dpec"},"zrczkpf":{"as":"value","from":"zrczkpf","to":"atl6v0r"},"gsd6kow":{"as":"initial","from":"gsd6kow","to":"zrczkpf"},"ndn0v2l":{"as":"persist","from":"ndn0v2l","to":"zrczkpf"},"wss2uui":{"as":"value","from":"wss2uui","to":"9cqxs2u"},"yu51m3p":{"as":"otherwise","from":"yu51m3p","to":"9cqxs2u"}},"id":"@three.randomizeAttributelocal","name":"@three.randomizeAttribute","nodes":{"ojnm60e":{"id":"ojnm60e","name":"@three.randomizeAttributelocal","ref":"return"},"zqoy0ns":{"id":"zqoy0ns","ref":"@three.modify_attribute"},"ka9kj3m":{"id":"ka9kj3m","ref":"arg","value":"_attribute"},"jmrf097":{"id":"jmrf097","ref":"return"},"rvnx94v":{"id":"rvnx94v","ref":"@debug.log","value":"dependencies"},"s0kxct1":{"id":"s0kxct1"},"y5ii93g":{"id":"y5ii93g","ref":"@memory.readReference"},"eghgdxj":{"id":"eghgdxj","ref":"arg","value":"_dimensions"},"tjdzl1p":{"id":"tjdzl1p","ref":"arg","value":"geo"},"qjrx7kz":{"id":"qjrx7kz","ref":"arg","value":"_min"},"o05qwp8":{"id":"o05qwp8","ref":"arg","value":"attribute"},"j6bpu1t":{"id":"j6bpu1t","ref":"@debug.log","value":"switchvalue"},"g9rezcl":{"id":"g9rezcl","ref":"@data.get","value":"value"},"le2sums":{"id":"le2sums","ref":"@nodysseus.nodeDisplay","value":"i22whll"},"asz1c13":{"id":"asz1c13","ref":"arg","value":"_max"},"ag5avja":{"id":"ag5avja","ref":"return"},"oy66fad":{"id":"oy66fad"},"jzq2qbz":{"id":"jzq2qbz","value":"test?"},"0eusc11":{"id":"0eusc11","ref":"@debug.log","value":"rand?"},"10qj010":{"id":"10qj010","ref":"@math.random"},"q78g5uu":{"id":"q78g5uu","ref":"arg","value":"seed"},"10y942x":{"id":"10y942x","ref":"@debug.log","value":"fn"},"i22whll":{"id":"i22whll","ref":"@flow.switchInputslocal2"},"zjbojs3":{"id":"zjbojs3","ref":"@flow.runnable"},"ynewl2m":{"id":"ynewl2m"},"sfxa4m8":{"id":"sfxa4m8"},"r1nn3n0":{"id":"r1nn3n0","ref":"@js.script","value":"if(pd[attribute]){dimensions.forEach(dim =>     pd[attribute][dim] *= min + (rand() * (max - min)));}"},"sjx6csp":{"id":"sjx6csp","ref":"arg","value":"_rand"},"nhg18uk":{"id":"nhg18uk","ref":"arg","value":"_max"},"kvw5r3b":{"id":"kvw5r3b","ref":"arg","value":"_min"},"iwut5mk":{"id":"iwut5mk","ref":"arg","value":"point_data"},"ikj5mru":{"id":"ikj5mru","ref":"@memory.readReference"},"4oio614":{"id":"4oio614","ref":"arg","value":"_dimensions"},"7irt52k":{"id":"7irt52k","ref":"arg","value":"_attr"},"fumqk1i":{"id":"fumqk1i","ref":"@flow.runnable"},"speyvvr":{"id":"speyvvr"},"7f9x6vd":{"id":"7f9x6vd"},"j7h7k36":{"id":"j7h7k36","ref":"@js.script","value":"console.log(\"rand\", rand, rand()); if(pd[attribute]){ dimensions.forEach(dim => pd[attribute][0] = min + (rand() * (max - min)));}"},"xdx395l":{"id":"xdx395l","ref":"arg","value":"_rand"},"tfcak1h":{"id":"tfcak1h","ref":"arg","value":"_attribute"},"qbaq8ld":{"id":"qbaq8ld","ref":"@memory.readReference"},"qfncz9y":{"id":"qfncz9y","ref":"arg","value":"_dimensions"},"hceyhl2":{"id":"hceyhl2","ref":"arg","value":"_max"},"h6zqeuo":{"id":"h6zqeuo","ref":"arg","value":"_min"},"4u70a4f":{"id":"4u70a4f","ref":"arg","value":"point_data"},"bbgzs9c":{"id":"bbgzs9c","ref":"@flow.runnable"},"ud93cpg":{"id":"ud93cpg"},"fu1qnlp":{"id":"fu1qnlp"},"lsimwhr":{"id":"lsimwhr","ref":"@js.script","value":"if(pd[attribute]){dimensions.forEach(dim =>   pd[attribute][dim] += min + (rand() * (max - min)));}"},"xi0e2vh":{"id":"xi0e2vh","ref":"arg","value":"point_data"},"k7v8el6":{"id":"k7v8el6","ref":"arg","value":"_min"},"fo9abvl":{"id":"fo9abvl","ref":"arg","value":"_rand"},"d7zk0zl":{"id":"d7zk0zl","ref":"arg","value":"_max"},"4gamx3p":{"id":"4gamx3p","ref":"arg","value":"_attribute"},"1t8ah7e":{"id":"1t8ah7e","ref":"@memory.readReference"},"d18ipyf":{"id":"d18ipyf","ref":"arg","value":"_dimensions"},"3vszavw":{"id":"3vszavw"},"rgwevoi":{"id":"rgwevoi","ref":"@debug.log","value":"rand2?"},"wfdhpgz":{"id":"wfdhpgz","ref":"@math.random"},"h5py7qj":{"id":"h5py7qj","ref":"arg","value":"seed"},"it2r6xy":{"id":"it2r6xy","ref":"arg","value":"lag"},"8w4dr8z":{"id":"8w4dr8z","ref":"arg","value":"geo"},"7p23im9":{"id":"7p23im9","ref":"arg","value":"lag"},"at13clu":{"id":"at13clu","ref":"@html.html_element"},"h8q3o2f":{"id":"h8q3o2f","ref":"@data.array"},"k1jooym":{"id":"k1jooym","ref":"@nodysseus.nodeDisplay","value":"i22whll"},"bpebajp":{"id":"bpebajp","ref":"@html.html_element","value":"fast-listbox"},"yw56u3o":{"id":"yw56u3o"},"rwk99t6":{"id":"rwk99t6","ref":"@flow.runnable"},"r98gtp4":{"id":"r98gtp4"},"hxon3xm":{"id":"hxon3xm"},"dq7ry1g":{"id":"dq7ry1g","ref":"@js.script","value":"requestAnimationFrame(() => {\n  console.log(listbox, dimensions);\n  dimensions.set(listbox.selectedOptions.map(o => parseInt(o.value)));\n})"},"paaukfz":{"id":"paaukfz","ref":"arg","value":"_dimensions"},"oeoqg8x":{"id":"oeoqg8x","ref":"arg","value":"event.target.parentElement"},"jewg5d2":{"id":"jewg5d2","value":"true"},"wm8onst":{"id":"wm8onst","ref":"@data.array"},"l4vvoju":{"id":"l4vvoju","ref":"@html.html_element","value":"fast-option"},"sflww08":{"id":"sflww08"},"cel1dmx":{"id":"cel1dmx","value":"0"},"0wh9iso":{"id":"0wh9iso","ref":"@js.script","value":"return Array.isArray(dims) ? dims.includes(0) : false;"},"i29gauu":{"id":"i29gauu","ref":"@memory.readReference"},"xxh8ucx":{"id":"xxh8ucx","ref":"arg","value":"_dimensions"},"qdx5h2w":{"id":"qdx5h2w","ref":"@html.html_text","value":"X"},"fmghr84":{"id":"fmghr84","ref":"@html.html_element","value":"fast-option"},"x3dosd1":{"id":"x3dosd1","ref":"@html.html_text","value":"Y"},"fmqnra1":{"id":"fmqnra1"},"ssio5yl":{"id":"ssio5yl","value":"1"},"74kt3qo":{"id":"74kt3qo","ref":"@js.script","value":"return Array.isArray(dims) ? dims.includes(1) : false;"},"c78xvjr":{"id":"c78xvjr","ref":"@memory.readReference"},"0thjz95":{"id":"0thjz95","ref":"arg","value":"_dimensions"},"7h0jtuu":{"id":"7h0jtuu"},"tu2qo0y":{"id":"tu2qo0y","ref":"@flow.default"},"t1a0zc0":{"id":"t1a0zc0","ref":"@flow.default"},"gvyw0za":{"id":"gvyw0za","ref":"arg","value":"__graph_value"},"0h50cp9":{"id":"0h50cp9","value":"position"},"au6fgxu":{"id":"au6fgxu","ref":"arg","value":"attribute"},"qx2dpec":{"id":"qx2dpec","ref":"@flow.default"},"wtjjxd9":{"id":"wtjjxd9","value":"1"},"nefgxpk":{"id":"nefgxpk","ref":"arg","value":"max"},"atl6v0r":{"id":"atl6v0r","ref":"@debug.log"},"zrczkpf":{"id":"zrczkpf","ref":"@memory.reference"},"ndn0v2l":{"id":"ndn0v2l","value":"true"},"gsd6kow":{"id":"gsd6kow","value":"[0]"},"9cqxs2u":{"id":"9cqxs2u","ref":"@flow.default"},"yu51m3p":{"id":"yu51m3p","value":"0.001"},"wss2uui":{"id":"wss2uui","ref":"arg","value":"min"}},"out":"ojnm60e"},{"description":"Creates a BufferGeometry using the specified constructor and input nodes as arguments.","edges":{"7vhuixq":{"as":"metadata","from":"7vhuixq","to":"out"},"e08m3vg":{"as":"args","from":"e08m3vg","to":"out"},"output_val":{"as":"value","from":"output_val","to":"out"},"wl24jbc":{"as":"lib","from":"wl24jbc","to":"out"},"tsd4zz1":{"as":"THREE","from":"tsd4zz1","to":"wl24jbc"},"kphtl0m":{"as":"_geometry","from":"kphtl0m","to":"e08m3vg"},"j819k9c":{"as":"true","from":"j819k9c","to":"kphtl0m"},"z82dq3u":{"as":"pred","from":"z82dq3u","to":"kphtl0m"},"7jw4lsu":{"as":"args","from":"7jw4lsu","to":"j819k9c"},"g2xpahw":{"as":"name","from":"g2xpahw","to":"j819k9c"},"8w8gfzn":{"as":"target","from":"8w8gfzn","to":"7jw4lsu"},"mrevz1i":{"as":"arg0","from":"mrevz1i","to":"7jw4lsu"},"4or2htn":{"as":"values","from":"4or2htn","to":"7vhuixq"},"ccmvwyl":{"as":"parameters","from":"ccmvwyl","to":"7vhuixq"},"a3ljk0v":{"as":"true","from":"a3ljk0v","to":"ccmvwyl"},"es3j1s8":{"as":"pred","from":"es3j1s8","to":"ccmvwyl"},"r8fus3z":{"as":"geometry","from":"r8fus3z","to":"a3ljk0v"},"gl3wugl":{"as":"value","from":"gl3wugl","to":"r8fus3z"},"nyv9f1b":{"as":"recache","from":"nyv9f1b","to":"r8fus3z"},"86qm2fw":{"as":"value","from":"86qm2fw","to":"nyv9f1b"}},"id":"@three.geometry","nodes":{"out":{"id":"out","name":"@three.geometry","ref":"return"},"wl24jbc":{"id":"wl24jbc"},"tsd4zz1":{"id":"tsd4zz1","ref":"@js.import_module","value":"https://cdn.jsdelivr.net/npm/three/build/three.module.js"},"output_val":{"id":"output_val","ref":"arg","value":"_geometry"},"e08m3vg":{"id":"e08m3vg"},"kphtl0m":{"id":"kphtl0m","ref":"@flow.if"},"z82dq3u":{"id":"z82dq3u","ref":"arg","value":"__graph_value"},"j819k9c":{"id":"j819k9c","ref":"@js.script","value":"return _lib.THREE[name].fromJSON?.(args ?? {}) ?? new _lib.THREE[name](Object.values(args ?? {}));"},"g2xpahw":{"id":"g2xpahw","ref":"arg","value":"__graph_value"},"7jw4lsu":{"id":"7jw4lsu","ref":"@data.merge_objects_mutable"},"mrevz1i":{"id":"mrevz1i","ref":"arg","value":"_argsdata"},"8w8gfzn":{"id":"8w8gfzn","value":"{}"},"7vhuixq":{"id":"7vhuixq"},"ccmvwyl":{"id":"ccmvwyl","ref":"@flow.if"},"es3j1s8":{"id":"es3j1s8","ref":"arg","value":"__graph_value"},"a3ljk0v":{"id":"a3ljk0v","ref":"@js.script","value":"const keys = Array.from(Object.keys(geometry.parameters))\nreturn Object.fromEntries(keys.map(k => [k, \"any\"]));"},"r8fus3z":{"id":"r8fus3z","ref":"@memory.cache"},"nyv9f1b":{"id":"nyv9f1b","ref":"@data.ischanged"},"86qm2fw":{"id":"86qm2fw","ref":"arg","value":"__graph_value"},"gl3wugl":{"id":"gl3wugl","ref":"arg","value":"_geometry"},"4or2htn":{"id":"4or2htn","ref":"@js.script","value":"return _lib.THREE && Object.keys(_lib.THREE).filter(k => k.endsWith(\"Geometry\"))"}},"out":"out"},{"edges":{"q4hk4bw":{"as":"value","from":"q4hk4bw","to":"t2wl30j"},"q4tskdl":{"as":"args","from":"q4tskdl","to":"t2wl30j"},"r1c4ero":{"as":"metadata","from":"r1c4ero","to":"t2wl30j"},"0e52p8o":{"as":"values","from":"0e52p8o","to":"r1c4ero"},"1twurrd":{"as":"parameters","from":"1twurrd","to":"r1c4ero"},"gj47dqe":{"as":"false","from":"gj47dqe","to":"1twurrd"},"ra5i4nx":{"as":"true","from":"ra5i4nx","to":"1twurrd"},"vu259vf":{"as":"pred","from":"vu259vf","to":"1twurrd"},"cib8xiy":{"as":"path","from":"cib8xiy","to":"vu259vf"},"e1fmps2":{"as":"nodes","from":"e1fmps2","to":"vu259vf"},"3rdanfa":{"as":"node","from":"3rdanfa","to":"ra5i4nx"},"4rmlryt":{"as":"fnparms","from":"4rmlryt","to":"ra5i4nx"},"g8i9gix":{"as":"name","from":"g8i9gix","to":"ra5i4nx"},"qdvndwx":{"as":"nodes","from":"qdvndwx","to":"ra5i4nx"},"595ceg1":{"as":"fn","from":"595ceg1","to":"4rmlryt"},"60htowa":{"as":"path","from":"60htowa","to":"595ceg1"},"tc71fq0":{"as":"target","from":"tc71fq0","to":"595ceg1"},"mbjab0h":{"as":"nodes","from":"mbjab0h","to":"0e52p8o"},"hafko00":{"as":"_threenode","from":"hafko00","to":"q4tskdl"},"o5sgysd":{"as":"_nodes","from":"o5sgysd","to":"q4tskdl"},"m77x5cf":{"as":"url","from":"m77x5cf","to":"o5sgysd"},"63itvqs":{"as":"value","from":"63itvqs","to":"hafko00"},"wkm9i8b":{"as":"args","from":"wkm9i8b","to":"hafko00"},"3gnkfqm":{"as":"_name","from":"3gnkfqm","to":"wkm9i8b"},"6mna45b":{"as":"value","from":"6mna45b","to":"63itvqs"},"ahfnizi":{"as":"recache","from":"ahfnizi","to":"63itvqs"},"r63ulo9":{"as":"value","from":"r63ulo9","to":"ahfnizi"},"eac03sk":{"as":"true","from":"eac03sk","to":"6mna45b"},"tjn10xk":{"as":"pred","from":"tjn10xk","to":"6mna45b"},"cb8yguh":{"as":"value","from":"cb8yguh","to":"eac03sk"},"e4rdngl":{"as":"args","from":"e4rdngl","to":"eac03sk"},"4skly0x":{"as":"_nodeinstance","from":"4skly0x","to":"e4rdngl"},"cxmm7kf":{"as":"nodeArgs","from":"cxmm7kf","to":"4skly0x"},"ey5xe1p":{"as":"nodes","from":"ey5xe1p","to":"4skly0x"},"f1wqp7p":{"as":"args","from":"f1wqp7p","to":"4skly0x"},"qc5yhrk":{"as":"Node","from":"qc5yhrk","to":"4skly0x"},"t90v2ws":{"as":"returnFn","from":"t90v2ws","to":"4skly0x"},"tj0ue40":{"as":"name","from":"tj0ue40","to":"4skly0x"},"xntibr1":{"as":"fnparms","from":"xntibr1","to":"4skly0x"},"l31buvo":{"as":"fn","from":"l31buvo","to":"xntibr1"},"asa6egn":{"as":"path","from":"asa6egn","to":"l31buvo"},"m4euspc":{"as":"target","from":"m4euspc","to":"l31buvo"},"zg12st9":{"as":"url","from":"zg12st9","to":"m4euspc"},"6dpj05t":{"as":"path","from":"6dpj05t","to":"qc5yhrk"},"fzpv502":{"as":"target","from":"fzpv502","to":"qc5yhrk"},"20zj22n":{"as":"url","from":"20zj22n","to":"fzpv502"},"1vdqyt6":{"as":"value","from":"1vdqyt6","to":"f1wqp7p"},"wm6hu13":{"as":"otherwise","from":"wm6hu13","to":"f1wqp7p"},"qbshzkl":{"as":"url","from":"qbshzkl","to":"ey5xe1p"},"g2ai982":{"as":"arg0","from":"g2ai982","to":"cxmm7kf"},"g7jjpiy":{"as":"target","from":"g7jjpiy","to":"cxmm7kf"},"68j6hjq":{"as":"true","from":"68j6hjq","to":"cb8yguh"},"txmw3pd":{"as":"pred","from":"txmw3pd","to":"cb8yguh"},"an8n9z9":{"as":"arg0","from":"an8n9z9","to":"68j6hjq"},"homn2x7":{"as":"target","from":"homn2x7","to":"68j6hjq"},"okhx7t6":{"as":"fnparms","from":"okhx7t6","to":"an8n9z9"},"xsnh3pb":{"as":"args","from":"xsnh3pb","to":"an8n9z9"},"uobnyvk":{"as":"fn","from":"uobnyvk","to":"okhx7t6"},"m4yoq67":{"as":"target","from":"m4yoq67","to":"uobnyvk"},"pw73t77":{"as":"path","from":"pw73t77","to":"uobnyvk"},"t9olptl":{"as":"url","from":"t9olptl","to":"m4yoq67"}},"id":"@three.node","name":"@three.node","nodes":{"t2wl30j":{"id":"t2wl30j","name":"@three.node","ref":"return"},"r1c4ero":{"id":"r1c4ero"},"1twurrd":{"id":"1twurrd","ref":"@flow.if"},"vu259vf":{"id":"vu259vf","ref":"@js.script","value":"return path && nodes && nodes[path];"},"e1fmps2":{"id":"e1fmps2","ref":"arg","value":"_nodes"},"cib8xiy":{"id":"cib8xiy","ref":"arg","value":"__graph_value"},"ra5i4nx":{"id":"ra5i4nx","ref":"@js.script","value":"const nodeKeys = node && Array.from(Object.keys(node)).filter(k => !k.startsWith(\"_\") && !k.startsWith(\"is\") && k.endsWith(\"Node\"));\nconst parms =  Object.fromEntries(nodeKeys.map(k => [k, {type: \"@three.node\"}])\n                                  .concat(fnparms?.filter(p => p !== 'params' && p !== 'parameters').map(p => [p, {type: 'any'}]) ?? [])\n.concat(name && nodes[name].toString() === nodes.float.toString() ? [['value', {type: 'any'}]] : [] ));\n\nreturn parms;"},"qdvndwx":{"id":"qdvndwx","ref":"arg","value":"_nodes"},"g8i9gix":{"id":"g8i9gix","ref":"arg","value":"__graph_value"},"4rmlryt":{"id":"4rmlryt","ref":"extern","value":"extern.functionParameters"},"595ceg1":{"id":"595ceg1","ref":"@data.get"},"tc71fq0":{"id":"tc71fq0","ref":"arg","value":"_nodes"},"60htowa":{"id":"60htowa","ref":"arg","value":"__graph_value"},"3rdanfa":{"id":"3rdanfa","ref":"arg","value":"_threenode"},"gj47dqe":{"id":"gj47dqe","value":"[]"},"0e52p8o":{"id":"0e52p8o","ref":"@js.script","value":"return Object.keys(nodes);"},"mbjab0h":{"id":"mbjab0h","ref":"arg","value":"_nodes"},"q4tskdl":{"id":"q4tskdl"},"o5sgysd":{"hafko00":"8f5duig","id":"o5sgysd","ref":"@js.import_module"},"m77x5cf":{"id":"m77x5cf","ref":"@js.script","value":"\nreturn `https://cdn.jsdelivr.net/npm/three/examples/jsm/nodes/Nodes.js`"},"hafko00":{"id":"hafko00","ref":"return"},"wkm9i8b":{"id":"wkm9i8b"},"3gnkfqm":{"id":"3gnkfqm","ref":"arg","value":"__graph_value"},"63itvqs":{"id":"63itvqs","ref":"@memory.cache"},"ahfnizi":{"id":"ahfnizi","ref":"@data.ischanged"},"r63ulo9":{"id":"r63ulo9","ref":"arg","value":"_name"},"6mna45b":{"id":"6mna45b","ref":"@flow.if"},"tjn10xk":{"id":"tjn10xk","ref":"arg","value":"_name"},"eac03sk":{"id":"eac03sk","ref":"return"},"e4rdngl":{"id":"e4rdngl","ref":"extern","value":"extern.data"},"4skly0x":{"id":"4skly0x","ref":"@js.script","value":"if(returnFn) return Node;\n\nlet created;\n\nconst isConst = Node.toString() == nodes.float.toString();\nif(isConst) {\n  const parms = nodeArgs[\"value\"] ?? args;\n  return Node(...(Array.isArray(parms) ? parms : [parms]));\n}\nconst argArr = [];\nfnparms?.forEach(p => p !== 'params' && p !== 'parameters' && argArr.push(nodeArgs[p]));\n(Array.isArray(args) ? args : [args]).forEach(v => argArr.push(v));\n\ntry {\n  created = new Node(...argArr)\n}catch(e){\n  created = typeof Node === \"function\" ?  Node(...argArr) : Node;\n}\n\nreturn created"},"xntibr1":{"id":"xntibr1","ref":"extern","value":"extern.functionParameters"},"l31buvo":{"id":"l31buvo","ref":"@data.get"},"m4euspc":{"hafko00":"8f5duig","id":"m4euspc","ref":"@js.import_module"},"zg12st9":{"id":"zg12st9","ref":"@js.script","value":"\nreturn `https://cdn.jsdelivr.net/npm/three/examples/jsm/nodes/Nodes.js`"},"asa6egn":{"id":"asa6egn","ref":"arg","value":"_name"},"tj0ue40":{"id":"tj0ue40","ref":"arg","value":"__graph_value"},"t90v2ws":{"id":"t90v2ws","ref":"arg","value":"returnFn"},"qc5yhrk":{"id":"qc5yhrk","ref":"@data.get"},"fzpv502":{"hafko00":"8f5duig","id":"fzpv502","ref":"@js.import_module"},"20zj22n":{"id":"20zj22n","ref":"@js.script","value":"\nreturn `https://cdn.jsdelivr.net/npm/three/examples/jsm/nodes/Nodes.js`"},"6dpj05t":{"id":"6dpj05t","ref":"arg","value":"_name"},"f1wqp7p":{"id":"f1wqp7p","ref":"@flow.default"},"wm6hu13":{"id":"wm6hu13","value":"[]"},"1vdqyt6":{"id":"1vdqyt6","ref":"arg","value":"args"},"ey5xe1p":{"hafko00":"8f5duig","id":"ey5xe1p","ref":"@js.import_module"},"qbshzkl":{"id":"qbshzkl","ref":"@js.script","value":"\nreturn `https://cdn.jsdelivr.net/npm/three/examples/jsm/nodes/Nodes.js`"},"cxmm7kf":{"id":"cxmm7kf","ref":"@data.merge_objects_mutable"},"g7jjpiy":{"id":"g7jjpiy","value":"{}"},"g2ai982":{"id":"g2ai982","ref":"arg","value":"_argsdata"},"cb8yguh":{"id":"cb8yguh","ref":"@flow.if"},"txmw3pd":{"id":"txmw3pd","ref":"arg","value":"_nodeinstance"},"68j6hjq":{"id":"68j6hjq","ref":"@data.merge_objects_mutable"},"homn2x7":{"id":"homn2x7","ref":"arg","value":"_nodeinstance"},"an8n9z9":{"id":"an8n9z9","ref":"@js.script","value":"for(let parm of fnparms) {\n  delete args[parm]\n}\ndelete args[\"args\"];\ndelete args[\"_nodeinstance\"]\nconsole.log(\"args\", args)\nreturn args;"},"xsnh3pb":{"id":"xsnh3pb","ref":"arg","value":"_argsdata"},"okhx7t6":{"id":"okhx7t6","ref":"extern","value":"extern.functionParameters"},"uobnyvk":{"id":"uobnyvk","ref":"@data.get"},"pw73t77":{"id":"pw73t77","ref":"arg","value":"_name"},"m4yoq67":{"hafko00":"8f5duig","id":"m4yoq67","ref":"@js.import_module"},"t9olptl":{"id":"t9olptl","ref":"@js.script","value":"\nreturn `https://cdn.jsdelivr.net/npm/three/examples/jsm/nodes/Nodes.js`"},"q4hk4bw":{"id":"q4hk4bw","ref":"arg","value":"_threenode"}},"out":"t2wl30j"},{"description":"Create a [Light](https://threejs.org/docs/?q=light#api/en/lights/Light) of the type specified in the dropdown. The `intensity` input is the light's intensity","edges":{"38zagsq":{"as":"metadata","from":"38zagsq","to":"out"},"output_val":{"as":"value","from":"output_val","to":"out"},"rgpu8gc":{"as":"lib","from":"rgpu8gc","to":"out"},"dn5axhu":{"as":"THREE","from":"dn5axhu","to":"rgpu8gc"},"6c3y90j":{"as":"args","from":"6c3y90j","to":"output_val"},"urjyf2e":{"as":"intensity","from":"urjyf2e","to":"output_val"},"vhuv19u":{"as":"selected","from":"vhuv19u","to":"output_val"},"vgloog2":{"as":"values","from":"vgloog2","to":"38zagsq"}},"id":"@three.light","nodes":{"out":{"id":"out","name":"@three.light","ref":"return"},"rgpu8gc":{"id":"rgpu8gc"},"dn5axhu":{"id":"dn5axhu","ref":"@js.import_module","value":"https://cdn.jsdelivr.net/npm/three/build/three.module.js"},"output_val":{"id":"output_val","ref":"@js.script","value":"args = args ?? [];\nconst light = selected && new _lib.THREE[selected](...args);\nif(light) {\n  if(intensity) light.intensity = intensity;\n}\n\nreturn light"},"vhuv19u":{"id":"vhuv19u","ref":"arg","value":"__graph_value"},"urjyf2e":{"id":"urjyf2e","ref":"arg","value":"intensity"},"6c3y90j":{"id":"6c3y90j","ref":"arg","value":"args"},"38zagsq":{"id":"38zagsq"},"vgloog2":{"id":"vgloog2","ref":"@js.script","value":"return _lib.THREE ? Object.keys(_lib.THREE).filter(k => k.endsWith(\"Light\")) : []"}},"out":"out"},{"edges":{"0209mcq":{"as":"subscribe","from":"0209mcq","to":"out"},"3wnevku":{"as":"lib","from":"3wnevku","to":"out"},"j9ryrf2":{"as":"args","from":"j9ryrf2","to":"out"},"k30x2hp":{"as":"value","from":"k30x2hp","to":"out"},"mu0then":{"as":"display","from":"mu0then","to":"out"},"2fn7s1a":{"as":"background","from":"2fn7s1a","to":"mu0then"},"8dy573e":{"as":"resultPanel","from":"8dy573e","to":"mu0then"},"72wzn5d":{"as":"true","from":"72wzn5d","to":"k30x2hp"},"efvhz2z":{"as":"pred","from":"efvhz2z","to":"k30x2hp"},"em7kgrn":{"as":"reference","from":"em7kgrn","to":"efvhz2z"},"dbxyytc":{"as":"objects","from":"dbxyytc","to":"72wzn5d"},"ulmar21":{"as":"canvas","from":"ulmar21","to":"72wzn5d"},"2acdour":{"as":"reference","from":"2acdour","to":"ulmar21"},"5oxzqna":{"as":"arg1","from":"5oxzqna","to":"dbxyytc"},"f9cztov":{"as":"cube","from":"f9cztov","to":"dbxyytc"},"b1onylv":{"as":"material","from":"b1onylv","to":"f9cztov"},"oeqoqe8":{"as":"geometry","from":"oeqoqe8","to":"f9cztov"},"cie2or6":{"as":"value","from":"cie2or6","to":"oeqoqe8"},"jbwg8xv":{"as":"geo","from":"jbwg8xv","to":"cie2or6"},"ts0oj0r":{"as":"max","from":"ts0oj0r","to":"cie2or6"},"2bikafa":{"as":"target","from":"2bikafa","to":"ts0oj0r"},"gwfmil4":{"as":"value","from":"gwfmil4","to":"jbwg8xv"},"2t1bca9":{"as":"canvas","from":"2t1bca9","to":"j9ryrf2"},"4d0h7cj":{"as":"THREE","from":"4d0h7cj","to":"3wnevku"},"8ke4eq0":{"as":"domnodeadded","from":"8ke4eq0","to":"0209mcq"},"lzeqibk":{"as":"fn","from":"lzeqibk","to":"8ke4eq0"},"vf6901s":{"as":"args","from":"vf6901s","to":"8ke4eq0"},"vymi9dp":{"as":"value","from":"vymi9dp","to":"vf6901s"},"fp5dv7m":{"as":"canvas_id","from":"fp5dv7m","to":"vymi9dp"}},"id":"threejs_example_randomize","nodes":{"out":{"id":"out","name":"threejs_example_randomize","ref":"return"},"mu0then":{"id":"mu0then"},"8dy573e":{"id":"8dy573e","ref":"@html.html_element"},"2fn7s1a":{"edges":{"1wil42w":{"as":"height","from":"1wil42w","to":"m9gy23g"},"4597zph":{"as":"id","from":"4597zph","to":"mj5a33h"},"7301d8k":{"as":"value","from":"7301d8k","to":"2fn7s1a"},"m9gy23g":{"as":"style","from":"m9gy23g","to":"mj5a33h"},"mj5a33h":{"as":"props","from":"mj5a33h","to":"7301d8k"},"rcodn7b":{"as":"height","from":"rcodn7b","to":"mj5a33h"},"sgmm2eq":{"as":"width","from":"sgmm2eq","to":"m9gy23g"},"w6r5m0k":{"as":"width","from":"w6r5m0k","to":"mj5a33h"}},"id":"2fn7s1a","name":"canvas","nodes":{"1wil42w":{"2fn7s1a":"zdgj2co","id":"1wil42w","value":"100vh"},"2fn7s1a":{"id":"2fn7s1a","name":"canvas","ref":"return"},"4597zph":{"id":"4597zph","value":"threejsrender"},"7301d8k":{"id":"7301d8k","ref":"@html.html_element","value":"canvas"},"m9gy23g":{"id":"m9gy23g"},"mj5a33h":{"id":"mj5a33h"},"rcodn7b":{"id":"rcodn7b","ref":"@js.script","value":"return window.innerHeight"},"sgmm2eq":{"id":"sgmm2eq","value":"100vw"},"w6r5m0k":{"id":"w6r5m0k","ref":"@js.script","value":"return window.innerWidth"}},"out":"2fn7s1a"},"k30x2hp":{"id":"k30x2hp","ref":"@flow.if"},"efvhz2z":{"id":"efvhz2z","ref":"@memory.readReference"},"em7kgrn":{"id":"em7kgrn","ref":"arg","value":"canvas"},"72wzn5d":{"id":"72wzn5d","ref":"@three.setup"},"ulmar21":{"id":"ulmar21","ref":"@memory.readReference"},"2acdour":{"id":"2acdour","ref":"arg","value":"canvas"},"dbxyytc":{"id":"dbxyytc"},"f9cztov":{"id":"f9cztov","ref":"@three.mesh"},"oeqoqe8":{"id":"oeqoqe8","ref":"@debug.log","value":"outgeo"},"cie2or6":{"id":"cie2or6","ref":"@three.randomizeAttributelocal","value":"position"},"ts0oj0r":{"id":"ts0oj0r","ref":"@data.get","value":"value"},"2bikafa":{"id":"2bikafa","ref":"@html.slider","value":"4"},"jbwg8xv":{"id":"jbwg8xv","ref":"@debug.log","value":"ingeo"},"gwfmil4":{"id":"gwfmil4","ref":"@three.geometry","value":"TorusGeometry"},"b1onylv":{"id":"b1onylv","ref":"@three.node","value":"MeshStandardNodeMaterial"},"5oxzqna":{"id":"5oxzqna","ref":"@three.light","value":"HemisphereLight"},"j9ryrf2":{"id":"j9ryrf2"},"2t1bca9":{"id":"2t1bca9","ref":"@memory.reference"},"3wnevku":{"id":"3wnevku"},"4d0h7cj":{"id":"4d0h7cj","ref":"@js.import_module","value":"https://cdn.jsdelivr.net/npm/three/build/three.module.js"},"0209mcq":{"id":"0209mcq"},"8ke4eq0":{"id":"8ke4eq0","ref":"@flow.ap"},"vf6901s":{"id":"vf6901s"},"vymi9dp":{"id":"vymi9dp","ref":"@js.script","value":"const canvas = document.getElementById(canvas_id);\nreturn canvas"},"fp5dv7m":{"id":"fp5dv7m","value":"threejsrender"},"lzeqibk":{"id":"lzeqibk","ref":"arg","value":"canvas.set"}},"out":"out"}]}
