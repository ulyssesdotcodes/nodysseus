[
  {
    "id": "@hydra.setup",
    "name": "@hydra.setup",
    "nodes": [
      {
        "id": "qprobxb"
      },
      {
        "id": "19c8goa",
        "ref": "return"
      },
      {
        "id": "79c8k2a"
      },
      {
        "id": "sw0c5fc"
      },
      {
        "id": "f2prcop",
        "ref": "if"
      },
      {
        "id": "jvtdqoq",
        "value": "",
        "name": "",
        "ref": "cache"
      },
      {
        "id": "1bcbd8k",
        "value": "",
        "name": "",
        "ref": "cache"
      },
      {
        "id": "ykgl85f",
        "ref": "cache"
      },
      {
        "id": "g4tqc0m",
        "ref": "runnable"
      },
      {
        "id": "f3dfhza",
        "ref": "cache"
      },
      {
        "id": "3jzhe52",
        "value": "",
        "ref": "if"
      },
      {
        "id": "fqspyuu",
        "value": "return !!window.OffscreenCanvas",
        "ref": "script"
      },
      {
        "id": "hpazsq4",
        "value": "return document.getElementById(\"hydra-offscreencanvas\");",
        "ref": "script"
      },
      {
        "id": "qgxwzi5",
        "value": "infoctx",
        "ref": "arg"
      },
      {
        "id": "803x166",
        "value": "hydractx",
        "ref": "arg"
      },
      {
        "id": "cqfi9ot",
        "ref": "cache"
      },
      {
        "id": "jf0mxpz",
        "value": "offscreencanvas",
        "name": "",
        "ref": "arg"
      },
      {
        "id": "zw4t06q",
        "ref": "cache"
      },
      {
        "id": "4fniewb",
        "ref": "cache"
      },
      {
        "id": "zolrlvl",
        "value": "offscreencanvas",
        "ref": "arg"
      },
      {
        "id": "mjmfu4c",
        "ref": "cache"
      },
      {
        "id": "x24z7k1",
        "ref": "cache"
      },
      {
        "id": "gpbjihu",
        "value": "offscreencanvas",
        "ref": "arg"
      },
      {
        "id": "bcitgsj",
        "value": "return offscreencanvas.getContext('webgl');",
        "ref": "script"
      },
      {
        "id": "hnankex"
      },
      {
        "id": "5s6mgy5"
      },
      {
        "id": "f8p7ao2"
      },
      {
        "id": "os2c986"
      },
      {
        "id": "tve04h8",
        "value": "offscreencanvas",
        "ref": "arg"
      },
      {
        "id": "tsf1a0o",
        "value": "false"
      },
      {
        "id": "r94pn5e",
        "value": "return new Uint8ClampedArray(window.innerHeight * window.innerWidth * 4);",
        "ref": "script"
      },
      {
        "id": "f6v6p0v",
        "value": "false"
      },
      {
        "id": "11hj9nd",
        "value": "return new Uint8ClampedArray(window.innerHeight * window.innerWidth * 4);",
        "ref": "script"
      },
      {
        "id": "pdxg53n",
        "ref": "if"
      },
      {
        "id": "c207gtt",
        "value": "return new Hydra({detectAudio: false, autoLoop: false, makeGlobal: false, canvas: offscreencanvas});",
        "ref": "script"
      },
      {
        "id": "1c44p6i",
        "ref": "if"
      },
      {
        "id": "0h3xn53",
        "value": "return document.getElementById(\"hydra_canvas\")\n  .getContext('bitmaprenderer')",
        "ref": "script"
      },
      {
        "id": "0qnn9sj",
        "value": "return document.getElementById(\"hydra_canvas\");",
        "ref": "script"
      },
      {
        "id": "4gmn3pe",
        "ref": "if"
      },
      {
        "id": "latqq1h",
        "value": "if(infoimage){\n  //console.log(infoctx);\n  //console.log(infoimage);\n  infoctx\n    .transferFromImageBitmap(infoimage);\n}\n\nif(mainimage){\n  //console.log(hydractx);\n  //console.log(mainimage);\n hydractx\n   .transferFromImageBitmap(mainimage);\n}\n\nreturn false;",
        "name": "",
        "ref": "script"
      },
      {
        "id": "22gp1iu",
        "value": "hydralib",
        "ref": "arg"
      },
      {
        "id": "mzmnnm1",
        "ref": "cache"
      },
      {
        "id": "ngnjunp",
        "value": "return offscreencanvas.getContext('webgl');",
        "ref": "script"
      },
      {
        "id": "bce7cc2",
        "value": "offscreencanvas",
        "ref": "arg"
      },
      {
        "id": "j7l55m5",
        "ref": "cache"
      },
      {
        "id": "4md3go8",
        "value": "return offscreencanvas.getContext('webgl');",
        "ref": "script"
      },
      {
        "id": "vysuy4g",
        "value": "offscreencanvas",
        "ref": "arg"
      },
      {
        "id": "53s7x8i",
        "value": "if(!offscreen || (isrunning.flag && isrunning.flag > performance.now() - 1000)){\n  return false;\n}\n\nisrunning.flag = performance.now();\n\nhydra.synth.render(hydra.synth.o1);\nhydra.tick(0);\n\n//console.log(hydra.synth.o1);\n\nif(offscreen['transferToImageBitmap']){\n  isrunning.flag = false;\n  return offscreen.transferToImageBitmap();\n}\n\nconst pixels = offscreenctx.readPixels(\n  0, 0, \n  window.innerWidth, \n  window.innerHeight,\n  offscreenctx.RGBA,\n  offscreenctx.UNSIGNED_BYTE,\n  arr.value\n);\n  \nreturn createImageBitmap(\n  new ImageData( \n    arr.value, \n    window.innerWidth,\n    window.innerHeight\n  ))\n  .catch(e => {isrunning.flag = false; throw e; })\n  .then(bm => {\n    isrunning.flag = false; \n    return bm\n  })",
        "ref": "script"
      },
      {
        "id": "uw00ao6",
        "value": "if(!offscreen || (isrunning.flag && isrunning.flag > performance.now() - 1000)){\n  console.log('skipped ' + isrunning.flag);\n  return false;\n}\n\nisrunning.flag = performance.now();\n\n\nhydra.synth.render(hydra.synth.o0);\nhydra.tick(16.666);\n\nif(offscreen['transferToImageBitmap']){\n  isrunning.flag = false;\n  return offscreen.transferToImageBitmap();\n}\n\nconst pixels = offscreenctx.readPixels(\n  0, 0, \n  window.innerWidth, \n  window.innerHeight,\n  offscreenctx.RGBA,\n  offscreenctx.UNSIGNED_BYTE,\n  arr.value\n);\n  \nreturn createImageBitmap(new ImageData( \n  arr.value, \n  window.innerWidth, \n  window.innerHeight))\n  .catch(e => {isrunning.flag = false; throw e; })\n  .then(bm => {\n    isrunning.flag = false; \n    return bm\n  })",
        "ref": "script"
      },
      {
        "id": "pu58ta7",
        "name": "@hydra.setup",
        "ref": "return"
      },
      {
        "id": "yx7ey2z",
        "ref": "state"
      },
      {
        "id": "xcrd7qs",
        "value": "hydrafn.state",
        "ref": "arg"
      },
      {
        "id": "avq93st",
        "value": "hydrafn.state",
        "ref": "arg"
      },
      {
        "id": "j8t2iff",
        "value": "hydrafn.state",
        "ref": "arg"
      },
      {
        "id": "ynzph5o",
        "value": "hydrafn.state",
        "ref": "arg"
      },
      {
        "id": "wynqj8w",
        "ref": "ap"
      },
      {
        "id": "adwssev"
      },
      {
        "id": "n4rz3ia",
        "value": "hydrafn.set",
        "ref": "arg"
      },
      {
        "id": "xanx4dd",
        "value": "true"
      },
      {
        "id": "81t5o91",
        "value": "return import(\"https://unpkg.com/hydra-synth@1.3.18\")",
        "ref": "script"
      },
      {
        "id": "l063dsq",
        "ref": "state"
      },
      {
        "id": "kof63cy",
        "ref": "ap"
      },
      {
        "id": "lf5i9oh"
      },
      {
        "id": "a6a7bcx",
        "ref": "runnable"
      },
      {
        "id": "0wg6nm2",
        "value": "true"
      },
      {
        "id": "tbfhmoe",
        "value": "data",
        "ref": "arg"
      },
      {
        "id": "cy3hab1",
        "value": "nodeselect.state",
        "ref": "arg"
      },
      {
        "id": "elz5rb1",
        "value": "nodeselect.set",
        "ref": "arg"
      },
      {
        "id": "x8421hb",
        "ref": "cache"
      },
      {
        "id": "qdx31wd",
        "value": "const el = document.getElementById(\"node-editor-info-canvas\");\nreturn el.getContext('bitmaprenderer');",
        "ref": "script"
      },
      {
        "id": "kp5v9tn",
        "value": "infoctx",
        "ref": "arg"
      },
      {
        "id": "6lxj1j9",
        "value": "hydractx",
        "ref": "arg"
      },
      {
        "id": "9iovlwg",
        "value": "const cvs = new OffscreenCanvas(window.innerWidth, window.innerHeight);\nreturn cvs;",
        "ref": "script"
      },
      {
        "id": "jawt1f7",
        "value": "const run =  hydrafn && infoctx && hydractx;\nreturn run;",
        "ref": "script"
      },
      {
        "id": "p9462u4",
        "value": "__graphid",
        "ref": "arg"
      },
      {
        "id": "v2ss4fq",
        "value": "const parentest = _lib.no.runtime.get_parentest(graphid);\nreturn selected \n  && parentest && _lib.no.runtime.get_node(\n  parentest,\n    selected)?.ref === \"@hydra.node\";",
        "ref": "script"
      }
    ],
    "edges": [
      {
        "from": "qprobxb",
        "to": "pu58ta7",
        "as": "args"
      },
      {
        "from": "79c8k2a",
        "to": "19c8goa",
        "as": "args"
      },
      {
        "from": "sw0c5fc",
        "to": "19c8goa",
        "as": "subscribe"
      },
      {
        "from": "ykgl85f",
        "to": "79c8k2a",
        "as": "offscreencanvas"
      },
      {
        "from": "x8421hb",
        "to": "79c8k2a",
        "as": "infoctx"
      },
      {
        "from": "22gp1iu",
        "to": "f2prcop",
        "as": "pred"
      },
      {
        "from": "f3dfhza",
        "to": "f2prcop",
        "as": "true"
      },
      {
        "from": "3jzhe52",
        "to": "ykgl85f",
        "as": "value"
      },
      {
        "from": "qdx31wd",
        "to": "x8421hb",
        "as": "value"
      },
      {
        "from": "c207gtt",
        "to": "f3dfhza",
        "as": "value"
      },
      {
        "from": "fqspyuu",
        "to": "3jzhe52",
        "as": "pred"
      },
      {
        "from": "hpazsq4",
        "to": "3jzhe52",
        "as": "false"
      },
      {
        "from": "9iovlwg",
        "to": "3jzhe52",
        "as": "true"
      },
      {
        "from": "avq93st",
        "to": "latqq1h",
        "as": "hydra"
      },
      {
        "from": "qgxwzi5",
        "to": "latqq1h",
        "as": "infoctx"
      },
      {
        "from": "803x166",
        "to": "latqq1h",
        "as": "hydractx"
      },
      {
        "from": "uw00ao6",
        "to": "latqq1h",
        "as": "mainimage"
      },
      {
        "from": "cqfi9ot",
        "to": "latqq1h",
        "as": "offscreenctx"
      },
      {
        "from": "jf0mxpz",
        "to": "c207gtt",
        "as": "offscreencanvas"
      },
      {
        "from": "zw4t06q",
        "to": "uw00ao6",
        "as": "isrunning"
      },
      {
        "from": "j8t2iff",
        "to": "uw00ao6",
        "as": "hydra"
      },
      {
        "from": "4fniewb",
        "to": "uw00ao6",
        "as": "arr"
      },
      {
        "from": "zolrlvl",
        "to": "uw00ao6",
        "as": "offscreen"
      },
      {
        "from": "mjmfu4c",
        "to": "53s7x8i",
        "as": "isrunning"
      },
      {
        "from": "ynzph5o",
        "to": "53s7x8i",
        "as": "hydra"
      },
      {
        "from": "x24z7k1",
        "to": "53s7x8i",
        "as": "arr"
      },
      {
        "from": "gpbjihu",
        "to": "53s7x8i",
        "as": "offscreen"
      },
      {
        "from": "bcitgsj",
        "to": "cqfi9ot",
        "as": "value"
      },
      {
        "from": "hnankex",
        "to": "zw4t06q",
        "as": "value"
      },
      {
        "from": "5s6mgy5",
        "to": "4fniewb",
        "as": "value"
      },
      {
        "from": "f8p7ao2",
        "to": "mjmfu4c",
        "as": "value"
      },
      {
        "from": "os2c986",
        "to": "x24z7k1",
        "as": "value"
      },
      {
        "from": "tve04h8",
        "to": "bcitgsj",
        "as": "offscreencanvas"
      },
      {
        "from": "tsf1a0o",
        "to": "hnankex",
        "as": "flag"
      },
      {
        "from": "r94pn5e",
        "to": "5s6mgy5",
        "as": "value"
      },
      {
        "from": "f6v6p0v",
        "to": "f8p7ao2",
        "as": "flag"
      },
      {
        "from": "11hj9nd",
        "to": "os2c986",
        "as": "value"
      },
      {
        "from": "pdxg53n",
        "to": "latqq1h",
        "as": "infoimage"
      },
      {
        "from": "53s7x8i",
        "to": "pdxg53n",
        "as": "true"
      },
      {
        "from": "v2ss4fq",
        "to": "pdxg53n",
        "as": "pred"
      },
      {
        "from": "cy3hab1",
        "to": "v2ss4fq",
        "as": "selected"
      },
      {
        "from": "jvtdqoq",
        "to": "79c8k2a",
        "as": "hydractx"
      },
      {
        "from": "1c44p6i",
        "to": "jvtdqoq",
        "as": "value"
      },
      {
        "from": "0h3xn53",
        "to": "1c44p6i",
        "as": "true"
      },
      {
        "from": "0qnn9sj",
        "to": "1c44p6i",
        "as": "pred"
      },
      {
        "from": "4gmn3pe",
        "to": "g4tqc0m",
        "as": "fn"
      },
      {
        "from": "latqq1h",
        "to": "4gmn3pe",
        "as": "true"
      },
      {
        "from": "g4tqc0m",
        "to": "sw0c5fc",
        "as": "animationframe"
      },
      {
        "from": "ngnjunp",
        "to": "mzmnnm1",
        "as": "value"
      },
      {
        "from": "bce7cc2",
        "to": "ngnjunp",
        "as": "offscreencanvas"
      },
      {
        "from": "mzmnnm1",
        "to": "uw00ao6",
        "as": "offscreenctx"
      },
      {
        "from": "4md3go8",
        "to": "j7l55m5",
        "as": "value"
      },
      {
        "from": "vysuy4g",
        "to": "4md3go8",
        "as": "offscreencanvas"
      },
      {
        "from": "j7l55m5",
        "to": "53s7x8i",
        "as": "offscreenctx"
      },
      {
        "from": "yx7ey2z",
        "to": "79c8k2a",
        "as": "hydrafn"
      },
      {
        "from": "adwssev",
        "to": "wynqj8w",
        "as": "args"
      },
      {
        "from": "xanx4dd",
        "to": "wynqj8w",
        "as": "run"
      },
      {
        "from": "l063dsq",
        "to": "79c8k2a",
        "as": "nodeselect"
      },
      {
        "from": "lf5i9oh",
        "to": "kof63cy",
        "as": "args"
      },
      {
        "from": "tbfhmoe",
        "to": "lf5i9oh",
        "as": "value"
      },
      {
        "from": "a6a7bcx",
        "to": "sw0c5fc",
        "as": "nodeselect"
      },
      {
        "from": "kof63cy",
        "to": "a6a7bcx",
        "as": "fn"
      },
      {
        "from": "0wg6nm2",
        "to": "kof63cy",
        "as": "run"
      },
      {
        "from": "elz5rb1",
        "to": "kof63cy",
        "as": "fn"
      },
      {
        "from": "19c8goa",
        "to": "pu58ta7",
        "as": "value"
      },
      {
        "from": "jawt1f7",
        "to": "4gmn3pe",
        "as": "pred"
      },
      {
        "from": "xcrd7qs",
        "to": "jawt1f7",
        "as": "hydrafn"
      },
      {
        "from": "6lxj1j9",
        "to": "jawt1f7",
        "as": "hydractx"
      },
      {
        "from": "kp5v9tn",
        "to": "jawt1f7",
        "as": "infoctx"
      },
      {
        "from": "p9462u4",
        "to": "v2ss4fq",
        "as": "graphid"
      },
      {
        "from": "wynqj8w",
        "to": "19c8goa",
        "as": "value"
      },
      {
        "from": "81t5o91",
        "to": "1bcbd8k",
        "as": "value"
      },
      {
        "from": "1bcbd8k",
        "to": "79c8k2a",
        "as": "hydralib"
      },
      {
        "from": "f2prcop",
        "to": "adwssev",
        "as": "value"
      },
      {
        "from": "n4rz3ia",
        "to": "wynqj8w",
        "as": "fn"
      }
    ],
    "out": "pu58ta7"
  },
  {
    "id": "@hydra.node",
    "name": "@hydra.node",
    "nodes": [
      {
        "id": "0z8n1c5"
      },
      {
        "id": "86kzr1o",
        "ref": "html_element"
      },
      {
        "id": "rzci86a",
        "ref": "array"
      },
      {
        "id": "cxogbsx",
        "value": "style",
        "ref": "css_styles"
      },
      {
        "id": "cwsnw3u"
      },
      {
        "id": "9tq6wsn"
      },
      {
        "id": "zz29uhx",
        "value": "block"
      },
      {
        "id": "1l6dkyz",
        "value": "2"
      },
      {
        "id": "cyxlvic"
      },
      {
        "id": "2snocuv",
        "value": "3"
      },
      {
        "id": "raqk17g"
      },
      {
        "id": "ec680ja",
        "value": "1"
      },
      {
        "id": "ysash4u",
        "name": "@hydra.node",
        "ref": "return"
      },
      {
        "id": "nn4xcwp",
        "ref": "state"
      },
      {
        "id": "15rp6fz",
        "ref": "return"
      },
      {
        "id": "mb9eakn"
      },
      {
        "id": "zj1khwm",
        "ref": "ap"
      },
      {
        "id": "l13no4n"
      },
      {
        "id": "t46m810",
        "value": "selectednode.set",
        "ref": "arg"
      },
      {
        "id": "ojc7op1"
      },
      {
        "id": "gvs68dy",
        "ref": "state"
      },
      {
        "id": "z36hn49",
        "value": "__graphid",
        "ref": "arg"
      },
      {
        "id": "4dfbsxf",
        "value": "selectednode.state",
        "ref": "arg"
      },
      {
        "id": "30x4krt",
        "ref": "call_method"
      },
      {
        "id": "yn30cd2",
        "value": "self",
        "ref": "arg"
      },
      {
        "id": "svha9v2",
        "value": "fn_args",
        "ref": "arg"
      },
      {
        "id": "7lu02w1",
        "value": "__graph_value",
        "ref": "arg"
      },
      {
        "id": "efbru6j",
        "ref": "runnable"
      },
      {
        "id": "3cw9dfh",
        "value": "const parent = _lib.no.runtime.get_parent(graphid);\nparent && _lib.no.runtime.add_node(parent, { id: graphid.split('/').slice(-1)[0], ref: '@hydra.node', value: property});",
        "ref": "script"
      },
      {
        "id": "d6feiph",
        "value": "__graphid",
        "ref": "arg"
      },
      {
        "id": "piuy4fl",
        "value": "event.target.value",
        "ref": "arg"
      },
      {
        "id": "z72kd81",
        "ref": "ap"
      },
      {
        "id": "0li027l"
      },
      {
        "id": "i2dymn5",
        "value": "selfstate.set",
        "ref": "arg"
      },
      {
        "id": "wr2n658",
        "value": "true"
      },
      {
        "id": "1f4sf4g",
        "value": "data",
        "ref": "arg"
      },
      {
        "id": "uiysn1q",
        "value": "_lib.hydra.synth",
        "ref": "arg"
      },
      {
        "id": "l1f572i",
        "value": "if(graphid.endsWith(selected)){ \n  self.out(hydra.o1); \n}\n\nreturn self;",
        "ref": "script"
      }
    ],
    "edges": [
      {
        "from": "0z8n1c5",
        "to": "ysash4u",
        "as": "args"
      },
      {
        "from": "cxogbsx",
        "to": "rzci86a",
        "as": "arg0"
      },
      {
        "from": "rzci86a",
        "to": "86kzr1o",
        "as": "children"
      },
      {
        "from": "cwsnw3u",
        "to": "cxogbsx",
        "as": "css_object"
      },
      {
        "from": "9tq6wsn",
        "to": "cwsnw3u",
        "as": "#node-editor-info-canvas"
      },
      {
        "from": "zz29uhx",
        "to": "9tq6wsn",
        "as": "display"
      },
      {
        "from": "1l6dkyz",
        "to": "9tq6wsn",
        "as": "order"
      },
      {
        "from": "2snocuv",
        "to": "cyxlvic",
        "as": "order"
      },
      {
        "from": "cyxlvic",
        "to": "cwsnw3u",
        "as": "#node-info-wrapper .buttons"
      },
      {
        "from": "raqk17g",
        "to": "cwsnw3u",
        "as": "#node-info-property"
      },
      {
        "from": "ec680ja",
        "to": "raqk17g",
        "as": "order"
      },
      {
        "from": "nn4xcwp",
        "to": "0z8n1c5",
        "as": "selfstate"
      },
      {
        "from": "l1f572i",
        "to": "15rp6fz",
        "as": "value"
      },
      {
        "from": "ojc7op1",
        "to": "15rp6fz",
        "as": "args"
      },
      {
        "from": "mb9eakn",
        "to": "15rp6fz",
        "as": "subscribe"
      },
      {
        "from": "zj1khwm",
        "to": "mb9eakn",
        "as": "nodeselect"
      },
      {
        "from": "t46m810",
        "to": "zj1khwm",
        "as": "fn"
      },
      {
        "from": "l13no4n",
        "to": "zj1khwm",
        "as": "args"
      },
      {
        "from": "gvs68dy",
        "to": "ojc7op1",
        "as": "selectednode"
      },
      {
        "from": "30x4krt",
        "to": "l1f572i",
        "as": "self"
      },
      {
        "from": "uiysn1q",
        "to": "l1f572i",
        "as": "hydra"
      },
      {
        "from": "4dfbsxf",
        "to": "l1f572i",
        "as": "selected"
      },
      {
        "from": "z36hn49",
        "to": "l1f572i",
        "as": "graphid"
      },
      {
        "from": "efbru6j",
        "to": "30x4krt",
        "as": "onchange"
      },
      {
        "from": "7lu02w1",
        "to": "30x4krt",
        "as": "fn"
      },
      {
        "from": "svha9v2",
        "to": "30x4krt",
        "as": "fn_args"
      },
      {
        "from": "3cw9dfh",
        "to": "efbru6j",
        "as": "fn"
      },
      {
        "from": "piuy4fl",
        "to": "3cw9dfh",
        "as": "property"
      },
      {
        "from": "d6feiph",
        "to": "3cw9dfh",
        "as": "graphid"
      },
      {
        "from": "15rp6fz",
        "to": "ysash4u",
        "as": "value"
      },
      {
        "from": "86kzr1o",
        "to": "ysash4u",
        "as": "display"
      },
      {
        "from": "z72kd81",
        "to": "30x4krt",
        "as": "self"
      },
      {
        "from": "0li027l",
        "to": "z72kd81",
        "as": "args"
      },
      {
        "from": "yn30cd2",
        "to": "0li027l",
        "as": "value"
      },
      {
        "from": "i2dymn5",
        "to": "z72kd81",
        "as": "fn"
      },
      {
        "from": "wr2n658",
        "to": "z72kd81",
        "as": "run"
      },
      {
        "from": "1f4sf4g",
        "to": "l13no4n",
        "as": "value"
      }
    ],
    "out": "ysash4u"
  }
]